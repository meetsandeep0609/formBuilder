/*
formBuilder - https://formbuilder.online/
Version: 1.24.2
Author: Kevin Chappell <kevin.b.chappell@gmail.com>
*/
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

/**
 * Form Builder events
 * @return {Object} various events to be trigger
 */
// function fbEvents(){
var events = {};

events.loaded = new Event('loaded');
events.viewData = new Event('viewData');
events.userDeclined = new Event('userDeclined');
events.modalClosed = new Event('modalClosed');
events.modalOpened = new Event('modalOpened');
events.formSaved = new Event('formSaved');
events.fieldAdded = new Event('fieldAdded');
events.fieldRemoved = new Event('fieldRemoved');

//   return events;
// }

module.exports = events;

},{}],2:[function(require,module,exports){
'use strict';

require('./kc-toggle.js');
require('./polyfills.js');

(function ($) {
  var FormBuilder = function FormBuilder(options, element) {
    var _this = this;

    var formBuilder = this;

    var defaults = {
      controlPosition: 'right',
      controlOrder: ['autocomplete', 'button', 'checkbox', 'checkbox-group', 'date', 'file', 'header', 'hidden', 'paragraph', 'number', 'radio-group', 'select', 'text', 'textarea'],
      dataType: 'json',
      // Array of fields to disable
      disableFields: [],
      editOnAdd: false,
      // Uneditable fields or other content you would like to appear
      // before and after regular fields:
      append: false,
      prepend: false,
      // array of objects with fields values
      // ex:
      // defaultFields: [{
      //   label: 'First Name',
      //   name: 'first-name',
      //   required: 'true',
      //   description: 'Your first name',
      //   type: 'text'
      // }, {
      //   label: 'Phone',
      //   name: 'phone',
      //   description: 'How can we reach you?',
      //   type: 'text'
      // }],
      defaultFields: [],
      inputSets: [],
      fieldRemoveWarn: false,
      roles: {
        1: 'Administrator'
      },
      messages: {
        addOption: 'Add Option +',
        allFieldsRemoved: 'All fields were removed.',
        allowMultipleFiles: 'Allow users to upload multiple files',
        autocomplete: 'Autocomplete',
        button: 'Button',
        cannotBeEmpty: 'This field cannot be empty',
        checkboxGroup: 'Checkbox Group',
        checkbox: 'Checkbox',
        checkboxes: 'Checkboxes',
        className: 'Class',
        clearAllMessage: 'Are you sure you want to clear all fields?',
        clearAll: 'Clear',
        close: 'Close',
        content: 'Content',
        copy: 'Copy To Clipboard',
        copyButton: '&#43;',
        copyButtonTooltip: 'Copy',
        dateField: 'Date Field',
        description: 'Help Text',
        descriptionField: 'Description',
        devMode: 'Developer Mode',
        editNames: 'Edit Names',
        editorTitle: 'Form Elements',
        editXML: 'Edit XML',
        enableOther: 'Enable &quot;Other&quot;',
        enableOtherMsg: 'Let users to enter an unlisted option',
        fieldDeleteWarning: false,
        fieldVars: 'Field Variables',
        fieldNonEditable: 'This field cannot be edited.',
        fieldRemoveWarning: 'Are you sure you want to remove this field?',
        fileUpload: 'File Upload',
        formUpdated: 'Form Updated',
        getStarted: 'Drag a field from the right to this area',
        header: 'Header',
        hide: 'Edit',
        hidden: 'Hidden Input',
        label: 'Label',
        labelEmpty: 'Field Label cannot be empty',
        limitRole: 'Limit access to one or more of the following roles:',
        mandatory: 'Mandatory',
        maxlength: 'Max Length',
        minOptionMessage: 'This field requires a minimum of 2 options',
        multipleFiles: 'Multiple Files',
        name: 'Name',
        no: 'No',
        number: 'Number',
        off: 'Off',
        on: 'On',
        option: 'Option',
        optional: 'optional',
        optionLabelPlaceholder: 'Label',
        optionValuePlaceholder: 'Value',
        optionEmpty: 'Option value required',
        other: 'Other',
        paragraph: 'Paragraph',
        placeholder: 'Placeholder',
        placeholders: {
          value: 'Value',
          label: 'Label',
          text: '',
          textarea: '',
          email: 'Enter you email',
          placeholder: '',
          className: 'space separated classes',
          password: 'Enter your password'
        },
        preview: 'Preview',
        radioGroup: 'Radio Group',
        radio: 'Radio',
        removeMessage: 'Remove Element',
        removeOption: 'Remove Option',
        remove: '&#215;',
        required: 'Required',
        richText: 'Rich Text Editor',
        roles: 'Access',
        rows: 'Rows',
        save: 'Save',
        selectOptions: 'Options',
        select: 'Select',
        selectColor: 'Select Color',
        selectionsMessage: 'Allow Multiple Selections',
        size: 'Size',
        sizes: {
          xs: 'Extra Small',
          sm: 'Small',
          m: 'Default',
          lg: 'Large'
        },
        style: 'Style',
        styles: {
          btn: {
            'default': 'Default',
            danger: 'Danger',
            info: 'Info',
            primary: 'Primary',
            success: 'Success',
            warning: 'Warning'
          }
        },
        subtype: 'Type',
        text: 'Text Field',
        textArea: 'Text Area',
        toggle: 'Toggle',
        warning: 'Warning!',
        value: 'Value',
        viewJSON: '{  }',
        viewXML: '&lt;/&gt;',
        yes: 'Yes'
      },
      notify: {
        error: function error(message) {
          return console.error(message);
        },
        success: function success(message) {
          return console.log(message);
        },
        warning: function warning(message) {
          return console.warn(message);
        }
      },
      sortableControls: false,
      stickyControls: false,
      showActionButtons: true,
      typeUserAttrs: {},
      typeUserEvents: {},
      prefix: 'form-builder-'
    };

    var utils = require('./utils.js');

    defaults.messages.subtypes = function () {
      var subtypeDefault = function subtypeDefault(subtype) {
        return {
          label: subtype,
          value: subtype
        };
      };

      return {
        text: ['text', 'password', 'email', 'color', 'tel'].map(subtypeDefault),
        header: ['h1', 'h2', 'h3'].map(subtypeDefault),
        button: ['button', 'submit', 'reset'].map(subtypeDefault),
        paragraph: ['p', 'address', 'blockquote', 'canvas', 'output'].map(subtypeDefault)
      };
    }();

    var opts = Object.assign({}, defaults, options);
    var frmbID = 'frmb-' + $('ul[id^=frmb-]').length++;

    if (options.messages) {
      opts.messages = Object.assign({}, defaults.messages, options.messages);
    }

    formBuilder.formID = frmbID;

    var $sortableFields = $('<ul/>').attr('id', frmbID).addClass('frmb');
    var _helpers = require('./helpers.js')(opts, formBuilder);

    formBuilder.layout = _helpers.editorLayout(opts.controlPosition);
    formBuilder.stage = $sortableFields[0];

    var lastID = frmbID + '-fld-1';
    var boxID = frmbID + '-control-box';

    // create array of field objects to cycle through
    var frmbFields = [{
      label: opts.messages.autocomplete,
      attrs: {
        type: 'autocomplete',
        className: 'autocomplete',
        name: 'autocomplete'
      }
    }, {
      label: opts.messages.button,
      attrs: {
        type: 'button',
        className: 'button-input',
        name: 'button'
      }
    }, {
      label: opts.messages.checkbox,
      attrs: {
        type: 'checkbox',
        className: 'checkbox',
        name: 'checkbox'
      }
    }, {
      label: opts.messages.checkboxGroup,
      attrs: {
        type: 'checkbox-group',
        className: 'checkbox-group',
        name: 'checkbox-group'
      }
    }, {
      label: opts.messages.dateField,
      attrs: {
        type: 'date',
        className: 'calendar',
        name: 'date-input'
      }
    }, {
      label: opts.messages.fileUpload,
      attrs: {
        type: 'file',
        className: 'file-input',
        name: 'file-input'
      }
    }, {
      label: opts.messages.header,
      attrs: {
        type: 'header',
        className: 'header'
      }
    }, {
      label: opts.messages.hidden,
      attrs: {
        type: 'hidden',
        className: 'hidden-input',
        name: 'hidden-input'
      }
    }, {
      label: opts.messages.number,
      attrs: {
        type: 'number',
        className: 'number',
        name: 'number'
      }
    }, {
      label: opts.messages.paragraph,
      attrs: {
        type: 'paragraph',
        className: 'paragraph'
      }
    }, {
      label: opts.messages.radioGroup,
      attrs: {
        type: 'radio-group',
        className: 'radio-group',
        name: 'radio-group'
      }
    }, {
      label: opts.messages.select,
      attrs: {
        type: 'select',
        className: 'select',
        name: 'select'
      }
    }, {
      label: opts.messages.text,
      attrs: {
        type: 'text',
        className: 'text-input',
        name: 'text-input'
      }
    }, {
      label: opts.messages.textArea,
      attrs: {
        type: 'textarea',
        className: 'text-area',
        name: 'textarea'
      }
    }];

    frmbFields = _helpers.orderFields(frmbFields);

    if (opts.disableFields) {
      // remove disabledFields
      frmbFields = frmbFields.filter(function (field) {
        return !utils.inArray(field.attrs.type, opts.disableFields);
      });
    }

    // Create draggable fields for formBuilder
    var cbUl = utils.markup('ul', null, { id: boxID, className: 'frmb-control' });
    formBuilder.controls = cbUl;

    if (opts.sortableControls) {
      cbUl.classList.add('sort-enabled');
    }

    var $cbUL = $(cbUl);

    // Loop through
    utils.forEach(frmbFields, function (i) {
      var $field = $('<li/>', {
        'class': 'icon-' + frmbFields[i].attrs.className,
        'type': frmbFields[i].type,
        'name': frmbFields[i].className,
        'label': frmbFields[i].label
      });

      $field.data('newFieldData', frmbFields[i]);

      var typeLabel = utils.markup('span', frmbFields[i].label);
      $field.html(typeLabel).appendTo($cbUL);
    });

    if (opts.inputSets.length) {
      $('<li/>', { 'class': 'fb-separator' }).html('<hr>').appendTo($cbUL);
      opts.inputSets.forEach(function (set) {
        set.name = set.name || _helpers.makeClassName(set.label);
        var $set = $('<li/>', { 'class': 'input-set-control', type: set.name });
        $set.html(set.label).appendTo($cbUL);
      });
    }

    // Sortable fields
    $sortableFields.sortable({
      cursor: 'move',
      opacity: 0.9,
      revert: 150,
      beforeStop: _helpers.beforeStop,
      start: _helpers.startMoving,
      stop: _helpers.stopMoving,
      cancel: 'input, select, .disabled, .form-group, .btn',
      placeholder: 'frmb-placeholder'
    });

    // ControlBox with different fields
    $cbUL.sortable({
      helper: 'clone',
      opacity: 0.9,
      connectWith: $sortableFields,
      cancel: '.fb-separator',
      cursor: 'move',
      scroll: false,
      placeholder: 'ui-state-highlight',
      start: _helpers.startMoving,
      stop: _helpers.stopMoving,
      revert: 150,
      beforeStop: _helpers.beforeStop,
      distance: 3,
      update: function update(event, ui) {
        if (_helpers.doCancel) {
          return false;
        }
        if (ui.item.parent()[0] === $sortableFields[0]) {
          processControl(ui.item);
          _helpers.doCancel = true;
        } else {
          _helpers.setFieldOrder($cbUL);
          _helpers.doCancel = !opts.sortableControls;
        }
      }
    });

    var processControl = function processControl(control) {
      if (control[0].classList.contains('input-set-control')) {
        var inputSet = opts.inputSets.filter(function (set) {
          return set.name === control[0].type;
        })[0];
        if (inputSet.showHeader) {
          var header = {
            type: 'header',
            subtype: 'h2',
            id: inputSet.name,
            label: inputSet.label
          };
          prepFieldVars(header, true);
        }
        inputSet.fields.forEach(function (field) {
          prepFieldVars(field, true);
        });
      } else {
        prepFieldVars(control, true);
      }
    };

    var $formWrap = $('<div/>', {
      id: frmbID + '-form-wrap',
      'class': 'form-wrap form-builder' + _helpers.mobileClass()
    });

    formBuilder.editor = $formWrap[0];

    var $stageWrap = $('<div/>', {
      id: frmbID + '-stage-wrap',
      'class': 'stage-wrap ' + formBuilder.layout.stage
    });

    var cbWrap = $('<div/>', {
      id: frmbID + '-cb-wrap',
      'class': 'cb-wrap ' + formBuilder.layout.controls
    }).append($cbUL[0]);

    if (opts.showActionButtons) {
      // Build our headers and action links
      var viewDataText = void 0;
      if (opts.dataType === 'xml') {
        viewDataText = opts.messages.viewXML;
      } else {
        viewDataText = opts.messages.viewJSON;
      }
      var viewData = utils.markup('button', viewDataText, {
        id: frmbID + '-view-data',
        type: 'button',
        className: 'view-data btn btn-default'
      });
      var clearAll = utils.markup('button', opts.messages.clearAll, {
        id: frmbID + '-clear-all',
        type: 'button',
        className: 'clear-all btn btn-default'
      });
      var saveAll = utils.markup('button', opts.messages.save, {
        className: 'btn btn-primary ' + opts.prefix + 'save',
        id: frmbID + '-save',
        type: 'button'
      });
      var formActions = utils.markup('div', [clearAll, viewData, saveAll], {
        className: 'form-actions btn-group'
      });

      cbWrap.append(formActions);
    }

    $stageWrap.append($sortableFields, cbWrap);
    $stageWrap.before($formWrap);
    $formWrap.append($stageWrap, cbWrap);

    if (element.type !== 'textarea') {
      $(element).append($formWrap);
    } else {
      $(element).replaceWith($formWrap);
    }

    var saveAndUpdate = _helpers.debounce(function (evt) {
      if (evt) {
        if (evt.type === 'keyup' && evt.target.name === 'className') {
          return false;
        }

        var $field = $(evt.target).closest('.form-field');
        _helpers.updatePreview($field);
        _helpers.save();
      }
    });

    // Save field on change
    $sortableFields.on('change blur keyup', '.form-elements input, .form-elements select, .form-elements textarea', saveAndUpdate);

    $('li', $cbUL).click(function (evt) {
      var $control = $(evt.target).closest('.ui-sortable-handle');
      _helpers.stopIndex = undefined;
      processControl($control);
      _helpers.save();
    });

    // Add append and prepend options if necessary
    var nonEditableFields = function nonEditableFields() {
      var cancelArray = [];

      if (opts.prepend && !$('.disabled.prepend', $sortableFields).length) {
        var prependedField = utils.markup('li', opts.prepend, { className: 'disabled prepend' });
        cancelArray.push(true);
        $sortableFields.prepend(prependedField);
      }

      if (opts.append && !$('.disabled.append', $sortableFields).length) {
        var appendedField = utils.markup('li', opts.append, { className: 'disabled append' });
        cancelArray.push(true);
        $sortableFields.append(appendedField);
      }

      if (cancelArray.some(function (elem) {
        return elem === true;
      })) {
        $stageWrap.removeClass('empty');
      }
    };

    var prepFieldVars = function prepFieldVars($field) {
      var isNew = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

      var field = {};
      if ($field instanceof jQuery) {
        var fieldData = $field.data('newFieldData');
        if (fieldData) {
          field = fieldData.attrs;
          field.label = fieldData.label;
        } else {
          var attrs = $field[0].attributes;
          if (!isNew) {
            field.values = $field.children().map(function (index, elem) {
              return {
                label: $(elem).text(),
                value: $(elem).attr('value'),
                selected: Boolean($(elem).attr('selected'))
              };
            });
          }

          for (var i = attrs.length - 1; i >= 0; i--) {
            field[attrs[i].name] = attrs[i].value;
          }
        }
      } else {
        field = Object.assign({}, $field);
      }

      field.name = isNew ? nameAttr(field) : field.name || nameAttr(field);

      if (isNew && utils.inArray(field.type, ['text', 'number', 'file', 'select', 'textarea'])) {
        field.className = 'form-control'; // backwards compatibility
      } else {
        field.className = field.class || field.className; // backwards compatibility
      }

      var match = /(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(field.className);
      if (match) {
        field.style = match[1];
      }

      utils.escapeAttrs(field);

      appendNewField(field, isNew);
      if (isNew) {
        document.dispatchEvent(formBuilder.events.fieldAdded);
      }
      $stageWrap.removeClass('empty');
    };

    // Parse saved XML template data
    var loadFields = function loadFields() {
      var formData = formBuilder.formData;
      if (formData && formData.length) {
        for (var i = 0; i < formData.length; i++) {
          prepFieldVars(formData[i]);
        }
        $stageWrap.removeClass('empty');
      } else if (opts.defaultFields && opts.defaultFields.length) {
        // Load default fields if none are set
        opts.defaultFields.forEach(function (field) {
          return prepFieldVars(field);
        });
        $stageWrap.removeClass('empty');
      } else if (!opts.prepend && !opts.append) {
        $stageWrap.addClass('empty').attr('data-content', opts.messages.getStarted);
      }
      _helpers.save();

      var $fields = $('li.form-field:not(.disabled)', $sortableFields);

      $fields.each(function (i) {
        return _helpers.updatePreview($($fields[i]));
      });

      nonEditableFields();
    };

    // callback to track disabled tooltips
    $sortableFields.on('mousemove', 'li.disabled', function (e) {
      $('.frmb-tt', _this).css({
        left: e.offsetX - 16,
        top: e.offsetY - 34
      });
    });

    // callback to call disabled tooltips
    $sortableFields.on('mouseenter', 'li.disabled', function (e) {
      return _helpers.disabledTT.add($(_this));
    });

    // callback to call disabled tooltips
    $sortableFields.on('mouseleave', 'li.disabled', function (e) {
      return _helpers.disabledTT.remove($(_this));
    });

    var nameAttr = function nameAttr(field) {
      var epoch = new Date().getTime();
      return field.type + '-' + epoch;
    };

    /**
     * Add data for field with options [select, checkbox-group, radio-group]
     *
     * @todo   refactor this nasty ~crap~ code, its actually painful to look at
     * @param  {Object} values
     * @return {String} field options markup
     */
    var fieldOptions = function fieldOptions(values) {
      var optionActions = [utils.markup('a', opts.messages.addOption, { className: 'add add-opt' })];
      var fieldOptions = ['<label class="false-label">' + opts.messages.selectOptions + '</label>'];
      var isMultiple = values.multiple || values.type === 'checkbox-group';

      if (!values.values || !values.values.length) {
        values.values = [1, 2, 3].map(function (index) {
          var label = opts.messages.option + ' ' + index;
          var option = {
            selected: false,
            label: label,
            value: utils.hyphenCase(label)
          };
          return option;
        });
        values.values[0].selected = true;
      } else {
        // ensure option data is has all required keys
        values.values.forEach(function (option) {
          return Object.assign({}, { selected: false }, option);
        });
      }

      fieldOptions.push('<div class="sortable-options-wrap">');

      fieldOptions.push('<ol class="sortable-options">');
      utils.forEach(values.values, function (i) {
        fieldOptions.push(selectFieldOptions(values.name, values.values[i], isMultiple));
      });
      fieldOptions.push('</ol>');
      fieldOptions.push(utils.markup('div', optionActions, { className: 'option-actions' }).outerHTML);
      fieldOptions.push('</div>');

      return utils.markup('div', fieldOptions.join(''), { className: 'form-group field-options' }).outerHTML;
    };

    /**
     * Build the editable properties for the field
     * @param  {object} values configuration object for advanced fields
     * @return {String}        markup for advanced fields
     */
    var advFields = function advFields(values) {
      var advFields = [];
      var key = void 0;
      var optionFields = ['select', 'checkbox-group', 'radio-group'];
      var isOptionField = function () {
        return optionFields.indexOf(values.type) !== -1;
      }();
      var valueField = !utils.inArray(values.type, ['header', 'paragraph', 'file'].concat(optionFields));
      var roles = values.role !== undefined ? values.role.split(',') : [];

      advFields.push(requiredField(values));

      if (values.type === 'checkbox') {
        advFields.push(boolAttribute('toggle', values, { first: opts.messages.toggle }));
      }

      advFields.push(textAttribute('label', values));

      values.size = values.size || 'm';
      values.style = values.style || 'default';

      // Help Text / Description Field
      if (!utils.inArray(values.type, ['header', 'paragraph', 'button'])) {
        advFields.push(textAttribute('description', values));
      }

      if (opts.messages.subtypes[values.type]) {
        var optionData = opts.messages.subtypes[values.type];
        advFields.push(selectAttribute('subtype', values, optionData));
      }

      if (values.type === 'button') {
        advFields.push(btnStyles(values.style, values.type));
      }

      if (values.type === 'number') {
        advFields.push(numberAttribute('min', values));
        advFields.push(numberAttribute('max', values));
        advFields.push(numberAttribute('step', values));
      }

      // Placeholder
      advFields.push(textAttribute('placeholder', values));

      // TextArea Rows Attribute
      if (values.type === 'textarea') {
        advFields.push(numberAttribute('rows', values));
      }

      // Class
      advFields.push(textAttribute('className', values));

      advFields.push(textAttribute('name', values));

      if (valueField) {
        advFields.push(textAttribute('value', values));
      }

      if (values.type === 'file') {
        var labels = {
          first: opts.messages.multipleFiles,
          second: opts.messages.allowMultipleFiles
        };
        advFields.push(boolAttribute('multiple', values, labels));
      }

      var rolesDisplay = values.role !== undefined ? 'style="display:block"' : '';
      var availableRoles = ['<div class="available-roles" ' + rolesDisplay + '>'];
      for (key in opts.roles) {
        if (opts.roles.hasOwnProperty(key)) {
          var checked = utils.inArray(key, roles) ? 'checked' : '';
          var roleId = 'fld-' + lastID + '-roles-' + key;
          availableRoles.push('<input type="checkbox" name="roles[]" value="' + key + '" id="' + roleId + '" ' + checked + ' class="roles-field" /> <label for="' + roleId + '">' + opts.roles[key] + '</label><br/>');
        }
      }

      availableRoles.push('</div>');

      var accessLabels = { first: opts.messages.roles, second: opts.messages.limitRole, content: availableRoles.join('') };

      advFields.push(boolAttribute('access', values, accessLabels));

      if (values.type === 'checkbox-group' || values.type === 'radio-group') {
        advFields.push(boolAttribute('other', values, { first: opts.messages.enableOther, second: opts.messages.enableOtherMsg }));
      }

      if (values.type === 'select') {
        advFields.push(boolAttribute('multiple', values, { first: ' ', second: opts.messages.selectionsMessage }));
      }

      if (isOptionField) {
        advFields.push(fieldOptions(values));
      }

      if (utils.inArray(values.type, ['text', 'textarea'])) {
        advFields.push(numberAttribute('maxlength', values));
      }

      // Append custom attributes as defined in typeUserAttrs option
      if (opts.typeUserAttrs[values.type]) {
        advFields.push(processTypeUserAttrs(opts.typeUserAttrs[values.type], values));
      }

      return advFields.join('');
    };

    /**
     * Processes typeUserAttrs
     * @param  {Object} typeUserAttr option
     * @param  {Object} values       field attributes
     * @return {String}              markup for custom user attributes
     */
    function processTypeUserAttrs(typeUserAttr, values) {
      var advField = [];

      for (var attribute in typeUserAttr) {
        if (typeUserAttr.hasOwnProperty(attribute)) {
          var orig = opts.messages[attribute];
          var origValue = typeUserAttr[attribute].value;
          typeUserAttr[attribute].value = values[attribute] || typeUserAttr[attribute].value || '';

          if (typeUserAttr[attribute].label) {
            opts.messages[attribute] = typeUserAttr[attribute].label;
          }

          if (typeUserAttr[attribute].options) {
            advField.push(selectUserAttrs(attribute, typeUserAttr[attribute]));
          } else {
            advField.push(inputUserAttrs(attribute, typeUserAttr[attribute]));
          }

          opts.messages[attribute] = orig;
          typeUserAttr[attribute].value = origValue;
        }
      }

      return advField.join('');
    }

    /**
     * Text input value for attribute
     * @param  {String} name
     * @param  {Object} attrs also known as values
     * @return {String}       input markup
     */
    function inputUserAttrs(name, attrs) {
      var textAttrs = {
        id: name + '-' + lastID,
        title: attrs.description || attrs.label || name.toUpperCase(),
        name: name,
        type: attrs.type || 'text',
        className: ['fld-' + name]
      };
      var label = '<label for="' + textAttrs.id + '">' + opts.messages[name] + '</label>';

      if (!utils.inArray(textAttrs.type, ['checkbox', 'checkbox-group', 'radio-group'])) {
        textAttrs.className.push('form-control');
      }

      textAttrs = Object.assign({}, attrs, textAttrs);
      var textInput = '<input ' + utils.attrString(textAttrs) + '>';
      var inputWrap = '<div class="input-wrap">' + textInput + '</div>';
      return '<div class="form-group ' + name + '-wrap">' + label + inputWrap + '</div>';
    }

    /**
     * Select input for multiple choice user attributes
     * @todo  replace with selectAttr
     * @param  {String} name
     * @param  {Object} options
     * @return {String}         select markup
     */
    function selectUserAttrs(name, options) {
      var optis = Object.keys(options.options).map(function (val) {
        var attrs = { value: val };
        if (val === options.value) {
          attrs.selected = null;
        }
        return '<option ' + utils.attrString(attrs) + '>' + options.options[val] + '</option>';
      });
      var selectAttrs = {
        id: name + '-' + lastID,
        title: options.description || options.label || name.toUpperCase(),
        name: name,
        className: 'fld-' + name + ' form-control'
      };
      var label = '<label for="' + selectAttrs.id + '">' + opts.messages[name] + '</label>';

      Object.keys(options).filter(function (prop) {
        return !utils.inArray(prop, ['value', 'options', 'label']);
      }).forEach(function (attr) {
        selectAttrs[attr] = options[attr];
      });

      var select = '<select ' + utils.attrString(selectAttrs) + '>' + optis.join('') + '</select>';
      var inputWrap = '<div class="input-wrap">' + select + '</div>';
      return '<div class="form-group ' + name + '-wrap">' + label + inputWrap + '</div>';
    }

    var boolAttribute = function boolAttribute(name, values, labels) {
      if (opts.typeUserAttrs[values.type] && opts.typeUserAttrs[values.type][name]) {
        return;
      }

      var label = function label(txt) {
        return '<label for="' + name + '-' + lastID + '">' + txt + '</label>';
      };
      var checked = values[name] !== undefined ? 'checked' : '';
      var input = '<input type="checkbox" class="fld-' + name + '" name="' + name + '" value="true" ' + checked + ' id="' + name + '-' + lastID + '"/> ';
      var left = [];
      var right = [input];

      if (labels.first) {
        left.unshift(label(labels.first));
      }

      if (labels.second) {
        right.push(label(labels.second));
      }

      if (labels.content) {
        right.push(labels.content);
      }

      right.unshift('<div class="input-wrap">');
      right.push('</div>');

      return '<div class="form-group ' + name + '-wrap">' + left.concat(right).join('') + '</div>';
    };

    var btnStyles = function btnStyles(style, type) {
      var tags = {
        button: 'btn'
      };
      var styles = opts.messages.styles[tags[type]];
      var styleField = '';

      if (styles) {
        var styleLabel = '<label>' + opts.messages.style + '</label>';
        styleField += '<input value="' + style + '" name="style" type="hidden" class="btn-style">';
        styleField += '<div class="btn-group" role="group">';

        Object.keys(opts.messages.styles[tags[type]]).forEach(function (element) {
          var active = style === element ? 'active' : '';
          styleField += '<button value="' + element + '" type="' + type + '" class="' + active + ' btn-xs ' + tags[type] + ' ' + tags[type] + '-' + element + '">' + opts.messages.styles[tags[type]][element] + '</button>';
        });

        styleField += '</div>';

        styleField = '<div class="form-group style-wrap">' + styleLabel + ' ' + styleField + '</div>';
      }

      return styleField;
    };

    /**
     * Add a number attribute to a field.
     * @param  {String} attribute
     * @param  {Object} values
     * @return {String} markup for number attribute
     */
    var numberAttribute = function numberAttribute(attribute, values) {
      if (opts.typeUserAttrs[values.type] && opts.typeUserAttrs[values.type][attribute]) {
        return;
      }

      var attrVal = values[attribute];
      var attrLabel = opts.messages[attribute] || attribute;
      var placeholder = opts.messages.placeholders[attribute];
      var inputConfig = {
        type: 'number',
        value: attrVal,
        name: attribute,
        min: '0',
        placeholder: placeholder,
        className: 'fld-' + attribute + ' form-control',
        id: attribute + '-' + lastID
      };
      var numberAttribute = '<input ' + utils.attrString(utils.trimObj(inputConfig)) + '>';
      var inputWrap = '<div class="input-wrap">' + numberAttribute + '</div>';

      return '<div class="form-group ' + attribute + '-wrap"><label for="' + inputConfig.id + '">' + attrLabel + '</label> ' + inputWrap + '</div>';
    };

    /**
     * selectAttribute
     * @param  {String} attribute  attribute name
     * @param  {Object} values     aka attrs
     * @param  {Array} optionData  select field option data
     * @return {String}            select input makrup
     */
    var selectAttribute = function selectAttribute(attribute, values, optionData) {
      if (opts.typeUserAttrs[values.type] && opts.typeUserAttrs[values.type][attribute]) {
        return;
      }
      var selectOptions = optionData.map(function (option, i) {
        var optionAttrs = Object.assign({
          label: opts.messages.option + ' ' + i,
          value: undefined
        }, option);
        if (option.value === values[attribute]) {
          optionAttrs.selected = true;
        }
        return '<option ' + utils.attrString(utils.trimObj(optionAttrs)) + '>' + optionAttrs.label + '</option>';
      });
      var selectAttrs = {
        id: attribute + '-' + lastID,
        name: attribute,
        className: 'fld-' + attribute + ' form-control'
      };
      var label = '<label for="' + selectAttrs.id + '">' + (opts.messages[attribute] || utils.capitalize(attribute)) + '</label>';
      var select = '<select ' + utils.attrString(selectAttrs) + '>' + selectOptions.join('') + '</select>';
      var inputWrap = '<div class="input-wrap">' + select + '</div>';

      return '<div class="form-group ' + selectAttrs.name + '-wrap">' + label + inputWrap + '</div>';
    };

    /**
     * Generate some text inputs for field attributes, **will be replaced**
     * @param  {String} attribute
     * @param  {Object} values
     * @return {String}
     */
    var textAttribute = function textAttribute(attribute, values) {
      if (opts.typeUserAttrs[values.type] && opts.typeUserAttrs[values.type][attribute]) {
        return;
      }

      var placeholderFields = ['text', 'textarea', 'select'];

      var noName = ['header'];

      var textArea = ['paragraph'];

      var attrVal = values[attribute] || '';
      var attrLabel = opts.messages[attribute];
      if (attribute === 'label' && utils.inArray(values.type, textArea)) {
        attrLabel = opts.messages.content;
      }

      noName = noName.concat(opts.messages.subtypes.header, textArea);

      var placeholders = opts.messages.placeholders;
      var placeholder = placeholders[attribute] || '';
      var attributefield = '';
      var noMakeAttr = [];

      // Field has placeholder attribute
      if (attribute === 'placeholder' && !utils.inArray(values.type, placeholderFields)) {
        noMakeAttr.push(true);
      }

      // Field has name attribute
      if (attribute === 'name' && utils.inArray(values.type, noName)) {
        noMakeAttr.push(true);
      }

      if (!noMakeAttr.some(function (elem) {
        return elem === true;
      })) {
        var inputConfig = {
          name: attribute,
          placeholder: placeholder,
          className: 'fld-' + attribute + ' form-control',
          id: attribute + '-' + lastID
        };
        var attributeLabel = '<label for="' + inputConfig.id + '">' + attrLabel + '</label>';

        if (attribute === 'label' && utils.inArray(values.type, textArea) || attribute === 'value' && values.type === 'textarea') {
          attributefield += '<textarea ' + utils.attrString(inputConfig) + '>' + attrVal + '</textarea>';
        } else {
          inputConfig.value = attrVal;
          inputConfig.type = 'text';
          attributefield += '<input ' + utils.attrString(inputConfig) + '>';
        }

        var inputWrap = '<div class="input-wrap">' + attributefield + '</div>';

        attributefield = '<div class="form-group ' + attribute + '-wrap">' + attributeLabel + ' ' + inputWrap + '</div>';
      }

      return attributefield;
    };

    var requiredField = function requiredField(values) {
      var noRequire = ['header', 'paragraph', 'button'];
      var noMake = [];
      var requireField = '';

      if (utils.inArray(values.type, noRequire)) {
        noMake.push(true);
      }
      if (!noMake.some(function (elem) {
        return elem === true;
      })) {
        requireField = boolAttribute('required', values, { first: opts.messages.required });
      }

      return requireField;
    };

    // Append the new field to the editor
    var appendNewField = function appendNewField(values) {
      var isNew = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

      var m = utils.markup;
      var type = values.type || 'text';
      var label = values.label || opts.messages[type] || opts.messages.label;
      var delBtn = m('a', opts.messages.remove, {
        id: 'del_' + lastID,
        className: 'del-button btn delete-confirm',
        title: opts.messages.removeMessage
      });
      var toggleBtn = m('a', null, {
        id: lastID + '-edit',
        className: 'toggle-form btn icon-pencil',
        title: opts.messages.hide
      });
      var copyBtn = m('a', opts.messages.copyButton, {
        id: lastID + '-copy',
        className: 'copy-button btn icon-copy',
        title: opts.messages.copyButtonTooltip
      });

      var liContents = m('div', [toggleBtn, copyBtn, delBtn], { className: 'field-actions' }).outerHTML;

      // Field preview Label
      liContents += '<label class="field-label">' + label + '</label>';

      if (values.description) {
        var attrs = {
          className: 'tooltip-element',
          tooltip: values.description
        };
        liContents += '<span ' + utils.attrsString(attrs) + '>?</span>';
      }

      var requiredDisplay = values.required ? 'style="display:inline"' : '';
      liContents += '<span class="required-asterisk" ' + requiredDisplay + '> *</span>';

      liContents += m('div', '', { className: 'prev-holder' }).outerHTML;
      liContents += '<div id="' + lastID + '-holder" class="frm-holder">';
      liContents += '<div class="form-elements">';

      liContents += advFields(values);
      liContents += m('a', opts.messages.close, { className: 'close-field' }).outerHTML;

      liContents += '</div>';
      liContents += '</div>';

      var field = m('li', liContents, {
        'class': type + '-field form-field',
        'type': type,
        id: lastID
      });
      var $li = $(field);

      $li.data('fieldData', { attrs: values });

      if (typeof _helpers.stopIndex !== 'undefined') {
        $('> li', $sortableFields).eq(_helpers.stopIndex).before($li);
      } else {
        $sortableFields.append($li);
      }

      $('.sortable-options', $li).sortable({ update: function update() {
          return _helpers.updatePreview($li);
        } });

      _helpers.updatePreview($li);

      if (opts.typeUserEvents[type] && opts.typeUserEvents[type].onadd) {
        opts.typeUserEvents[type].onadd(field);
      }

      if (opts.editOnAdd && isNew) {
        _helpers.closeAllEdit();
        _helpers.toggleEdit(lastID, false);
      }

      lastID = _helpers.incrementId(lastID);
    };

    // Select field html, since there may be multiple
    var selectFieldOptions = function selectFieldOptions(name, optionData, multipleSelect) {
      var optionInputType = {
        selected: multipleSelect ? 'checkbox' : 'radio'
      };
      var optionDataOrder = ['value', 'label', 'selected'];
      var optionInputs = [];
      var optionTemplate = { selected: false, label: '', value: '' };

      optionData = Object.assign(optionTemplate, optionData);

      for (var i = optionDataOrder.length - 1; i >= 0; i--) {
        var prop = optionDataOrder[i];
        if (optionData.hasOwnProperty(prop)) {
          var attrs = {
            type: optionInputType[prop] || 'text',
            'class': 'option-' + prop,
            value: optionData[prop],
            name: name + '-option'
          };

          if (opts.messages.placeholders[prop]) {
            attrs.placeholder = opts.messages.placeholders[prop];
          }

          if (prop === 'selected' && optionData.selected === true) {
            attrs.checked = optionData.selected;
          }

          optionInputs.push(utils.markup('input', null, attrs));
        }
      }

      var removeAttrs = {
        className: 'remove btn',
        title: opts.messages.removeMessage
      };
      optionInputs.push(utils.markup('a', opts.messages.remove, removeAttrs));

      var field = utils.markup('li', optionInputs);

      return field.outerHTML;
    };

    var cloneItem = function cloneItem(currentItem) {
      var currentId = currentItem.attr('id');
      var type = currentItem.attr('type');
      var ts = new Date().getTime();
      var cloneName = type + '-' + ts;
      var $clone = currentItem.clone();

      $clone.find('[id]').each(function () {
        this.id = this.id.replace(currentId, lastID);
      });

      $clone.find('[for]').each(function () {
        this.setAttribute('for', this.getAttribute('for').replace(currentId, lastID));
      });

      $clone.each(function () {
        $('e:not(.form-elements)').each(function () {
          var newName = this.getAttribute('name');
          newName = newName.substring(0, newName.lastIndexOf('-') + 1);
          newName = newName + ts.toString();
          this.setAttribute('name', newName);
        });
      });

      $clone.find('.form-elements').find(':input').each(function () {
        if (this.getAttribute('name') === 'name') {
          var newVal = this.getAttribute('value');
          newVal = newVal.substring(0, newVal.lastIndexOf('-') + 1);
          newVal = newVal + ts.toString();
          this.setAttribute('value', newVal);
        }
      });

      $clone.attr('id', lastID);
      $clone.attr('name', cloneName);
      $clone.addClass('cloned');
      $('.sortable-options', $clone).sortable();

      if (opts.typeUserEvents[type] && opts.typeUserEvents[type].onclone) {
        opts.typeUserEvents[type].onclone($clone[0]);
      }

      lastID = _helpers.incrementId(lastID);
      return $clone;
    };

    // ---------------------- UTILITIES ---------------------- //

    // delete options
    $sortableFields.on('click touchstart', '.remove', function (e) {
      var $field = $(this).parents('.form-field:eq(0)');
      e.preventDefault();
      var optionsCount = $(this).parents('.sortable-options:eq(0)').children('li').length;
      if (optionsCount <= 2) {
        opts.notify.error('Error: ' + opts.messages.minOptionMessage);
      } else {
        $(this).parent('li').slideUp('250', function () {
          $(this).remove();
          _helpers.updatePreview($field);
          _helpers.save();
        });
      }
    });

    // touch focus
    $sortableFields.on('touchstart', 'input', function (e) {
      var $input = $(this);
      if (e.handled !== true) {
        if ($input.attr('type') === 'checkbox') {
          $input.trigger('click');
        } else {
          $input.focus();
          var fieldVal = $input.val();
          $input.val(fieldVal);
        }
      } else {
        return false;
      }
    });

    // toggle fields
    $sortableFields.on('click touchstart', '.toggle-form, .close-field', function (e) {
      e.stopPropagation();
      e.preventDefault();
      if (e.handled !== true) {
        var targetID = $(e.target).parents('.form-field:eq(0)').attr('id');
        _helpers.toggleEdit(targetID);
        e.handled = true;
      } else {
        return false;
      }
    });

    $sortableFields.on('change', '.prev-holder input, .prev-holder select', function (e) {
      if (e.target.classList.contains('other-option')) {
        return;
      }
      var field = $(e.target).closest('li.form-field')[0];
      if (utils.inArray(field.type, ['select', 'checkbox-group', 'radio-group'])) {
        field.querySelector('[class="option-value"][value="' + e.target.value + '"]').parentElement.childNodes[0].checked = true;
      } else {
        document.getElementById('value-' + field.id).value = e.target.value;
      }

      _helpers.save();
    });

    // update preview to label
    $sortableFields.on('keyup change', '[name="label"]', function (e) {
      $('.field-label', $(e.target).closest('li')).text($(e.target).val());
    });

    // remove error styling when users tries to correct mistake
    $sortableFields.delegate('input.error', 'keyup', function (e) {
      $(e.target).removeClass('error');
    });

    // update preview for description
    $sortableFields.on('keyup', 'input[name="description"]', function (e) {
      var $field = $(e.target).parents('.form-field:eq(0)');
      var closestToolTip = $('.tooltip-element', $field);
      var ttVal = $(e.target).val();
      if (ttVal !== '') {
        if (!closestToolTip.length) {
          var tt = '<span class="tooltip-element" tooltip="' + ttVal + '">?</span>';
          $('.field-label', $field).after(tt);
        } else {
          closestToolTip.attr('tooltip', ttVal).css('display', 'inline-block');
        }
      } else {
        if (closestToolTip.length) {
          closestToolTip.css('display', 'none');
        }
      }
    });

    $sortableFields.on('change', '.fld-multiple', function (e) {
      var newType = e.target.checked ? 'checkbox' : 'radio';

      $(e.target).parents('.form-elements:eq(0)').find('.sortable-options input.option-selected').each(function () {
        e.target.type = newType;
      });
    });

    // format name attribute
    $sortableFields.on('blur', 'input.fld-name', function (e) {
      e.target.value = _helpers.safename(e.target.value);
      if (e.target.value === '') {
        $(e.target).addClass('field-error').attr('placeholder', opts.messages.cannotBeEmpty);
      } else {
        $(e.target).removeClass('field-error');
      }
    });

    $sortableFields.on('blur', 'input.fld-maxlength', function (e) {
      e.target.value = _helpers.forceNumber(e.target.value);
    });

    // Copy field
    $sortableFields.on('click touchstart', '.icon-copy', function (e) {
      e.preventDefault();
      var currentItem = $(e.target).parent().parent('li');
      var $clone = cloneItem(currentItem);
      $clone.insertAfter(currentItem);
      _helpers.updatePreview($clone);
      _helpers.save();
    });

    // Delete field
    $sortableFields.on('click touchstart', '.delete-confirm', function (e) {
      e.preventDefault();

      var buttonPosition = e.target.getBoundingClientRect();
      var bodyRect = document.body.getBoundingClientRect();
      var coords = {
        pageX: buttonPosition.left + buttonPosition.width / 2,
        pageY: buttonPosition.top - bodyRect.top - 12
      };

      var deleteID = $(e.target).parents('.form-field:eq(0)').attr('id');
      var $field = $(document.getElementById(deleteID));

      document.addEventListener('modalClosed', function () {
        $field.removeClass('deleting');
      }, false);

      // Check if user is sure they want to remove the field
      if (opts.fieldRemoveWarn) {
        var warnH3 = utils.markup('h3', opts.messages.warning);
        var warnMessage = utils.markup('p', opts.messages.fieldRemoveWarning);
        _helpers.confirm([warnH3, warnMessage], function () {
          return _helpers.removeField(deleteID);
        }, coords);
        $field.addClass('deleting');
      } else {
        _helpers.removeField(deleteID);
      }
    });

    // Update button style selection
    $sortableFields.on('click', '.style-wrap button', function (e) {
      var $button = $(e.target);
      var styleVal = $button.val();
      var $btnStyle = $button.parent().prev('.btn-style');
      $btnStyle.val(styleVal);
      $button.siblings('.btn').removeClass('active');
      $button.addClass('active');
      _helpers.updatePreview($btnStyle.closest('.form-field'));
      _helpers.save();
    });

    // Attach a callback to toggle required asterisk
    $sortableFields.on('click', '.fld-required', function (e) {
      $(e.target).closest('.form-field').find('.required-asterisk').toggle();
    });

    // Attach a callback to toggle roles visibility
    $sortableFields.on('click', 'input.fld-access', function (e) {
      var roles = $(e.target).closest('.form-field').find('.available-roles');
      var enableRolesCB = $(e.target);
      roles.slideToggle(250, function () {
        if (!enableRolesCB.is(':checked')) {
          $('input[type="checkbox"]', roles).removeAttr('checked');
        }
      });
    });

    // Attach a callback to add new options
    $sortableFields.on('click', '.add-opt', function (e) {
      e.preventDefault();
      var $optionWrap = $(e.target).closest('.field-options');
      var $multiple = $('[name="multiple"]', $optionWrap);
      var $firstOption = $('.option-selected:eq(0)', $optionWrap);
      var isMultiple = false;

      if ($multiple.length) {
        isMultiple = $multiple.prop('checked');
      } else {
        isMultiple = $firstOption.attr('type') === 'checkbox';
      }

      var name = $firstOption.attr('name');

      $('.sortable-options', $optionWrap).append(selectFieldOptions(name, false, isMultiple));
    });

    $sortableFields.on('mouseover mouseout', '.remove, .del-button', function (e) {
      return $(e.target).closest('.form-field').toggleClass('delete');
    });

    if (opts.showActionButtons) {
      // View XML
      var xmlButton = $(document.getElementById(frmbID + '-view-data'));
      xmlButton.click(function (e) {
        e.preventDefault();
        _helpers.showData();
      });

      // Clear all fields in form editor
      var clearButton = $(document.getElementById(frmbID + '-clear-all'));
      clearButton.click(function (e) {
        var fields = $('li.form-field');
        var buttonPosition = e.target.getBoundingClientRect();
        var bodyRect = document.body.getBoundingClientRect();
        var coords = {
          pageX: buttonPosition.left + buttonPosition.width / 2,
          pageY: buttonPosition.top - bodyRect.top - 12
        };

        if (fields.length) {
          _helpers.confirm(opts.messages.clearAllMessage, function () {
            _helpers.removeAllfields();
            opts.notify.success(opts.messages.allFieldsRemoved);
            _helpers.save();
          }, coords);
        } else {
          _helpers.dialog('There are no fields to clear', coords);
        }
      });

      // Save Idea Template
      $(document.getElementById(frmbID + '-save')).click(function (e) {
        e.preventDefault();
        _helpers.save();
      });
    }

    _helpers.getData();
    loadFields();

    $sortableFields.css('min-height', $cbUL.height());

    // If option set, controls will remain in view in editor
    if (opts.stickyControls) {
      _helpers.stickyControls($sortableFields);
    }

    document.dispatchEvent(formBuilder.events.loaded);

    // Make actions accessible
    formBuilder.actions = {
      clearFields: _helpers.removeAllfields,
      showData: _helpers.showData,
      save: _helpers.save,
      addField: function addField(field, index) {
        _helpers.stopIndex = formBuilder.stage.children.length ? index : undefined;
        prepFieldVars(field);
        document.dispatchEvent(formBuilder.events.fieldAdded);
      },
      removeField: _helpers.removeField,
      getData: function getData() {
        var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'js';

        var stage = formBuilder.stage;
        var h = _helpers;
        var data = {
          js: function js() {
            return h.prepData(stage);
          },
          xml: function xml() {
            return h.xmlSave(stage);
          },
          json: function json() {
            return window.JSON.stringify(h.prepData(stage), null, '\t');
          }
        };

        return data[type]();
      },
      setData: function setData(formData) {
        _helpers.removeAllfields();
        _helpers.getData(formData);
        loadFields();
      }
    };

    return formBuilder;
  };

  $.fn.formBuilder = function (options) {
    if (!options) {
      options = {};
    }
    var elems = this;
    return elems.each(function (i) {
      var formBuilder = new FormBuilder(options, elems[i]);
      $(elems[i]).data('formBuilder', formBuilder);

      return formBuilder;
    });
  };
})(jQuery);

},{"./helpers.js":3,"./kc-toggle.js":4,"./polyfills.js":5,"./utils.js":6}],3:[function(require,module,exports){
'use strict';

/**
 * Helper functions specific to formBuilder.
 * Called form formBuilder
 * @param  {Object}   opts
 * @param  {Instance} formBuilder
 * @return {Object} helper functions
 */
function helpers(opts, formBuilder) {
  var _helpers = {
    doCancel: false
  };

  var utils = require('./utils.js');
  formBuilder.events = require('./events.js');

  /**
   * Convert converts messy `cl#ssNames` into valid `class-names`
   *
   * @param  {String} str
   * @return {String} hyphenated string
   */
  _helpers.makeClassName = function (str) {
    str = str.replace(/[^\w\s\-]/gi, '');
    return utils.hyphenCase(str);
  };

  /**
   * Add a mobile class
   * @todo find css only solution
   * @return {String} Mobile class added to formBuilder
   */
  _helpers.mobileClass = function () {
    var mobileClass = '';
    (function (a) {
      if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4))) {
        mobileClass = ' fb-mobile';
      }
    })(navigator.userAgent || navigator.vendor || window.opera);
    return mobileClass;
  };

  /**
   * Callback for when a drag begins
   *
   * @param  {Object} event
   * @param  {Object} ui
   */
  _helpers.startMoving = function (event, ui) {
    ui.item.show().addClass('moving');
    _helpers.startIndex = $('li', this).index(ui.item);
  };

  /**
   * Callback for when a drag ends
   *
   * @param  {Object} event
   * @param  {Object} ui
   */
  _helpers.stopMoving = function (event, ui) {
    ui.item.removeClass('moving');
    if (_helpers.doCancel) {
      $(ui.sender).sortable('cancel');
      $(this).sortable('cancel');
    }
    _helpers.save();
    _helpers.doCancel = false;
  };

  /**
   * jQuery UI sortable beforeStop callback used for both lists.
   * Logic for canceling the sort or drop.
   * @param  {Object} event
   * @param  {Object} ui
   * @return {void}
   */
  _helpers.beforeStop = function (event, ui) {
    var form = document.getElementById(formBuilder.formID);
    var lastIndex = form.children.length - 1;
    var cancelArray = [];
    _helpers.stopIndex = ui.placeholder.index() - 1;

    if (!opts.sortableControls && ui.item.parent().hasClass('frmb-control')) {
      cancelArray.push(true);
    }

    if (opts.prepend) {
      cancelArray.push(_helpers.stopIndex === 0);
    }

    if (opts.append) {
      cancelArray.push(_helpers.stopIndex + 1 === lastIndex);
    }

    _helpers.doCancel = cancelArray.some(function (elem) {
      return elem === true;
    });
  };

  /**
   * Make strings safe to be used as classes
   *
   * @param  {String} str string to be converted
   * @return {String}     converter string
   */
  _helpers.safename = function (str) {
    return str.replace(/\s/g, '-').replace(/[^a-zA-Z0-9\-]/g, '').toLowerCase();
  };

  /**
   * Strips non-numbers from a number only input
   *
   * @param  {string} str string with possible number
   * @return {string}     string without numbers
   */
  _helpers.forceNumber = function (str) {
    return str.replace(/[^0-9]/g, '');
  };

  /**
   * hide and show mouse tracking tooltips, only used for disabled
   * fields in the editor.
   *
   * @todo   remove or refactor to make better use
   * @param  {Object} tt jQuery option with nexted tooltip
   * @return {void}
   */
  _helpers.initTooltip = function (tt) {
    var tooltip = tt.find('.tooltip');
    tt.mouseenter(function () {
      if (tooltip.outerWidth() > 200) {
        tooltip.addClass('max-width');
      }
      tooltip.css('left', tt.width() + 14);
      tooltip.stop(true, true).fadeIn('fast');
    }).mouseleave(function () {
      tt.find('.tooltip').stop(true, true).fadeOut('fast');
    });
    tooltip.hide();
  };

  /**
   * Attempts to get element type and subtype
   *
   * @param  {Object} $field
   * @return {Object} {type: 'fieldType', subtype: 'fieldSubType'}
   */
  _helpers.getTypes = function ($field) {
    var types = {
      type: $field.attr('type')
    };
    var subtype = $('.fld-subtype', $field).val();

    if (subtype !== types.type) {
      types.subtype = subtype;
    }

    return types;
  };

  /**
   * Get option data for a field
   * @param  {Object} field jQuery field object
   * @return {Array}        Array of option values
   */
  _helpers.fieldOptionData = function (field) {
    var options = [];

    $('.sortable-options li', field).each(function () {
      var $option = $(this);
      var selected = $('.option-selected', $option).is(':checked');
      var attrs = {
        label: $('.option-label', $option).val(),
        value: $('.option-value', $option).val()
      };

      if (selected) {
        attrs.selected = selected;
      }

      options.push(attrs);
    });

    return options;
  };

  /**
   * XML save
   *
   * @param  {Object} form sortableFields node
   * @return {String} xml in string
   */
  _helpers.xmlSave = function (form) {
    var m = utils.markup;
    var formData = _helpers.prepData(form);
    var xml = ['<form-template>\n\t<fields>'];

    utils.forEach(formData, function (fieldIndex, field) {
      var fieldContent = null;

      // Handle options
      if (field.type.match(/(select|checkbox-group|radio-group)/)) {
        var optionData = field.values;
        var options = [];

        for (var i = 0; i < optionData.length; i++) {
          var option = m('option', optionData[i].label, optionData[i]).outerHTML;
          options.push('\n\t\t\t' + option);
        }
        options.push('\n\t\t');

        fieldContent = options.join('');
        delete field.values;
      }

      var xmlField = m('field', fieldContent, field);
      xml.push('\n\t\t' + xmlField.outerHTML);
    });

    xml.push('\n\t</fields>\n</form-template>');

    return xml.join('');
  };

  _helpers.prepData = function (form) {
    var formData = [];

    if (form.childNodes.length !== 0) {
      // build data object
      utils.forEach(form.childNodes, function (index, field) {
        var $field = $(field);

        if (!$field.hasClass('disabled')) {
          (function () {
            var fieldData = _helpers.getTypes($field);
            var roleVals = $('.roles-field:checked', field).map(function () {
              return this.value;
            }).get();

            $('[class*="fld-"]', field).each(function () {
              var attr = this;
              var name = utils.camelCase(attr.name);
              fieldData[name] = attr.type === 'checkbox' ? attr.checked : attr.value;
            });

            if (roleVals.length) {
              fieldData.role = roleVals.join(',');
            }

            fieldData.className = fieldData.className || fieldData.class;

            var match = /(?:^|\s)btn-(.*?)(?:\s|$)/g.exec(fieldData.className);
            if (match) {
              fieldData.style = match[1];
            }

            fieldData = utils.trimObj(fieldData);
            fieldData = utils.escapeAttrs(fieldData);

            var multipleField = fieldData.type.match(/(select|checkbox-group|radio-group)/);

            if (multipleField) {
              fieldData.values = _helpers.fieldOptionData($field);
            }

            formData.push(fieldData);
          })();
        }
      });
    }

    return formData;
  };

  _helpers.jsonSave = function (form) {
    return window.JSON.stringify(_helpers.prepData(form), null, '\t');
  };

  _helpers.getData = function (formData) {
    var data = formData || opts.formData;

    if (!data) {
      return false;
    }

    var setData = {
      xml: function xml(formData) {
        return utils.parseXML(formData);
      },
      json: function json(formData) {
        return window.JSON.parse(formData);
      }
    };

    formBuilder.formData = setData[opts.dataType](data) || [];

    return formBuilder.formData;
  };

  /**
   * Saves and returns formData
   * @return {XML|JSON} formData
   */
  _helpers.save = function () {
    var form = document.getElementById(formBuilder.formID);

    var doSave = {
      xml: _helpers.xmlSave,
      json: _helpers.jsonSave
    };

    // save action for current `dataType`
    formBuilder.formData = doSave[opts.dataType](form);

    // trigger formSaved event
    document.dispatchEvent(formBuilder.events.formSaved);
    return formBuilder.formData;
  };

  /**
   * increments the field ids with support for multiple editors
   * @param  {String} id field ID
   * @return {String}    incremented field ID
   */
  _helpers.incrementId = function (id) {
    var split = id.lastIndexOf('-');
    var newFieldNumber = parseInt(id.substring(split + 1)) + 1;
    var baseString = id.substring(0, split);

    return baseString + '-' + newFieldNumber;
  };

  /**
   * Collect field attribute values and call fieldPreview to generate preview
   * @param  {Object} field DOM element
   */
  _helpers.updatePreview = function (field) {
    var fieldClass = field.attr('class');
    if (fieldClass.indexOf('ui-sortable-handle') !== -1) {
      return;
    }

    var fieldType = $(field).attr('type');
    var $prevHolder = $('.prev-holder', field);
    var previewData = {
      type: fieldType
    };
    var preview = void 0;

    $('[class*="fld-"]', field).each(function () {
      var name = utils.camelCase(this.name);
      previewData[name] = this.type === 'checkbox' ? this.checked : this.value;
    });

    var style = $('.btn-style', field).val();
    if (style) {
      previewData.style = style;
    }

    if (fieldType.match(/(select|checkbox-group|radio-group)/)) {
      previewData.values = [];
      previewData.multiple = $('[name="multiple"]', field).is(':checked');

      $('.sortable-options li', field).each(function () {
        var option = {};
        option.selected = $('.option-selected', this).is(':checked');
        option.value = $('.option-value', this).val();
        option.label = $('.option-label', this).val();
        previewData.values.push(option);
      });
    }

    previewData = utils.trimObj(previewData);

    previewData.className = _helpers.classNames(field, previewData);
    $('.fld-className', field).val(previewData.className);

    field.data('fieldData', previewData);
    preview = utils.fieldRender(previewData, opts, true);

    $prevHolder.html(preview);

    $('input[toggle]', $prevHolder).kcToggle();
  };

  _helpers.debounce = function (func) {
    var wait = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 250;
    var immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

    var timeout = void 0;
    return function () {
      var context = this;
      var args = arguments;
      var later = function later() {
        timeout = null;
        if (!immediate) {
          func.apply(context, args);
        }
      };
      var callNow = immediate && !timeout;
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
      if (callNow) {
        func.apply(context, args);
      }
    };
  };

  /**
   * Display a custom tooltip for disabled fields.
   *
   * @param  {Object} field
   */
  _helpers.disabledTT = {
    className: 'frmb-tt',
    add: function add(field) {
      var title = opts.messages.fieldNonEditable;

      if (title) {
        var tt = utils.markup('p', title, { className: _helpers.disabledTT.className });
        field.append(tt);
      }
    },
    remove: function remove(field) {
      $('.frmb-tt', field).remove();
    }
  };

  _helpers.classNames = function (field, previewData) {
    var i = void 0;
    var type = previewData.type;
    var style = previewData.style;
    var className = field[0].querySelector('.fld-className').value;
    var classes = className.split(' ');
    var types = {
      button: 'btn',
      submit: 'btn'
    };

    var primaryType = types[type];

    if (primaryType) {
      if (style) {
        for (i = 0; i < classes.length; i++) {
          var re = new RegExp('(?:^|s)' + primaryType + '-(.*?)(?:s|$)+', 'g');
          var match = classes[i].match(re);
          if (match) {
            classes.splice(i, 1);
          }
        }
        classes.push(primaryType + '-' + style);
      }
      classes.push(primaryType);
    }

    // reverse the array to put custom classes at end,
    // remove any duplicates, convert to string, remove whitespace
    return utils.unique(classes).join(' ').trim();
  };

  /**
   * Closes and open dialog
   *
   * @param  {Object} overlay Existing overlay if there is one
   * @param  {Object} dialog  Existing dialog
   */
  _helpers.closeConfirm = function (overlay, dialog) {
    if (!overlay) {
      overlay = document.getElementsByClassName('form-builder-overlay')[0];
    }
    if (!dialog) {
      dialog = document.getElementsByClassName('form-builder-dialog')[0];
    }
    overlay.classList.remove('visible');
    dialog.remove();
    overlay.remove();
    document.dispatchEvent(formBuilder.events.modalClosed);
  };

  /**
   * Returns the layout data based on controlPosition option
   * @param  {String} controlPosition 'left' or 'right'
   * @return {Object} layout object
   */
  _helpers.editorLayout = function (controlPosition) {
    var layoutMap = {
      left: {
        stage: 'pull-right',
        controls: 'pull-left'
      },
      right: {
        stage: 'pull-left',
        controls: 'pull-right'
      }
    };

    return layoutMap[controlPosition] ? layoutMap[controlPosition] : '';
  };

  /**
   * Adds overlay to the page. Used for modals.
   * @return {Object} DOM Object
   */
  _helpers.showOverlay = function () {
    var overlay = utils.markup('div', null, {
      className: 'form-builder-overlay'
    });
    document.body.appendChild(overlay);
    overlay.classList.add('visible');

    overlay.onclick = function () {
      _helpers.closeConfirm(overlay);
    };

    return overlay;
  };

  /**
   * Custom confirmation dialog
   *
   * @param  {Object}  message   Content to be displayed in the dialog
   * @param  {Func}  yesAction callback to fire if they confirm
   * @param  {Boolean} coords    location to put the dialog
   * @param  {String}  className Custom class to be added to the dialog
   * @return {Object}            Reference to the modal
   */
  _helpers.confirm = function (message, yesAction) {
    var coords = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    var className = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';

    var m = utils.markup;
    var overlay = _helpers.showOverlay();
    var yes = m('button', opts.messages.yes, {
      className: 'yes btn btn-success btn-sm'
    });
    var no = m('button', opts.messages.no, {
      className: 'no btn btn-danger btn-sm'
    });

    no.onclick = function () {
      _helpers.closeConfirm(overlay);
    };

    yes.onclick = function () {
      yesAction();
      _helpers.closeConfirm(overlay);
    };

    var btnWrap = m('div', [no, yes], { className: 'button-wrap' });

    className = 'form-builder-dialog ' + className;

    var miniModal = m('div', [message, btnWrap], { className: className });
    if (!coords) {
      coords = {
        pageX: Math.max(document.documentElement.clientWidth, window.innerWidth || 0) / 2,
        pageY: Math.max(document.documentElement.clientHeight, window.innerHeight || 0) / 2
      };
      miniModal.style.position = 'fixed';
    } else {
      miniModal.classList.add('positioned');
    }

    miniModal.style.left = coords.pageX + 'px';
    miniModal.style.top = coords.pageY + 'px';

    document.body.appendChild(miniModal);

    yes.focus();
    return miniModal;
  };

  /**
   * Popup dialog the does not require confirmation.
   * @param  {String|DOM|Array}  content
   * @param  {Boolean} coords    false if no coords are provided. Without coordinates
   *                             the popup will appear center screen.
   * @param  {String}  className classname to be added to the dialog
   * @return {Object}            dom
   */
  _helpers.dialog = function (content) {
    var coords = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var className = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';

    _helpers.showOverlay();

    className = 'form-builder-dialog ' + className;

    var miniModal = utils.markup('div', content, { className: className });
    if (!coords) {
      coords = {
        pageX: Math.max(document.documentElement.clientWidth, window.innerWidth || 0) / 2,
        pageY: Math.max(document.documentElement.clientHeight, window.innerHeight || 0) / 2
      };
      miniModal.style.position = 'fixed';
    } else {
      miniModal.classList.add('positioned');
    }

    miniModal.style.left = coords.pageX + 'px';
    miniModal.style.top = coords.pageY + 'px';

    document.body.appendChild(miniModal);

    document.dispatchEvent(formBuilder.events.modalOpened);

    if (className.indexOf('data-dialog') !== -1) {
      document.dispatchEvent(formBuilder.events.viewData);
    }

    return miniModal;
  };

  /**
   * Removes all fields from the form
   */
  _helpers.removeAllfields = function () {
    var form = document.getElementById(formBuilder.formID);
    var fields = form.querySelectorAll('li.form-field');
    var $fields = $(fields);
    var markEmptyArray = [];

    if (!fields.length) {
      return false;
    }

    if (opts.prepend) {
      markEmptyArray.push(true);
    }

    if (opts.append) {
      markEmptyArray.push(true);
    }

    if (!markEmptyArray.some(function (elem) {
      return elem === true;
    })) {
      form.parentElement.classList.add('empty');
      form.parentElement.dataset.content = opts.messages.getStarted;
    }

    form.classList.add('removing');

    var outerHeight = 0;
    $fields.each(function (i) {
      outerHeight += $($fields[i]).outerHeight() + 3;
    });

    fields[0].style.marginTop = -outerHeight + 'px';

    setTimeout(function () {
      $fields.remove();
      document.getElementById(formBuilder.formID).classList.remove('removing');
      _helpers.save();
    }, 400);
  };

  /**
   * If user re-orders the elements their order should be saved.
   *
   * @param {Object} $cbUL our list of elements
   */
  _helpers.setFieldOrder = function ($cbUL) {
    if (!opts.sortableControls) {
      return false;
    }
    var fieldOrder = {};
    $cbUL.children().each(function (index, element) {
      fieldOrder[index] = $(element).data('attrs').type;
    });
    if (window.sessionStorage) {
      window.sessionStorage.setItem('fieldOrder', window.JSON.stringify(fieldOrder));
    }
  };

  /**
   * Reorder the controls if the user has previously ordered them.
   *
   * @param  {Array} frmbFields
   * @return {Array} ordered fields
   */
  _helpers.orderFields = function (frmbFields) {
    var fieldOrder = false;
    var newOrderFields = [];

    if (window.sessionStorage) {
      if (opts.sortableControls) {
        fieldOrder = window.sessionStorage.getItem('fieldOrder');
      } else {
        window.sessionStorage.removeItem('fieldOrder');
      }
    }

    if (!fieldOrder) {
      var controlOrder = opts.controlOrder.concat(frmbFields.map(function (field) {
        return field.attrs.type;
      }));
      fieldOrder = utils.unique(controlOrder);
    } else {
      fieldOrder = window.JSON.parse(fieldOrder);
      fieldOrder = Object.keys(fieldOrder).map(function (i) {
        return fieldOrder[i];
      });
    }

    fieldOrder.forEach(function (fieldType) {
      var field = frmbFields.filter(function (field) {
        return field.attrs.type === fieldType;
      })[0];
      newOrderFields.push(field);
    });

    return newOrderFields.filter(Boolean);
  };

  /**
   * Close fields being editing
   * @param  {Object} stage
   */
  _helpers.closeAllEdit = function () {
    var fields = $('> li.editing', formBuilder.stage);
    var toggleBtns = $('.toggle-form', formBuilder.stage);
    var editPanels = $('.frm-holder', fields);

    toggleBtns.removeClass('open');
    fields.removeClass('editing');
    $('.prev-holder', fields).show();
    editPanels.hide();
  };

  /**
   * Toggles the edit mode for the given field
   * @param  {String} fieldId
   * @param  {Boolean} animate
   */
  _helpers.toggleEdit = function (fieldId) {
    var animate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

    var field = document.getElementById(fieldId);
    var toggleBtn = $('.toggle-form', field);
    var editPanel = $('.frm-holder', field);
    field.classList.toggle('editing');
    toggleBtn.toggleClass('open');
    if (animate) {
      $('.prev-holder', field).slideToggle(250);
      editPanel.slideToggle(250);
    } else {
      $('.prev-holder', field).toggle();
      editPanel.toggle();
    }
  };

  /**
   * Controls follow scroll to the bottom of the editor
   */
  _helpers.stickyControls = function () {
    var $cbWrap = $(formBuilder.controls).parent();
    var $stageWrap = $(formBuilder.stage).parent();
    var cbWidth = $cbWrap.width();
    var cbPosition = formBuilder.controls.getBoundingClientRect();

    $(window).scroll(function (evt) {
      var scrollTop = $(evt.target).scrollTop();

      if (scrollTop > $stageWrap.offset().top) {
        var cbStyle = {
          position: 'fixed',
          width: cbWidth,
          top: '5px',
          bottom: 'auto',
          right: 'auto',
          left: cbPosition.left
        };

        var cbOffset = $cbWrap.offset();
        var stageOffset = $stageWrap.offset();
        var cbBottom = cbOffset.top + $cbWrap.height();
        var stageBottom = stageOffset.top + $stageWrap.height();

        if (cbBottom > stageBottom && cbOffset.top !== stageOffset.top) {
          $cbWrap.css({
            position: 'absolute',
            top: 'auto',
            bottom: 0,
            right: 0,
            left: 'auto'
          });
        }

        if (cbBottom < stageBottom || cbBottom === stageBottom && cbOffset.top > scrollTop) {
          $cbWrap.css(cbStyle);
        }
      } else {
        formBuilder.controls.parentElement.removeAttribute('style');
      }
    });
  };

  /**
   * Open a dialog with the form's data
   */
  _helpers.showData = function () {
    var m = utils.markup;
    var data = utils.escapeHtml(formBuilder.formData);
    var code = m('code', data, { className: 'formData-' + opts.dataType });

    _helpers.dialog(m('pre', code), null, 'data-dialog');
  };

  /**
   * Remove a field from the stage
   * @param  {String}  fieldID ID of the field to be removed
   * @return {Boolean} fieldRemoved returns true if field is removed
   */
  _helpers.removeField = function (fieldID) {
    var fieldRemoved = false;
    var form = document.getElementById(formBuilder.formID);
    var fields = form.getElementsByClassName('form-field');

    if (!fields.length) {
      console.warn('No fields to remove');
      return false;
    }

    if (!fieldID) {
      var availableIds = [].slice.call(fields).map(function (field) {
        return field.id;
      });
      console.warn('fieldID required to use `removeField` action.');
      console.warn('Available IDs: ' + availableIds.join(', '));
    }

    var field = document.getElementById(fieldID);
    var $field = $(document.getElementById(fieldID));
    if (!field) {
      console.warn('Field not found');
      return false;
    }

    $field.slideUp(250, function () {
      $field.removeClass('deleting');
      $field.remove();
      fieldRemoved = true;
      _helpers.save();
      if (!form.childNodes.length) {
        var stageWrap = form.parentElement;
        stageWrap.classList.add('empty');
        stageWrap.dataset.content = opts.messages.getStarted;
      }
    });

    document.dispatchEvent(formBuilder.events.fieldRemoved);
    return fieldRemoved;
  };

  return _helpers;
}

module.exports = helpers;

},{"./events.js":1,"./utils.js":6}],4:[function(require,module,exports){
'use strict';

var kcToggle = function kcToggle() {
  var Toggle = function Toggle(element, options) {
    var defaults = {
      theme: 'fresh',
      messages: {
        off: 'Off',
        on: 'On'
      }
    };

    var opts = $.extend(defaults, options);
    var $kcToggle = $('<div class="kc-toggle"/>').insertAfter(element).append(element);

    $kcToggle.toggleClass('on', element.is(':checked'));

    var kctOn = '<div class="kct-on">' + opts.messages.on + '</div>';
    var kctOff = '<div class="kct-off">' + opts.messages.off + '</div>';
    var kctHandle = '<div class="kct-handle"></div>';
    var kctInner = '<div class="kct-inner">' + kctOn + kctHandle + kctOff + '</div>';

    $kcToggle.append(kctInner);

    $kcToggle.click(function (evt) {
      element.attr('checked', !element.attr('checked'));
      $kcToggle.toggleClass('on');
    });
  };

  jQuery.fn.kcToggle = function (options) {
    var toggle = this;
    return toggle.each(function (i) {
      var element = $(toggle[i]);
      if (element.data('kcToggle')) {
        return;
      }
      var kcToggle = new Toggle(element, options);
      element.data('kcToggle', kcToggle);
    });
  };
};

module.exports = kcToggle();

},{}],5:[function(require,module,exports){
'use strict';

/**
 * Polyfills for older browsers and added functionality
 * @return {void}
 */
function polyfills() {
  // Element.remove() polyfill
  if (!('remove' in Element.prototype)) {
    Element.prototype.remove = function () {
      if (this.parentNode) {
        this.parentNode.removeChild(this);
      }
    };
  }

  // Event polyfill
  if (typeof Event !== 'function') {
    (function () {
      window.Event = function (evt) {
        var event = document.createEvent('Event');
        event.initEvent(evt, true, true);
        return event;
      };
    })();
  }

  // Object.assign polyfill
  if (typeof Object.assign != 'function') {
    Object.assign = function (target) {
      'use strict';

      if (target == null) {
        throw new TypeError('Cannot convert undefined or null to object');
      }

      target = Object(target);
      for (var index = 1; index < arguments.length; index++) {
        var source = arguments[index];
        if (source != null) {
          for (var key in source) {
            if (Object.prototype.hasOwnProperty.call(source, key)) {
              target[key] = source[key];
            }
          }
        }
      }
      return target;
    };
  }
}

module.exports = polyfills();

},{}],6:[function(require,module,exports){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

/**
 * Cross file utilities for working with arrays,
 * sorting and other fun stuff
 * @return {Object} fbUtils
 */
// function utils() {
var fbUtils = {};

// cleaner syntax for testing indexOf element
fbUtils.inArray = function (needle, haystack) {
  return haystack.indexOf(needle) !== -1;
};

/**
 * Remove null or undefined values
 * @param  {Object} attrs {attrName: attrValue}
 * @return {Object}       Object trimmed of null or undefined values
 */
fbUtils.trimObj = function (attrs) {
  var xmlRemove = [null, undefined, '', false, 'false'];
  for (var attr in attrs) {
    if (fbUtils.inArray(attrs[attr], xmlRemove)) {
      delete attrs[attr];
    } else if (Array.isArray(attrs[attr])) {
      if (!attrs[attr].length) {
        delete attrs[attr];
      }
    }
  }

  return attrs;
};

/**
 * Test if attribute is a valid HTML attribute
 * @param  {String} attr
 * @return {Boolean}
 */
fbUtils.validAttr = function (attr) {
  var invalid = ['values', 'enableOther', 'other', 'label',
  // 'style',
  'subtype'];
  return !fbUtils.inArray(attr, invalid);
};

/**
 * Convert an attrs object into a string
 *
 * @param  {Object} attrs object of attributes for markup
 * @return {string}
 */
fbUtils.attrString = function (attrs) {
  var attributes = [];

  for (var attr in attrs) {
    if (attrs.hasOwnProperty(attr) && fbUtils.validAttr(attr)) {
      attr = fbUtils.safeAttr(attr, attrs[attr]);
      attributes.push(attr.name + attr.value);
    }
  }
  return attributes.join(' ');
};

/**
 * Convert attributes to markup safe strings
 * @param  {String} name  attribute name
 * @param  {String} value attribute value
 * @return {Object}       {attrName: attrValue}
 */
fbUtils.safeAttr = function (name, value) {
  name = fbUtils.safeAttrName(name);
  var valString = void 0;

  if (value) {
    if (Array.isArray(value)) {
      valString = fbUtils.escapeAttr(value.join(' '));
    } else {
      if (typeof value === 'boolean') {
        value = value.toString();
      }
      valString = fbUtils.escapeAttr(value.replace(',', ' ').trim());
    }
  }

  value = value ? '="' + valString + '"' : '';
  return {
    name: name,
    value: value
  };
};

fbUtils.safeAttrName = function (name) {
  var safeAttr = {
    className: 'class'
  };

  return safeAttr[name] || fbUtils.hyphenCase(name);
};

/**
 * Convert strings into lowercase-hyphen
 *
 * @param  {String} str
 * @return {String}
 */
fbUtils.hyphenCase = function (str) {
  str = str.replace(/[^\w\s\-]/gi, '');
  str = str.replace(/([A-Z])/g, function ($1) {
    return '-' + $1.toLowerCase();
  });

  return str.replace(/\s/g, '-').replace(/^-+/g, '');
};

/**
 * convert a hyphenated string to camelCase
 * @param  {String} str
 * @return {String}
 */
fbUtils.camelCase = function (str) {
  return str.replace(/-([a-z])/g, function (m, w) {
    return w.toUpperCase();
  });
};

/**
 * Generate markup wrapper where needed
 *
 * @param  {string}              tag
 * @param  {String|Array|Object} content we wrap this
 * @param  {Object}              attrs
 * @return {String}
 */
fbUtils.markup = function (tag) {
  var content = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
  var attrs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

  var contentType = void 0,
      field = document.createElement(tag),
      getContentType = function getContentType(content) {
    return Array.isArray(content) ? 'array' : typeof content === 'undefined' ? 'undefined' : _typeof(content);
  },
      appendContent = {
    string: function string(content) {
      field.innerHTML = content;
    },
    object: function object(content) {
      return field.appendChild(content);
    },
    array: function array(content) {
      for (var i = 0; i < content.length; i++) {
        contentType = getContentType(content[i]);
        appendContent[contentType](content[i]);
      }
    }
  };

  for (var attr in attrs) {
    if (attrs.hasOwnProperty(attr)) {
      var name = fbUtils.safeAttrName(attr);
      field.setAttribute(name, attrs[attr]);
    }
  }

  contentType = getContentType(content);

  if (content) {
    appendContent[contentType].call(this, content);
  }

  return field;
};

/**
 * Convert html element attributes to key/value object
 * @param  {Object} DOM element
 * @return {Object} ex: {attrName: attrValue}
 */
fbUtils.parseAttrs = function (elem) {
  var attrs = elem.attributes;
  var data = {};
  fbUtils.forEach(attrs, function (attr) {
    var attrVal = attrs[attr].value;
    if (attrVal.match(/false|true/g)) {
      attrVal = attrVal === 'true';
    } else if (attrVal.match(/undefined/g)) {
      attrVal = undefined;
    }

    if (attrVal) {
      data[attrs[attr].name] = attrVal;
    }
  });

  return data;
};

/**
 * Convert field options to optionData
 * @param  {Object} DOM element
 * @return {Array}      optionData array
 */
fbUtils.parseOptions = function (field) {
  var options = field.getElementsByTagName('option'),
      optionData = {},
      data = [];

  if (options.length) {
    for (var i = 0; i < options.length; i++) {
      optionData = fbUtils.parseAttrs(options[i]);
      optionData.label = options[i].textContent;
      data.push(optionData);
    }
  }

  return data;
};

/**
 * Parse XML formData
 * @param  {String} xmlString
 * @return {Array}            formData array
 */
fbUtils.parseXML = function (xmlString) {
  var parser = new window.DOMParser();
  var xml = parser.parseFromString(xmlString, 'text/xml'),
      formData = [];

  if (xml) {
    var fields = xml.getElementsByTagName('field');
    for (var i = 0; i < fields.length; i++) {
      var fieldData = fbUtils.parseAttrs(fields[i]);

      if (fields[i].children && fields[i].children.length) {
        fieldData.values = fbUtils.parseOptions(fields[i]);
      }

      formData.push(fieldData);
    }
  }

  return formData;
};

/**
 * Escape markup so it can be displayed rather than rendered
 * @param  {String} html markup
 * @return {String}      escaped html
 */
fbUtils.escapeHtml = function (html) {
  var escapeElement = document.createElement('textarea');
  escapeElement.textContent = html;
  return escapeElement.innerHTML;
};

// Escape an attribute
fbUtils.escapeAttr = function (str) {
  var match = {
    '"': '&quot;',
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;'
  };

  var replaceTag = function replaceTag(tag) {
    return match[tag] || tag;
  };

  return typeof str === 'string' ? str.replace(/["&<>]/g, replaceTag) : str;
};

// Escape attributes
fbUtils.escapeAttrs = function (attrs) {
  for (var attr in attrs) {
    if (attrs.hasOwnProperty(attr)) {
      attrs[attr] = fbUtils.escapeAttr(attrs[attr]);
    }
  }

  return attrs;
};

// forEach that can be used on nodeList
fbUtils.forEach = function (array, callback, scope) {
  for (var i = 0; i < array.length; i++) {
    callback.call(scope, i, array[i]); // passes back stuff we need
  }
};

/**
 * Remove duplicates from an array of elements
 * @param  {Array} arrArg array with possible duplicates
 * @return {Array}        array with only unique values
 */
fbUtils.unique = function (array) {
  return array.filter(function (elem, pos, arr) {
    return arr.indexOf(elem) === pos;
  });
};

/**
 * Generate preview markup
 * @param  {Object}  fieldData
 * @param  {Object}  opts
 * @param  {Boolean} preview
 * @return {String}  preview markup for field
 */
fbUtils.fieldRender = function (fieldData, opts) {
  var preview = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

  var fieldMarkup = '';
  var fieldLabel = '';
  var optionsMarkup = '';
  var fieldLabelText = fieldData.label || '';
  var fieldDesc = fieldData.description || '';
  var fieldRequired = '';
  var fieldOptions = fieldData.values;

  fieldData.name = preview ? fieldData.name + '-preview' : fieldData.name;
  fieldData.id = fieldData.name;
  if (fieldData.multiple) {
    fieldData.name = fieldData.name + '[]';
  }

  fieldData.type = fieldData.subtype || fieldData.type;

  if (fieldData.required) {
    fieldData.required = null;
    fieldData['aria-required'] = 'true';
    fieldRequired = '<span class="required">*</span>';
  }

  if (fieldData.type !== 'hidden') {
    if (fieldDesc) {
      fieldDesc = '<span class="tooltip-element" tooltip="' + fieldDesc + '">?</span>';
    }
    fieldLabel = '<label for="' + fieldData.id + '" class="fb-' + fieldData.type + '-label">' + fieldLabelText + ' ' + fieldRequired + ' ' + fieldDesc + '</label>';
  }

  var fieldLabelVal = fieldData.label;

  delete fieldData.label;
  delete fieldData.description;

  var fieldDataString = fbUtils.attrString(fieldData);

  switch (fieldData.type) {
    case 'textarea':
    case 'rich-text':
      delete fieldData.type;
      var fieldVal = fieldData.value || '';
      fieldMarkup = fieldLabel + '<textarea ' + fieldDataString + '>' + fieldVal + '</textarea>';
      break;
    case 'select':
      var optionAttrsString = void 0;
      fieldData.type = fieldData.type.replace('-group', '');

      if (fieldOptions) {
        if (fieldData.placeholder) {
          optionsMarkup += '<option disabled selected>' + fieldData.placeholder + '</option>';
        }

        for (var i = 0; i < fieldOptions.length; i++) {
          if (!fieldOptions[i].selected || fieldData.placeholder) {
            delete fieldOptions[i].selected;
          }
          if (!fieldOptions[i].label) {
            fieldOptions[i].label = '';
          }
          optionAttrsString = fbUtils.attrString(fieldOptions[i]);
          optionsMarkup += '<option ' + optionAttrsString + '>' + fieldOptions[i].label + '</option>';
        }
      }

      fieldMarkup = fieldLabel + '<select ' + fieldDataString + '>' + optionsMarkup + '</select>';
      break;
    case 'checkbox-group':
    case 'radio-group':
      var optionAttrs = void 0;
      fieldData.type = fieldData.type.replace('-group', '');

      if (fieldData.type === 'checkbox') {
        fieldData.name = fieldData.name + '[]';
      }

      if (fieldOptions) {
        var _optionAttrsString = void 0;

        for (var _i = 0; _i < fieldOptions.length; _i++) {
          optionAttrs = Object.assign({ value: '', label: '' }, fieldData, fieldOptions[_i]);

          if (optionAttrs.selected) {
            delete optionAttrs.selected;
            optionAttrs.checked = null;
          }

          optionAttrs.id = fieldData.id + '-' + _i;
          _optionAttrsString = fbUtils.attrString(optionAttrs);
          optionsMarkup += '<input ' + _optionAttrsString + ' /> <label for="' + optionAttrs.id + '">' + optionAttrs.label + '</label><br>';
        }

        if (fieldData.other) {
          var otherOptionAttrs = {
            id: fieldData.id + '-' + 'other',
            className: fieldData.className + ' other-option',
            onclick: 'fbUtils.otherOptionCB(\'' + fieldData.id + '-other\')'
          };

          _optionAttrsString = fbUtils.attrString(Object.assign({}, fieldData, otherOptionAttrs));

          optionsMarkup += '<input ' + _optionAttrsString + ' /> <label for="' + otherOptionAttrs.id + '">' + opts.messages.other + '</label> <input type="text" name="' + fieldData.name + '" id="' + otherOptionAttrs.id + '-value" style="display:none;" />';
        }
      }
      fieldMarkup = fieldLabel + '<div class="' + fieldData.type + '-group">' + optionsMarkup + '</div>';
      break;
    case 'text':
    case 'password':
    case 'email':
    case 'number':
    case 'file':
    case 'hidden':
    case 'date':
    case 'tel':
    case 'autocomplete':
      fieldMarkup = fieldLabel + ' <input ' + fieldDataString + '>';
      break;
    case 'color':
      fieldMarkup = fieldLabel + ' <input ' + fieldDataString + '> ' + opts.messages.selectColor;
      break;
    case 'button':
    case 'submit':
      fieldMarkup = '<button ' + fieldDataString + '>' + fieldLabelVal + '</button>';
      break;
    case 'checkbox':
      fieldMarkup = '<input ' + fieldDataString + '> ' + fieldLabel;

      if (fieldData.toggle) {
        setTimeout(function () {
          $(document.getElementById(fieldData.id)).kcToggle();
        }, 100);
      }
      break;
    default:
      fieldMarkup = '<' + fieldData.type + ' ' + fieldDataString + '>' + fieldLabelVal + '</' + fieldData.type + '>';
  }

  if (fieldData.type !== 'hidden') {
    var className = fieldData.id ? 'fb-' + fieldData.type + ' form-group field-' + fieldData.id : '';
    fieldMarkup = fbUtils.markup('div', fieldMarkup, {
      className: className
    });
  } else {
    fieldMarkup = fbUtils.markup('input', null, fieldData);
  }

  return fieldMarkup;
};

/**
 * Callback for other option.
 * Toggles the hidden text area for "other" option.
 * @param  {String} otherId id of the "other" option input
 */
fbUtils.otherOptionCB = function (otherId) {
  var otherInput = document.getElementById(otherId);
  var otherInputValue = document.getElementById(otherId + '-value');

  if (otherInput.checked) {
    otherInput.style.display = 'none';
    otherInputValue.style.display = 'inline-block';
  } else {
    otherInput.style.display = 'inline-block';
    otherInputValue.style.display = 'none';
  }
};

/**
 * Capitalizes a string
 * @param  {String} str uncapitalized string
 * @return {String} str capitalized string
 */
fbUtils.capitalize = function (str) {
  return str.replace(/\b\w/g, function (m) {
    return m.toUpperCase();
  });
};
//   return fbUtils;
// }

module.exports = fbUtils;

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZXZlbnRzLmpzIiwic3JjL2pzL2Zvcm0tYnVpbGRlci5qcyIsInNyYy9qcy9oZWxwZXJzLmpzIiwic3JjL2pzL2tjLXRvZ2dsZS5qcyIsInNyYy9qcy9wb2x5ZmlsbHMuanMiLCJzcmMvanMvdXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBSUE7QUFDRSxJQUFNLFNBQVMsRUFBZjs7QUFFQSxPQUFPLE1BQVAsR0FBZ0IsSUFBSSxLQUFKLENBQVUsUUFBVixDQUFoQjtBQUNBLE9BQU8sUUFBUCxHQUFrQixJQUFJLEtBQUosQ0FBVSxVQUFWLENBQWxCO0FBQ0EsT0FBTyxZQUFQLEdBQXNCLElBQUksS0FBSixDQUFVLGNBQVYsQ0FBdEI7QUFDQSxPQUFPLFdBQVAsR0FBcUIsSUFBSSxLQUFKLENBQVUsYUFBVixDQUFyQjtBQUNBLE9BQU8sV0FBUCxHQUFxQixJQUFJLEtBQUosQ0FBVSxhQUFWLENBQXJCO0FBQ0EsT0FBTyxTQUFQLEdBQW1CLElBQUksS0FBSixDQUFVLFdBQVYsQ0FBbkI7QUFDQSxPQUFPLFVBQVAsR0FBb0IsSUFBSSxLQUFKLENBQVUsWUFBVixDQUFwQjtBQUNBLE9BQU8sWUFBUCxHQUFzQixJQUFJLEtBQUosQ0FBVSxjQUFWLENBQXRCOztBQUVGO0FBQ0E7O0FBRUEsT0FBTyxPQUFQLEdBQWlCLE1BQWpCOzs7OztBQ25CQSxRQUFRLGdCQUFSO0FBQ0EsUUFBUSxnQkFBUjs7QUFFQSxDQUFDLFVBQVMsQ0FBVCxFQUFZO0FBQ1gsTUFBTSxjQUFjLFNBQWQsV0FBYyxDQUFTLE9BQVQsRUFBa0IsT0FBbEIsRUFBMkI7QUFBQTs7QUFDN0MsUUFBSSxjQUFjLElBQWxCOztBQUVBLFFBQUksV0FBVztBQUNiLHVCQUFpQixPQURKO0FBRWIsb0JBQWMsQ0FDWixjQURZLEVBRVosUUFGWSxFQUdaLFVBSFksRUFJWixnQkFKWSxF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Q0EsTUFBTSxrQkFBa0IsU0FBUyxjQUFULENBQTJCLE9BQTNCLFlBQXhCOztBQUVBLE1BQUksV0FBVyxPQUFmLEVBQXdCO0FBQ3RCLGVBQVcsS0FBWCxDQUFpQixPQUFqQixHQUEyQixNQUEzQjtBQUNBLG9CQUFnQixLQUFoQixDQUFzQixPQUF0QixHQUFnQyxjQUFoQztBQUNELEdBSEQsTUFHTztBQUNMLGVBQVcsS0FBWCxDQUFpQixPQUFqQixHQUEyQixjQUEzQjtBQUNBLG9CQUFnQixLQUFoQixDQUFzQixPQUF0QixHQUFnQyxNQUFoQztBQUNEO0FBQ0YsQ0FYRDs7QUFhQTs7Ozs7QUFLQSxRQUFRLFVBQVIsR0FBcUIsVUFBQyxHQUFELEVBQVM7QUFDNUIsU0FBTyxJQUFJLE9BQUosQ0FBWSxPQUFaLEVBQXFCLFVBQVMsQ0FBVCxFQUFZO0FBQ3BDLFdBQU8sRUFBRSxXQUFGLEVBQVA7QUFDRCxHQUZJLENBQVA7QUFHRCxDQUpEO0FBS0Y7QUFDQTs7QUFFQSxPQUFPLE9BQVAsR0FBaUIsT0FBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyoqXG4gKiBGb3JtIEJ1aWxkZXIgZXZlbnRzXG4gKiBAcmV0dXJuIHtPYmplY3R9IHZhcmlvdXMgZXZlbnRzIHRvIGJlIHRyaWdnZXJcbiAqL1xuLy8gZnVuY3Rpb24gZmJFdmVudHMoKXtcbiAgY29uc3QgZXZlbnRzID0ge307XG5cbiAgZXZlbnRzLmxvYWRlZCA9IG5ldyBFdmVudCgnbG9hZGVkJyk7XG4gIGV2ZW50cy52aWV3RGF0YSA9IG5ldyBFdmVudCgndmlld0RhdGEnKTtcbiAgZXZlbnRzLnVzZXJEZWNsaW5lZCA9IG5ldyBFdmVudCgndXNlckRlY2xpbmVkJyk7XG4gIGV2ZW50cy5tb2RhbENsb3NlZCA9IG5ldyBFdmVudCgnbW9kYWxDbG9zZWQnKTtcbiAgZXZlbnRzLm1vZGFsT3BlbmVkID0gbmV3IEV2ZW50KCdtb2RhbE9wZW5lZCcpO1xuICBldmVudHMuZm9ybVNhdmVkID0gbmV3IEV2ZW50KCdmb3JtU2F2ZWQnKTtcbiAgZXZlbnRzLmZpZWxkQWRkZWQgPSBuZXcgRXZlbnQoJ2ZpZWxkQWRkZWQnKTtcbiAgZXZlbnRzLmZpZWxkUmVtb3ZlZCA9IG5ldyBFdmVudCgnZmllbGRSZW1vdmVkJyk7XG5cbi8vICAgcmV0dXJuIGV2ZW50cztcbi8vIH1cblxubW9kdWxlLmV4cG9ydHMgPSBldmVudHM7XG4iLCJyZXF1aXJlKCcuL2tjLXRvZ2dsZS5qcycpO1xucmVxdWlyZSgnLi9wb2x5ZmlsbHMuanMnKTtcblxuKGZ1bmN0aW9uKCQpIHtcbiAgY29uc3QgRm9ybUJ1aWxkZXIgPSBmdW5jdGlvbihvcHRpb25zLCBlbGVtZW50KSB7XG4gICAgbGV0IGZvcm1CdWlsZGVyID0gdGhpcztcblxuICAgIGxldCBkZWZhdWx0cyA9IHtcbiAgICAgIGNvbnRyb2xQb3NpdGlvbjogJ3JpZ2h0JyxcbiAgICAgIGNvbnRyb2xPcmRlcjogW1xuICAgICAgICAnYXV0b2NvbXBsZXRlJyxcbiAgICAgICAgJ2J1dHRvbicsXG4gICAgICAgICdjaGVja2JveCcsXG4gICAgICAgICdjaGVja2JveC1ncm91cCcsXG4gICAgICAgICdkYXRlJyxcbiAgICAgICAgJ2ZpbGUnLFxuICAgICAgICAnaGVhZGVyJyxcbiAgICAgICAgJ2hpZGRlbicsXG4gICAgICAgICdwYXJhZ3JhcGgnLFxuICAgICAgICAnbnVtYmVyJyxcbiAgICAgICAgJ3JhZGlvLWdyb3VwJyxcbiAgICAgICAgJ3NlbGVjdCcsXG4gICAgICAgICd0ZXh0JyxcbiAgICAgICAgJ3RleHRhcmVhJ1xuICAgICAgXSxcbiAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAvLyBBcnJheSBvZiBmaWVsZHMgdG8gZGlzYWJsZVxuICAgICAgZGlzYWJsZUZpZWxkczogW10sXG4gICAgICBlZGl0T25BZGQ6IGZhbHNlLFxuICAgICAgLy8gVW5lZGl0YWJsZSBmaWVsZHMgb3Igb3RoZXIgY29udGVudCB5b3Ugd291bGQgbGlrZSB0byBhcHBlYXJcbiAgICAgIC8vIGJlZm9yZSBhbmQgYWZ0ZXIgcmVndWxhciBmaWVsZHM6XG4gICAgICBhcHBlbmQ6IGZhbHNlLFxuICAgICAgcHJlcGVuZDogZmFsc2UsXG4gICAgICAvLyBhcnJheSBvZiBvYmplY3RzIHdpdGggZmllbGRzIHZhbHVlc1xuICAgICAgLy8gZXg6XG4gICAgICAvLyBkZWZhdWx0RmllbGRzOiBbe1xuICAgICAgLy8gICBsYWJlbDogJ0ZpcnN0IE5hbWUnLFxuICAgICAgLy8gICBuYW1lOiAnZmlyc3QtbmFtZScsXG4gICAgICAvLyAgIHJlcXVpcmVkOiAndHJ1ZScsXG4gICAgICAvLyAgIGRlc2NyaXB0aW9uOiAnWW91ciBmaXJzdCBuYW1lJyxcbiAgICAgIC8vICAgdHlwZTogJ3RleHQnXG4gICAgICAvLyB9LCB7XG4gICAgICAvLyAgIGxhYmVsOiAnUGhvbmUnLFxuICAgICAgLy8gICBuYW1lOiAncGhvbmUnLFxuICAgICAgLy8gICBkZXNjcmlwdGlvbjogJ0hvdyBjYW4gd2UgcmVhY2ggeW91PycsXG4gICAgICAvLyAgIHR5cGU6ICd0ZXh0J1xuICAgICAgLy8gfV0sXG4gICAgICBkZWZhdWx0RmllbGRzOiBbXSxcbiAgICAgIGlucHV0U2V0czogW10sXG4gICAgICBmaWVsZFJlbW92ZVdhcm46IGZhbHNlLFxuICAgICAgcm9sZXM6IHtcbiAgICAgICAgMTogJ0FkbWluaXN0cmF0b3InXG4gICAgICB9LFxuICAgICAgbWVzc2FnZXM6IHtcbiAgICAgICAgYWRkT3B0aW9uOiAnQWRkIE9wdGlvbiArJyxcbiAgICAgICAgYWxsRmllbGRzUmVtb3ZlZDogJ0FsbCBmaWVsZHMgd2VyZSByZW1vdmVkLicsXG4gICAgICAgIGFsbG93TXVsdGlwbGVGaWxlczogJ0FsbG93IHVzZXJzIHRvIHVwbG9hZCBtdWx0aXBsZSBmaWxlcycsXG4gICAgICAgIGF1dG9jb21wbGV0ZTogJ0F1dG9jb21wbGV0ZScsXG4gICAgICAgIGJ1dHRvbjogJ0J1dHRvbicsXG4gICAgICAgIGNhbm5vdEJlRW1wdHk6ICdUaGlzIGZpZWxkIGNhbm5vdCBiZSBlbXB0eScsXG4gICAgICAgIGNoZWNrYm94R3JvdXA6ICdDaGVja2JveCBHcm91cCcsXG4gICAgICAgIGNoZWNrYm94OiAnQ2hlY2tib3gnLFxuICAgICAgICBjaGVja2JveGVzOiAnQ2hlY2tib3hlcycsXG4gICAgICAgIGNsYXNzTmFtZTogJ0NsYXNzJyxcbiAgICAgICAgY2xlYXJBbGxNZXNzYWdlOiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGNsZWFyIGFsbCBmaWVsZHM/JyxcbiAgICAgICAgY2xlYXJBbGw6ICdDbGVhcicsXG4gICAgICAgIGNsb3NlOiAnQ2xvc2UnLFxuICAgICAgICBjb250ZW50OiAnQ29udGVudCcsXG4gICAgICAgIGNvcHk6ICdDb3B5IFRvIENsaXBib2FyZCcsXG4gICAgICAgIGNvcHlCdXR0b246ICcmIzQzOycsXG4gICAgICAgIGNvcHlCdXR0b25Ub29sdGlwOiAnQ29weScsXG4gICAgICAgIGRhdGVGaWVsZDogJ0RhdGUgRmllbGQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0hlbHAgVGV4dCcsXG4gICAgICAgIGRlc2NyaXB0aW9uRmllbGQ6ICdEZXNjcmlwdGlvbicsXG4gICAgICAgIGRldk1vZGU6ICdEZXZlbG9wZXIgTW9kZScsXG4gICAgICAgIGVkaXROYW1lczogJ0VkaXQgTmFtZXMnLFxuICAgICAgICBlZGl0b3JUaXRsZTogJ0Zvcm0gRWxlbWVudHMnLFxuICAgICAgICBlZGl0WE1MOiAnRWRpdCBYTUwnLFxuICAgICAgICBlbmFibGVPdGhlcjogJ0VuYWJsZSAmcXVvdDtPdGhlciZxdW90OycsXG4gICAgICAgIGVuYWJsZU90aGVyTXNnOiAnTGV0IHVzZXJzIHRvIGVudGVyIGFuIHVubGlzdGVkIG9wdGlvbicsXG4gICAgICAgIGZpZWxkRGVsZXRlV2FybmluZzogZmFsc2UsXG4gICAgICAgIGZpZWxkVmFyczogJ0ZpZWxkIFZhcmlhYmxlcycsXG4gICAgICAgIGZpZWxkTm9uRWRpdGFibGU6ICdUaGlzIGZpZWxkIGNhbm5vdCBiZSBlZGl0ZWQuJyxcbiAgICAgICAgZmllbGRSZW1vdmVXYXJuaW5nOiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlbW92ZSB0aGlzIGZpZWxkPycsXG4gICAgICAgIGZpbGVVcGxvYWQ6ICdGaWxlIFVwbG9hZCcsXG4gICAgICAgIGZvcm1VcGRhdGVkOiAnRm9ybSBVcGRhdGVkJyxcbiAgICAgICAgZ2V0U3RhcnRlZDogJ0RyYWcgYSBmaWVsZCBmcm9tIHRoZSByaWdodCB0byB0aGlzIGFyZWEnLFxuICAgICAgICBoZWFkZXI6ICdIZWFkZXInLFxuICAgICAgICBoaWRlOiAnRWRpdCcsXG4gICAgICAgIGhpZGRlbjogJ0hpZGRlbiBJbnB1dCcsXG4gICAgICAgIGxhYmVsOiAnTGFiZWwnLFxuICAgICAgICBsYWJlbEVtcHR5OiAnRmllbGQgTGFiZWwgY2Fubm90IGJlIGVtcHR5JyxcbiAgICAgICAgbGltaXRSb2xlOiAnTGltaXQgYWNjZXNzIHRvIG9uZSBvciBtb3JlIG9mIHRoZSBmb2xsb3dpbmcgcm9sZXM6JyxcbiAgICAgICAgbWFuZGF0b3J5OiAnTWFuZGF0b3J5JyxcbiAgICAgICAgbWF4bGVuZ3RoOiAnTWF4IExlbmd0aCcsXG4gICAgICAgIG1pbk9wdGlvbk1lc3NhZ2U6ICdUaGlzIGZpZWxkIHJlcXVpcmVzIGEgbWluaW11bSBvZiAyIG9wdGlvbnMnLFxuICAgICAgICBtdWx0aXBsZUZpbGVzOiAnTXVsdGlwbGUgRmlsZXMnLFxuICAgICAgICBuYW1lOiAnTmFtZScsXG4gICAgICAgIG5vOiAnTm8nLFxuICAgICAgICBudW1iZXI6ICdOdW1iZXInLFxuICAgICAgICBvZmY6ICdPZmYnLFxuICAgICAgICBvbjogJ09uJyxcbiAgICAgICAgb3B0aW9uOiAnT3B0aW9uJyxcbiAgICAgICAgb3B0aW9uYWw6ICdvcHRpb25hbCcsXG4gICAgICAgIG9wdGlvbkxhYmVsUGxhY2Vob2xkZXI6ICdMYWJlbCcsXG4gICAgICAgIG9wdGlvblZhbHVlUGxhY2Vob2xkZXI6ICdWYWx1ZScsXG4gICAgICAgIG9wdGlvbkVtcHR5OiAnT3B0aW9uIHZhbHVlIHJlcXVpcmVkJyxcbiAgICAgICAgb3RoZXI6ICdPdGhlcicsXG4gICAgICAgIHBhcmFncmFwaDogJ1BhcmFncmFwaCcsXG4gICAgICAgIHBsYWNlaG9sZGVyOiAnUGxhY2Vob2xkZXInLFxuICAgICAgICBwbGFjZWhvbGRlcnM6IHtcbiAgICAgICAgICB2YWx1ZTogJ1ZhbHVlJyxcbiAgICAgICAgICBsYWJlbDogJ0xhYmVsJyxcbiAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICB0ZXh0YXJlYTogJycsXG4gICAgICAgICAgZW1haWw6ICdFbnRlciB5b3UgZW1haWwnLFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICBjbGFzc05hbWU6ICdzcGFjZSBzZXBhcmF0ZWQgY2xhc3NlcycsXG4gICAgICAgICAgcGFzc3dvcmQ6ICdFbnRlciB5b3VyIHBhc3N3b3JkJ1xuICAgICAgICB9LFxuICAgICAgICBwcmV2aWV3OiAnUHJldmlldycsXG4gICAgICAgIHJhZGlvR3JvdXA6ICdSYWRpbyBHcm91cCcsXG4gICAgICAgIHJhZGlvOiAnUmFkaW8nLFxuICAgICAgICByZW1vdmVNZXNzYWdlOiAnUmVtb3ZlIEVsZW1lbnQnLFxuICAgICAgICByZW1vdmVPcHRpb246ICdSZW1vdmUgT3B0aW9uJyxcbiAgICAgICAgcmVtb3ZlOiAnJiMyMTU7JyxcbiAgICAgICAgcmVxdWlyZWQ6ICdSZXF1aXJlZCcsXG4gICAgICAgIHJpY2hUZXh0OiAnUmljaCBUZXh0IEVkaXRvcicsXG4gICAgICAgIHJvbGVzOiAnQWNjZXNzJyxcbiAgICAgICAgcm93czogJ1Jvd3MnLFxuICAgICAgICBzYXZlOiAnU2F2ZScsXG4gICAgICAgIHNlbGVjdE9wdGlvbnM6ICdPcHRpb25zJyxcbiAgICAgICAgc2VsZWN0OiAnU2VsZWN0JyxcbiAgICAgICAgc2VsZWN0Q29sb3I6ICdTZWxlY3QgQ29sb3InLFxuICAgICAgICBzZWxlY3Rpb25zTWVzc2FnZTogJ0FsbG93IE11bHRpcGxlIFNlbGVjdGlvbnMnLFxuICAgICAgICBzaXplOiAnU2l6ZScsXG4gICAgICAgIHNpemVzOiB7XG4gICAgICAgICAgeHM6ICdFeHRyYSBTbWFsbCcsXG4gICAgICAgICAgc206ICdTbWFsbCcsXG4gICAgICAgICAgbTogJ0RlZmF1bHQnLFxuICAgICAgICAgIGxnOiAnTGFyZ2UnXG4gICAgICAgIH0sXG4gICAgICAgIHN0eWxlOiAnU3R5bGUnLFxuICAgICAgICBzdHlsZXM6IHtcbiAgICAgICAgICBidG46IHtcbiAgICAgICAgICAgICdkZWZhdWx0JzogJ0RlZmF1bHQnLFxuICAgICAgICAgICAgZGFuZ2VyOiAnRGFuZ2VyJyxcbiAgICAgICAgICAgIGluZm86ICdJbmZvJyxcbiAgICAgICAgICAgIHByaW1hcnk6ICdQcmltYXJ5JyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ICdTdWNjZXNzJyxcbiAgICAgICAgICAgIHdhcm5pbmc6ICdXYXJuaW5nJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3VidHlwZTogJ1R5cGUnLFxuICAgICAgICB0ZXh0OiAnVGV4dCBGaWVsZCcsXG4gICAgICAgIHRleHRBcmVhOiAnVGV4dCBBcmVhJyxcbiAgICAgICAgdG9nZ2xlOiAnVG9nZ2xlJyxcbiAgICAgICAgd2FybmluZzogJ1dhcm5pbmchJyxcbiAgICAgICAgdmFsdWU6ICdWYWx1ZScsXG4gICAgICAgIHZpZXdKU09OOiAneyAgfScsXG4gICAgICAgIHZpZXdYTUw6ICcmbHQ7LyZndDsnLFxuICAgICAgICB5ZXM6ICdZZXMnXG4gICAgICB9LFxuICAgICAgbm90aWZ5OiB7XG4gICAgICAgIGVycm9yOiBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHdhcm5pbmc6IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc29ydGFibGVDb250cm9sczogZmFsc2UsXG4gICAgICBzdGlja3lDb250cm9sczogZmFsc2UsXG4gICAgICBzaG93QWN0aW9uQnV0dG9uczogdHJ1ZSxcbiAgICAgIHR5cGVVc2VyQXR0cnM6IHt9LFxuICAgICAgdHlwZVVzZXJFdmVudHM6IHt9LFxuICAgICAgcHJlZml4OiAnZm9ybS1idWlsZGVyLSdcbiAgICB9O1xuXG4gICAgY29uc3QgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzLmpzJyk7XG5cbiAgICBkZWZhdWx0cy5tZXNzYWdlcy5zdWJ0eXBlcyA9ICgoKSA9PiB7XG4gICAgICBjb25zdCBzdWJ0eXBlRGVmYXVsdCA9IChzdWJ0eXBlKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGFiZWw6IHN1YnR5cGUsXG4gICAgICAgICAgdmFsdWU6IHN1YnR5cGVcbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgICAgdGV4dDogWyd0ZXh0JywgJ3Bhc3N3b3JkJywgJ2VtYWlsJywgJ2NvbG9yJywgJ3RlbCddXG4gICAgICAgICAgLm1hcChzdWJ0eXBlRGVmYXVsdCksXG4gICAgICAgICAgaGVhZGVyOiBbJ2gxJywgJ2gyJywgJ2gzJ11cbiAgICAgICAgICAubWFwKHN1YnR5cGVEZWZhdWx0KSxcbiAgICAgICAgICBidXR0b246IFsnYnV0dG9uJywgJ3N1Ym1pdCcsICdyZXNldCddXG4gICAgICAgICAgLm1hcChzdWJ0eXBlRGVmYXVsdCksXG4gICAgICAgICAgcGFyYWdyYXBoOiBbJ3AnLCAnYWRkcmVzcycsICdibG9ja3F1b3RlJywgJ2NhbnZhcycsICdvdXRwdXQnXVxuICAgICAgICAgIC5tYXAoc3VidHlwZURlZmF1bHQpXG4gICAgICAgIH07XG4gICAgfSkoKTtcblxuICAgIGxldCBvcHRzID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuICAgIGxldCBmcm1iSUQgPSAnZnJtYi0nICsgJCgndWxbaWRePWZybWItXScpLmxlbmd0aCsrO1xuXG4gICAgaWYgKG9wdGlvbnMubWVzc2FnZXMpIHtcbiAgICAgIG9wdHMubWVzc2FnZXMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0cy5tZXNzYWdlcywgb3B0aW9ucy5tZXNzYWdlcyk7XG4gICAgfVxuXG4gICAgZm9ybUJ1aWxkZXIuZm9ybUlEID0gZnJtYklEO1xuXG4gICAgbGV0ICRzb3J0YWJsZUZpZWxkcyA9ICQoJzx1bC8+JykuYXR0cignaWQnLCBmcm1iSUQpLmFkZENsYXNzKCdmcm1iJyk7XG4gICAgbGV0IF9oZWxwZXJzID0gcmVxdWlyZSgnLi9oZWxwZXJzLmpzJykob3B0cywgZm9ybUJ1aWxkZXIpO1xuXG4gICAgZm9ybUJ1aWxkZXIubGF5b3V0ID0gX2hlbHBlcnMuZWRpdG9yTGF5b3V0KG9wdHMuY29udHJvbFBvc2l0aW9uKTtcbiAgICBmb3JtQnVpbGRlci5zdGFnZSA9ICRzb3J0YWJsZUZpZWxkc1swXTtcblxuICAgIGxldCBsYXN0SUQgPSBmcm1iSUQgKyAnLWZsZC0xJztcbiAgICBsZXQgYm94SUQgPSBmcm1iSUQgKyAnLWNvbnRyb2wtYm94JztcblxuICAgIC8vIGNyZWF0ZSBhcnJheSBvZiBmaWVsZCBvYmplY3RzIHRvIGN5Y2xlIHRocm91Z2hcbiAgICBsZXQgZnJtYkZpZWxkcyA9IFt7XG4gICAgICBsYWJlbDogb3B0cy5tZXNzYWdlcy5hdXRvY29tcGxldGUsXG4gICAgICBhdHRyczoge1xuICAgICAgICB0eXBlOiAnYXV0b2NvbXBsZXRlJyxcbiAgICAgICAgY2xhc3NOYW1lOiAnYXV0b2NvbXBsZXRlJyxcbiAgICAgICAgbmFtZTogJ2F1dG9jb21wbGV0ZSdcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBsYWJlbDogb3B0cy5tZXNzYWdlcy5idXR0b24sXG4gICAgICBhdHRyczoge1xuICAgICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICAgY2xhc3NOYW1lOiAnYnV0dG9uLWlucHV0JyxcbiAgICAgICAgbmFtZTogJ2J1dHRvbidcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBsYWJlbDogb3B0cy5tZXNzYWdlcy5jaGVja2JveCxcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgIGNsYXNzTmFtZTogJ2NoZWNrYm94JyxcbiAgICAgICAgbmFtZTogJ2NoZWNrYm94J1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGxhYmVsOiBvcHRzLm1lc3NhZ2VzLmNoZWNrYm94R3JvdXAsXG4gICAgICBhdHRyczoge1xuICAgICAgICB0eXBlOiAnY2hlY2tib3gtZ3JvdXAnLFxuICAgICAgICBjbGFzc05hbWU6ICdjaGVja2JveC1ncm91cCcsXG4gICAgICAgIG5hbWU6ICdjaGVja2JveC1ncm91cCdcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBsYWJlbDogb3B0cy5tZXNzYWdlcy5kYXRlRmllbGQsXG4gICAgICBhdHRyczoge1xuICAgICAgICB0eXBlOiAnZGF0ZScsXG4gICAgICAgIGNsYXNzTmFtZTogJ2NhbGVuZGFyJyxcbiAgICAgICAgbmFtZTogJ2RhdGUtaW5wdXQnXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgbGFiZWw6IG9wdHMubWVzc2FnZXMuZmlsZVVwbG9hZCxcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHR5cGU6ICdmaWxlJyxcbiAgICAgICAgY2xhc3NOYW1lOiAnZmlsZS1pbnB1dCcsXG4gICAgICAgIG5hbWU6ICdmaWxlLWlucHV0J1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGxhYmVsOiBvcHRzLm1lc3NhZ2VzLmhlYWRlcixcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHR5cGU6ICdoZWFkZXInLFxuICAgICAgICBjbGFzc05hbWU6ICdoZWFkZXInXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgbGFiZWw6IG9wdHMubWVzc2FnZXMuaGlkZGVuLFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgdHlwZTogJ2hpZGRlbicsXG4gICAgICAgIGNsYXNzTmFtZTogJ2hpZGRlbi1pbnB1dCcsXG4gICAgICAgIG5hbWU6ICdoaWRkZW4taW5wdXQnXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgbGFiZWw6IG9wdHMubWVzc2FnZXMubnVtYmVyLFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgIGNsYXNzTmFtZTogJ251bWJlcicsXG4gICAgICAgIG5hbWU6ICdudW1iZXInXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgbGFiZWw6IG9wdHMubWVzc2FnZXMucGFyYWdyYXBoLFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgdHlwZTogJ3BhcmFncmFwaCcsXG4gICAgICAgIGNsYXNzTmFtZTogJ3BhcmFncmFwaCdcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBsYWJlbDogb3B0cy5tZXNzYWdlcy5yYWRpb0dyb3VwLFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgdHlwZTogJ3JhZGlvLWdyb3VwJyxcbiAgICAgICAgY2xhc3NOYW1lOiAncmFkaW8tZ3JvdXAnLFxuICAgICAgICBuYW1lOiAncmFkaW8tZ3JvdXAnXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgbGFiZWw6IG9wdHMubWVzc2FnZXMuc2VsZWN0LFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgICAgIGNsYXNzTmFtZTogJ3NlbGVjdCcsXG4gICAgICAgIG5hbWU6ICdzZWxlY3QnXG4gICAgICB9XG4gICAgfSwge1xuICAgICAgbGFiZWw6IG9wdHMubWVzc2FnZXMudGV4dCxcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgY2xhc3NOYW1lOiAndGV4dC1pbnB1dCcsXG4gICAgICAgIG5hbWU6ICd0ZXh0LWlucHV0J1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGxhYmVsOiBvcHRzLm1lc3NhZ2VzLnRleHRBcmVhLFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgdHlwZTogJ3RleHRhcmVhJyxcbiAgICAgICAgY2xhc3NOYW1lOiAndGV4dC1hcmVhJyxcbiAgICAgICAgbmFtZTogJ3RleHRhcmVhJ1xuICAgICAgfVxuICAgIH1dO1xuXG4gICAgZnJtYkZpZWxkcyA9IF9oZWxwZXJzLm9yZGVyRmllbGRzKGZybWJGaWVsZHMpO1xuXG4gICAgaWYgKG9wdHMuZGlzYWJsZUZpZWxkcykge1xuICAgICAgLy8gcmVtb3ZlIGRpc2FibGVkRmllbGRzXG4gICAgICBmcm1iRmllbGRzID0gZnJtYkZpZWxkcy5maWx0ZXIoZnVuY3Rpb24oZmllbGQpIHtcbiAgICAgICAgcmV0dXJuICF1dGlscy5pbkFycmF5KGZpZWxkLmF0dHJzLnR5cGUsIG9wdHMuZGlzYWJsZUZpZWxkcyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgZHJhZ2dhYmxlIGZpZWxkcyBmb3IgZm9ybUJ1aWxkZXJcbiAgICBsZXQgY2JVbCA9IHV0aWxzLm1hcmt1cCgndWwnLCBudWxsLCB7aWQ6IGJveElELCBjbGFzc05hbWU6ICdmcm1iLWNvbnRyb2wnfSk7XG4gICAgZm9ybUJ1aWxkZXIuY29udHJvbHMgPSBjYlVsO1xuXG4gICAgaWYgKG9wdHMuc29ydGFibGVDb250cm9scykge1xuICAgICAgY2JVbC5jbGFzc0xpc3QuYWRkKCdzb3J0LWVuYWJsZWQnKTtcbiAgICB9XG5cbiAgICBsZXQgJGNiVUwgPSAkKGNiVWwpO1xuXG4gICAgLy8gTG9vcCB0aHJvdWdoXG4gICAgdXRpbHMuZm9yRWFjaChmcm1iRmllbGRzLCAoaSkgPT4ge1xuICAgICAgbGV0ICRmaWVsZCA9ICQoJzxsaS8+Jywge1xuICAgICAgICAnY2xhc3MnOiAnaWNvbi0nICsgZnJtYkZpZWxkc1tpXS5hdHRycy5jbGFzc05hbWUsXG4gICAgICAgICd0eXBlJzogZnJtYkZpZWxkc1tpXS50eXBlLFxuICAgICAgICAnbmFtZSc6IGZybWJGaWVsZHNbaV0uY2xhc3NOYW1lLFxuICAgICAgICAnbGFiZWwnOiBmcm1iRmllbGRzW2ldLmxhYmVsXG4gICAgICB9KTtcblxuICAgICAgJGZpZWxkLmRhdGEoJ25ld0ZpZWxkRGF0YScsIGZybWJGaWVsZHNbaV0pO1xuXG4gICAgICBsZXQgdHlwZUxhYmVsID0gdXRpbHMubWFya3VwKCdzcGFuJywgZnJtYkZpZWxkc1tpXS5sYWJlbCk7XG4gICAgICAkZmllbGQuaHRtbCh0eXBlTGFiZWwpLmFwcGVuZFRvKCRjYlVMKTtcbiAgICB9KTtcblxuICAgIGlmIChvcHRzLmlucHV0U2V0cy5sZW5ndGgpIHtcbiAgICAgICQoJzxsaS8+JywgeydjbGFzcyc6ICdmYi1zZXBhcmF0b3InfSkuaHRtbCgnPGhyPicpLmFwcGVuZFRvKCRjYlVMKTtcbiAgICAgIG9wdHMuaW5wdXRTZXRzLmZvckVhY2goKHNldCkgPT4ge1xuICAgICAgICBzZXQubmFtZSA9IHNldC5uYW1lIHx8IF9oZWxwZXJzLm1ha2VDbGFzc05hbWUoc2V0LmxhYmVsKTtcbiAgICAgICAgbGV0ICRzZXQgPSAkKCc8bGkvPicsIHsnY2xhc3MnOiAnaW5wdXQtc2V0LWNvbnRyb2wnLCB0eXBlOiBzZXQubmFtZX0pO1xuICAgICAgICAkc2V0Lmh0bWwoc2V0LmxhYmVsKS5hcHBlbmRUbygkY2JVTCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBTb3J0YWJsZSBmaWVsZHNcbiAgICAkc29ydGFibGVGaWVsZHMuc29ydGFibGUoe1xuICAgICAgY3Vyc29yOiAnbW92ZScsXG4gICAgICBvcGFjaXR5OiAwLjksXG4gICAgICByZXZlcnQ6IDE1MCxcbiAgICAgIGJlZm9yZVN0b3A6IF9oZWxwZXJzLmJlZm9yZVN0b3AsXG4gICAgICBzdGFydDogX2hlbHBlcnMuc3RhcnRNb3ZpbmcsXG4gICAgICBzdG9wOiBfaGVscGVycy5zdG9wTW92aW5nLFxuICAgICAgY2FuY2VsOiAnaW5wdXQsIHNlbGVjdCwgLmRpc2FibGVkLCAuZm9ybS1ncm91cCwgLmJ0bicsXG4gICAgICBwbGFjZWhvbGRlcjogJ2ZybWItcGxhY2Vob2xkZXInXG4gICAgfSk7XG5cbiAgICAvLyBDb250cm9sQm94IHdpdGggZGlmZmVyZW50IGZpZWxkc1xuICAgICRjYlVMLnNvcnRhYmxlKHtcbiAgICAgIGhlbHBlcjogJ2Nsb25lJyxcbiAgICAgIG9wYWNpdHk6IDAuOSxcbiAgICAgIGNvbm5lY3RXaXRoOiAkc29ydGFibGVGaWVsZHMsXG4gICAgICBjYW5jZWw6ICcuZmItc2VwYXJhdG9yJyxcbiAgICAgIGN1cnNvcjogJ21vdmUnLFxuICAgICAgc2Nyb2xsOiBmYWxzZSxcbiAgICAgIHBsYWNlaG9sZGVyOiAndWktc3RhdGUtaGlnaGxpZ2h0JyxcbiAgICAgIHN0YXJ0OiBfaGVscGVycy5zdGFydE1vdmluZyxcbiAgICAgIHN0b3A6IF9oZWxwZXJzLnN0b3BNb3ZpbmcsXG4gICAgICByZXZlcnQ6IDE1MCxcbiAgICAgIGJlZm9yZVN0b3A6IF9oZWxwZXJzLmJlZm9yZVN0b3AsXG4gICAgICBkaXN0YW5jZTogMyxcbiAgICAgIHVwZGF0ZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgIGlmIChfaGVscGVycy5kb0NhbmNlbCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodWkuaXRlbS5wYXJlbnQoKVswXSA9PT0gJHNvcnRhYmxlRmllbGRzWzBdKSB7XG4gICAgICAgICAgcHJvY2Vzc0NvbnRyb2wodWkuaXRlbSk7XG4gICAgICAgICAgX2hlbHBlcnMuZG9DYW5jZWwgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9oZWxwZXJzLnNldEZpZWxkT3JkZXIoJGNiVUwpO1xuICAgICAgICAgIF9oZWxwZXJzLmRvQ2FuY2VsID0gIW9wdHMuc29ydGFibGVDb250cm9scztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGV0IHByb2Nlc3NDb250cm9sID0gKGNvbnRyb2wpID0+IHtcbiAgICAgIGlmIChjb250cm9sWzBdLmNsYXNzTGlzdC5jb250YWlucygnaW5wdXQtc2V0LWNvbnRyb2wnKSkge1xuICAgICAgICBsZXQgaW5wdXRTZXQgPSBvcHRzLmlucHV0U2V0cy5maWx0ZXIoKHNldCkgPT4ge1xuICAgICAgICAgIHJldHVybiBzZXQubmFtZSA9PT0gY29udHJvbFswXS50eXBlO1xuICAgICAgICB9KVswXTtcbiAgICAgICAgaWYgKGlucHV0U2V0LnNob3dIZWFkZXIpIHtcbiAgICAgICAgICBsZXQgaGVhZGVyID0ge1xuICAgICAgICAgICAgICB0eXBlOiAnaGVhZGVyJyxcbiAgICAgICAgICAgICAgc3VidHlwZTogJ2gyJyxcbiAgICAgICAgICAgICAgaWQ6IGlucHV0U2V0Lm5hbWUsXG4gICAgICAgICAgICAgIGxhYmVsOiBpbnB1dFNldC5sYWJlbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICBwcmVwRmllbGRWYXJzKGhlYWRlciwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXRTZXQuZmllbGRzLmZvckVhY2goKGZpZWxkKSA9PiB7XG4gICAgICAgICAgcHJlcEZpZWxkVmFycyhmaWVsZCwgdHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJlcEZpZWxkVmFycyhjb250cm9sLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGV0ICRmb3JtV3JhcCA9ICQoJzxkaXYvPicsIHtcbiAgICAgIGlkOiBmcm1iSUQgKyAnLWZvcm0td3JhcCcsXG4gICAgICAnY2xhc3MnOiAnZm9ybS13cmFwIGZvcm0tYnVpbGRlcicgKyBfaGVscGVycy5tb2JpbGVDbGFzcygpXG4gICAgfSk7XG5cbiAgICBmb3JtQnVpbGRlci5lZGl0b3IgPSAkZm9ybVdyYXBbMF07XG5cbiAgICBsZXQgJHN0YWdlV3JhcCA9ICQoJzxkaXYvPicsIHtcbiAgICAgIGlkOiBmcm1iSUQgKyAnLXN0YWdlLXdyYXAnLFxuICAgICAgJ2NsYXNzJzogJ3N0YWdlLXdyYXAgJyArIGZvcm1CdWlsZGVyLmxheW91dC5zdGFnZVxuICAgIH0pO1xuXG4gICAgbGV0IGNiV3JhcCA9ICQoJzxkaXYvPicsIHtcbiAgICAgIGlkOiBmcm1iSUQgKyAnLWNiLXdyYXAnLFxuICAgICAgJ2NsYXNzJzogJ2NiLXdyYXAgJyArIGZvcm1CdWlsZGVyLmxheW91dC5jb250cm9sc1xuICAgIH0pLmFwcGVuZCgkY2JVTFswXSk7XG5cbiAgICBpZiAob3B0cy5zaG93QWN0aW9uQnV0dG9ucykge1xuICAgICAgLy8gQnVpbGQgb3VyIGhlYWRlcnMgYW5kIGFjdGlvbiBsaW5rc1xuICAgICAgbGV0IHZpZXdEYXRhVGV4dDtcbiAgICAgIGlmKG9wdHMuZGF0YVR5cGUgPT09ICd4bWwnKSB7XG4gICAgICAgIHZpZXdEYXRhVGV4dCA9IG9wdHMubWVzc2FnZXMudmlld1hNTDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZpZXdEYXRhVGV4dCA9IG9wdHMubWVzc2FnZXMudmlld0pTT047XG4gICAgICB9XG4gICAgICBjb25zdCB2aWV3RGF0YSA9IHV0aWxzLm1hcmt1cCgnYnV0dG9uJywgdmlld0RhdGFUZXh0LCB7XG4gICAgICAgIGlkOiBmcm1iSUQgKyAnLXZpZXctZGF0YScsXG4gICAgICAgIHR5cGU6ICdidXR0b24nLFxuICAgICAgICBjbGFzc05hbWU6ICd2aWV3LWRhdGEgYnRuIGJ0bi1kZWZhdWx0J1xuICAgICAgfSk7XG4gICAgICBjb25zdCBjbGVhckFsbCA9IHV0aWxzLm1hcmt1cCgnYnV0dG9uJywgb3B0cy5tZXNzYWdlcy5jbGVhckFsbCwge1xuICAgICAgICBpZDogZnJtYklEICsgJy1jbGVhci1hbGwnLFxuICAgICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgICAgY2xhc3NOYW1lOiAnY2xlYXItYWxsIGJ0biBidG4tZGVmYXVsdCdcbiAgICAgIH0pO1xuICAgICAgY29uc3Qgc2F2ZUFsbCA9IHV0aWxzLm1hcmt1cCgnYnV0dG9uJywgb3B0cy5tZXNzYWdlcy5zYXZlLCB7XG4gICAgICAgIGNsYXNzTmFtZTogYGJ0biBidG4tcHJpbWFyeSAke29wdHMucHJlZml4fXNhdmVgLFxuICAgICAgICBpZDogZnJtYklEICsgJy1zYXZlJyxcbiAgICAgICAgdHlwZTogJ2J1dHRvbidcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZm9ybUFjdGlvbnMgPSB1dGlscy5tYXJrdXAoJ2RpdicsIFtjbGVhckFsbCwgdmlld0RhdGEsIHNhdmVBbGxdLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ2Zvcm0tYWN0aW9ucyBidG4tZ3JvdXAnXG4gICAgICB9KTtcblxuICAgICAgY2JXcmFwLmFwcGVuZChmb3JtQWN0aW9ucyk7XG4gICAgfVxuXG4gICAgJHN0YWdlV3JhcC5hcHBlbmQoJHNvcnRhYmxlRmllbGRzLCBjYldyYXApO1xuICAgICRzdGFnZVdyYXAuYmVmb3JlKCRmb3JtV3JhcCk7XG4gICAgJGZvcm1XcmFwLmFwcGVuZCgkc3RhZ2VXcmFwLCBjYldyYXApO1xuXG4gICAgaWYgKGVsZW1lbnQudHlwZSAhPT0gJ3RleHRhcmVhJykge1xuICAgICAgJChlbGVtZW50KS5hcHBlbmQoJGZvcm1XcmFwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJChlbGVtZW50KS5yZXBsYWNlV2l0aCgkZm9ybVdyYXApO1xuICAgIH1cblxuICAgIGxldCBzYXZlQW5kVXBkYXRlID0gX2hlbHBlcnMuZGVib3VuY2UoZXZ0ID0+IHtcbiAgICAgIGlmIChldnQpIHtcbiAgICAgICAgaWYgKGV2dC50eXBlID09PSAna2V5dXAnICYmIGV2dC50YXJnZXQubmFtZSA9PT0gJ2NsYXNzTmFtZScpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgJGZpZWxkID0gJChldnQudGFyZ2V0KS5jbG9zZXN0KCcuZm9ybS1maWVsZCcpO1xuICAgICAgICBfaGVscGVycy51cGRhdGVQcmV2aWV3KCRmaWVsZCk7XG4gICAgICAgIF9oZWxwZXJzLnNhdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFNhdmUgZmllbGQgb24gY2hhbmdlXG4gICAgJHNvcnRhYmxlRmllbGRzLm9uKCdjaGFuZ2UgYmx1ciBrZXl1cCcsICcuZm9ybS1lbGVtZW50cyBpbnB1dCwgLmZvcm0tZWxlbWVudHMgc2VsZWN0LCAuZm9ybS1lbGVtZW50cyB0ZXh0YXJlYScsIHNhdmVBbmRVcGRhdGUpO1xuXG4gICAgJCgnbGknLCAkY2JVTCkuY2xpY2soZnVuY3Rpb24oZXZ0KSB7XG4gICAgICBsZXQgJGNvbnRyb2wgPSAkKGV2dC50YXJnZXQpLmNsb3Nlc3QoJy51aS1zb3J0YWJsZS1oYW5kbGUnKTtcbiAgICAgIF9oZWxwZXJzLnN0b3BJbmRleCA9IHVuZGVmaW5lZDtcbiAgICAgIHByb2Nlc3NDb250cm9sKCRjb250cm9sKTtcbiAgICAgIF9oZWxwZXJzLnNhdmUoKTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBhcHBlbmQgYW5kIHByZXBlbmQgb3B0aW9ucyBpZiBuZWNlc3NhcnlcbiAgICBsZXQgbm9uRWRpdGFibGVGaWVsZHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIGxldCBjYW5jZWxBcnJheSA9IFtdO1xuXG4gICAgICBpZiAob3B0cy5wcmVwZW5kICYmICEkKCcuZGlzYWJsZWQucHJlcGVuZCcsICRzb3J0YWJsZUZpZWxkcykubGVuZ3RoKSB7XG4gICAgICAgIGxldCBwcmVwZW5kZWRGaWVsZCA9IHV0aWxzLm1hcmt1cCgnbGknLCBvcHRzLnByZXBlbmQsIHtjbGFzc05hbWU6ICdkaXNhYmxlZCBwcmVwZW5kJ30pO1xuICAgICAgICBjYW5jZWxBcnJheS5wdXNoKHRydWUpO1xuICAgICAgICAkc29ydGFibGVGaWVsZHMucHJlcGVuZChwcmVwZW5kZWRGaWVsZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRzLmFwcGVuZCAmJiAhJCgnLmRpc2FibGVkLmFwcGVuZCcsICRzb3J0YWJsZUZpZWxkcykubGVuZ3RoKSB7XG4gICAgICAgIGxldCBhcHBlbmRlZEZpZWxkID0gdXRpbHMubWFya3VwKCdsaScsIG9wdHMuYXBwZW5kLCB7Y2xhc3NOYW1lOiAnZGlzYWJsZWQgYXBwZW5kJ30pO1xuICAgICAgICBjYW5jZWxBcnJheS5wdXNoKHRydWUpO1xuICAgICAgICAkc29ydGFibGVGaWVsZHMuYXBwZW5kKGFwcGVuZGVkRmllbGQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2FuY2VsQXJyYXkuc29tZShlbGVtID0+IGVsZW0gPT09IHRydWUpKSB7XG4gICAgICAgICRzdGFnZVdyYXAucmVtb3ZlQ2xhc3MoJ2VtcHR5Jyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxldCBwcmVwRmllbGRWYXJzID0gZnVuY3Rpb24oJGZpZWxkLCBpc05ldyA9IGZhbHNlKSB7XG4gICAgICBsZXQgZmllbGQgPSB7fTtcbiAgICAgIGlmICgkZmllbGQgaW5zdGFuY2VvZiBqUXVlcnkpIHtcbiAgICAgICAgbGV0IGZpZWxkRGF0YSA9ICRmaWVsZC5kYXRhKCduZXdGaWVsZERhdGEnKTtcbiAgICAgICAgaWYgKGZpZWxkRGF0YSkge1xuICAgICAgICAgIGZpZWxkID0gZmllbGREYXRhLmF0dHJzO1xuICAgICAgICAgIGZpZWxkLmxhYmVsID0gZmllbGREYXRhLmxhYmVsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBhdHRycyA9ICRmaWVsZFswXS5hdHRyaWJ1dGVzO1xuICAgICAgICAgIGlmICghaXNOZXcpIHtcbiAgICAgICAgICAgIGZpZWxkLnZhbHVlcyA9ICRmaWVsZC5jaGlsZHJlbigpLm1hcCgoaW5kZXgsIGVsZW0pID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogJChlbGVtKS50ZXh0KCksXG4gICAgICAgICAgICAgICAgdmFsdWU6ICQoZWxlbSkuYXR0cigndmFsdWUnKSxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogQm9vbGVhbigkKGVsZW0pLmF0dHIoJ3NlbGVjdGVkJykpXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3IgKGxldCBpID0gYXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGZpZWxkW2F0dHJzW2ldLm5hbWVdID0gYXR0cnNbaV0udmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaWVsZCA9IE9iamVjdC5hc3NpZ24oe30sICRmaWVsZCk7XG4gICAgICB9XG5cbiAgICAgIGZpZWxkLm5hbWUgPSBpc05ldyA/IG5hbWVBdHRyKGZpZWxkKSA6ICggZmllbGQubmFtZSB8fCBuYW1lQXR0cihmaWVsZCkgKTtcblxuICAgICAgaWYgKGlzTmV3ICYmIHV0aWxzLmluQXJyYXkoZmllbGQudHlwZSwgWyd0ZXh0JywgJ251bWJlcicsICdmaWxlJywgJ3NlbGVjdCcsICd0ZXh0YXJlYSddKSkge1xuICAgICAgICBmaWVsZC5jbGFzc05hbWUgPSAnZm9ybS1jb250cm9sJzsgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpZWxkLmNsYXNzTmFtZSA9IGZpZWxkLmNsYXNzIHx8IGZpZWxkLmNsYXNzTmFtZTsgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICAgIH1cblxuICAgICAgbGV0IG1hdGNoID0gLyg/Ol58XFxzKWJ0bi0oLio/KSg/Olxcc3wkKS9nLmV4ZWMoZmllbGQuY2xhc3NOYW1lKTtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICBmaWVsZC5zdHlsZSA9IG1hdGNoWzFdO1xuICAgICAgfVxuXG4gICAgICB1dGlscy5lc2NhcGVBdHRycyhmaWVsZCk7XG5cbiAgICAgIGFwcGVuZE5ld0ZpZWxkKGZpZWxkLCBpc05ldyk7XG4gICAgICBpZiAoaXNOZXcpIHtcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChmb3JtQnVpbGRlci5ldmVudHMuZmllbGRBZGRlZCk7XG4gICAgICB9XG4gICAgICAkc3RhZ2VXcmFwLnJlbW92ZUNsYXNzKCdlbXB0eScpO1xuICAgIH07XG5cbiAgICAvLyBQYXJzZSBzYXZlZCBYTUwgdGVtcGxhdGUgZGF0YVxuICAgIGxldCBsb2FkRmllbGRzID0gZnVuY3Rpb24oKSB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBmb3JtQnVpbGRlci5mb3JtRGF0YTtcbiAgICAgIGlmIChmb3JtRGF0YSAmJiBmb3JtRGF0YS5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHByZXBGaWVsZFZhcnMoZm9ybURhdGFbaV0pO1xuICAgICAgICB9XG4gICAgICAgICRzdGFnZVdyYXAucmVtb3ZlQ2xhc3MoJ2VtcHR5Jyk7XG4gICAgICB9IGVsc2UgaWYgKG9wdHMuZGVmYXVsdEZpZWxkcyAmJiBvcHRzLmRlZmF1bHRGaWVsZHMubGVuZ3RoKSB7XG4gICAgICAgIC8vIExvYWQgZGVmYXVsdCBmaWVsZHMgaWYgbm9uZSBhcmUgc2V0XG4gICAgICAgIG9wdHMuZGVmYXVsdEZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHByZXBGaWVsZFZhcnMoZmllbGQpKTtcbiAgICAgICAgJHN0YWdlV3JhcC5yZW1vdmVDbGFzcygnZW1wdHknKTtcbiAgICAgIH0gZWxzZSBpZiAoIW9wdHMucHJlcGVuZCAmJiAhb3B0cy5hcHBlbmQpIHtcbiAgICAgICAgJHN0YWdlV3JhcC5hZGRDbGFzcygnZW1wdHknKVxuICAgICAgICAuYXR0cignZGF0YS1jb250ZW50Jywgb3B0cy5tZXNzYWdlcy5nZXRTdGFydGVkKTtcbiAgICAgIH1cbiAgICAgIF9oZWxwZXJzLnNhdmUoKTtcblxuICAgICAgbGV0ICRmaWVsZHMgPSAkKCdsaS5mb3JtLWZpZWxkOm5vdCguZGlzYWJsZWQpJywgJHNvcnRhYmxlRmllbGRzKTtcblxuICAgICAgJGZpZWxkcy5lYWNoKGkgPT4gX2hlbHBlcnMudXBkYXRlUHJldmlldygkKCRmaWVsZHNbaV0pKSk7XG5cbiAgICAgIG5vbkVkaXRhYmxlRmllbGRzKCk7XG4gICAgfTtcblxuICAgIC8vIGNhbGxiYWNrIHRvIHRyYWNrIGRpc2FibGVkIHRvb2x0aXBzXG4gICAgJHNvcnRhYmxlRmllbGRzLm9uKCdtb3VzZW1vdmUnLCAnbGkuZGlzYWJsZWQnLCBlID0+IHtcbiAgICAgICQoJy5mcm1iLXR0JywgdGhpcykuY3NzKHtcbiAgICAgICAgbGVmdDogZS5vZmZzZXRYIC0gMTYsXG4gICAgICAgIHRvcDogZS5vZmZzZXRZIC0gMzRcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gY2FsbGJhY2sgdG8gY2FsbCBkaXNhYmxlZCB0b29sdGlwc1xuICAgICRzb3J0YWJsZUZpZWxkcy5vbignbW91c2VlbnRlcicsICdsaS5kaXNhYmxlZCcsIGUgPT5cbiAgICAgIF9oZWxwZXJzLmRpc2FibGVkVFQuYWRkKCQodGhpcykpKTtcblxuICAgIC8vIGNhbGxiYWNrIHRvIGNhbGwgZGlzYWJsZWQgdG9vbHRpcHNcbiAgICAkc29ydGFibGVGaWVsZHMub24oJ21vdXNlbGVhdmUnLCAnbGkuZGlzYWJsZWQnLCBlID0+XG4gICAgICBfaGVscGVycy5kaXNhYmxlZFRULnJlbW92ZSgkKHRoaXMpKSk7XG5cbiAgICBsZXQgbmFtZUF0dHIgPSBmdW5jdGlvbihmaWVsZCkge1xuICAgICAgbGV0IGVwb2NoID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICByZXR1cm4gZmllbGQudHlwZSArICctJyArIGVwb2NoO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGQgZGF0YSBmb3IgZmllbGQgd2l0aCBvcHRpb25zIFtzZWxlY3QsIGNoZWNrYm94LWdyb3VwLCByYWRpby1ncm91cF1cbiAgICAgKlxuICAgICAqIEB0b2RvICAgcmVmYWN0b3IgdGhpcyBuYXN0eSB+Y3JhcH4gY29kZSwgaXRzIGFjdHVhbGx5IHBhaW5mdWwgdG8gbG9vayBhdFxuICAgICAqIEBwYXJhbSAge09iamVjdH0gdmFsdWVzXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBmaWVsZCBvcHRpb25zIG1hcmt1cFxuICAgICAqL1xuICAgIGxldCBmaWVsZE9wdGlvbnMgPSBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICAgIGxldCBvcHRpb25BY3Rpb25zID0gW1xuICAgICAgICAgIHV0aWxzLm1hcmt1cCgnYScsIG9wdHMubWVzc2FnZXMuYWRkT3B0aW9uLCB7Y2xhc3NOYW1lOiAnYWRkIGFkZC1vcHQnfSlcbiAgICAgICAgXTtcbiAgICAgIGxldCBmaWVsZE9wdGlvbnMgPSBbXG4gICAgICAgIGA8bGFiZWwgY2xhc3M9XCJmYWxzZS1sYWJlbFwiPiR7b3B0cy5tZXNzYWdlcy5zZWxlY3RPcHRpb25zfTwvbGFiZWw+YFxuICAgICAgXTtcbiAgICAgIGNvbnN0IGlzTXVsdGlwbGUgPSB2YWx1ZXMubXVsdGlwbGUgfHwgKHZhbHVlcy50eXBlID09PSAnY2hlY2tib3gtZ3JvdXAnKTtcblxuICAgICAgaWYgKCF2YWx1ZXMudmFsdWVzIHx8ICF2YWx1ZXMudmFsdWVzLmxlbmd0aCkge1xuICAgICAgICB2YWx1ZXMudmFsdWVzID0gWzEsIDIsIDNdLm1hcChmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgIGxldCBsYWJlbCA9IGAke29wdHMubWVzc2FnZXMub3B0aW9ufSAke2luZGV4fWA7XG4gICAgICAgICAgbGV0IG9wdGlvbiA9IHtcbiAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgICAgIHZhbHVlOiB1dGlscy5oeXBoZW5DYXNlKGxhYmVsKVxuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIG9wdGlvbjtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhbHVlcy52YWx1ZXNbMF0uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZW5zdXJlIG9wdGlvbiBkYXRhIGlzIGhhcyBhbGwgcmVxdWlyZWQga2V5c1xuICAgICAgICB2YWx1ZXMudmFsdWVzLmZvckVhY2gob3B0aW9uID0+IE9iamVjdC5hc3NpZ24oe30sIHtzZWxlY3RlZDogZmFsc2V9LCBvcHRpb24pKTtcbiAgICAgIH1cblxuICAgICAgZmllbGRPcHRpb25zLnB1c2goJzxkaXYgY2xhc3M9XCJzb3J0YWJsZS1vcHRpb25zLXdyYXBcIj4nKTtcblxuICAgICAgZmllbGRPcHRpb25zLnB1c2goJzxvbCBjbGFzcz1cInNvcnRhYmxlLW9wdGlvbnNcIj4nKTtcbiAgICAgIHV0aWxzLmZvckVhY2godmFsdWVzLnZhbHVlcywgKGkpID0+IHtcbiAgICAgICAgZmllbGRPcHRpb25zLnB1c2goc2VsZWN0RmllbGRPcHRpb25zKHZhbHVlcy5uYW1lLCB2YWx1ZXMudmFsdWVzW2ldLCBpc011bHRpcGxlKSk7XG4gICAgICB9KTtcbiAgICAgIGZpZWxkT3B0aW9ucy5wdXNoKCc8L29sPicpO1xuICAgICAgZmllbGRPcHRpb25zLnB1c2godXRpbHMubWFya3VwKCdkaXYnLCBvcHRpb25BY3Rpb25zLCB7Y2xhc3NOYW1lOiAnb3B0aW9uLWFjdGlvbnMnfSkub3V0ZXJIVE1MKTtcbiAgICAgIGZpZWxkT3B0aW9ucy5wdXNoKCc8L2Rpdj4nKTtcblxuICAgICAgcmV0dXJuIHV0aWxzLm1hcmt1cCgnZGl2JywgZmllbGRPcHRpb25zLmpvaW4oJycpLCB7Y2xhc3NOYW1lOiAnZm9ybS1ncm91cCBmaWVsZC1vcHRpb25zJ30pLm91dGVySFRNTDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQnVpbGQgdGhlIGVkaXRhYmxlIHByb3BlcnRpZXMgZm9yIHRoZSBmaWVsZFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gdmFsdWVzIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGZvciBhZHZhbmNlZCBmaWVsZHNcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICBtYXJrdXAgZm9yIGFkdmFuY2VkIGZpZWxkc1xuICAgICAqL1xuICAgIGxldCBhZHZGaWVsZHMgPSBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICAgIGxldCBhZHZGaWVsZHMgPSBbXTtcbiAgICAgIGxldCBrZXk7XG4gICAgICBsZXQgb3B0aW9uRmllbGRzID0gW1xuICAgICAgICAnc2VsZWN0JyxcbiAgICAgICAgJ2NoZWNrYm94LWdyb3VwJyxcbiAgICAgICAgJ3JhZGlvLWdyb3VwJ1xuICAgICAgXTtcbiAgICAgIGxldCBpc09wdGlvbkZpZWxkID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKG9wdGlvbkZpZWxkcy5pbmRleE9mKHZhbHVlcy50eXBlKSAhPT0gLTEpO1xuICAgICAgfSkoKTtcbiAgICAgIGxldCB2YWx1ZUZpZWxkID0gIXV0aWxzLmluQXJyYXkodmFsdWVzLnR5cGUsIFsnaGVhZGVyJywgJ3BhcmFncmFwaCcsICdmaWxlJ10uY29uY2F0KG9wdGlvbkZpZWxkcykpO1xuICAgICAgbGV0IHJvbGVzID0gdmFsdWVzLnJvbGUgIT09IHVuZGVmaW5lZCA/IHZhbHVlcy5yb2xlLnNwbGl0KCcsJykgOiBbXTtcblxuICAgICAgYWR2RmllbGRzLnB1c2gocmVxdWlyZWRGaWVsZCh2YWx1ZXMpKTtcblxuICAgICAgaWYgKHZhbHVlcy50eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgIGFkdkZpZWxkcy5wdXNoKGJvb2xBdHRyaWJ1dGUoJ3RvZ2dsZScsIHZhbHVlcywge2ZpcnN0OiBvcHRzLm1lc3NhZ2VzLnRvZ2dsZX0pKTtcbiAgICAgIH1cblxuICAgICAgYWR2RmllbGRzLnB1c2godGV4dEF0dHJpYnV0ZSgnbGFiZWwnLCB2YWx1ZXMpKTtcblxuICAgICAgdmFsdWVzLnNpemUgPSB2YWx1ZXMuc2l6ZSB8fCAnbSc7XG4gICAgICB2YWx1ZXMuc3R5bGUgPSB2YWx1ZXMuc3R5bGUgfHwgJ2RlZmF1bHQnO1xuXG4gICAgICAvLyBIZWxwIFRleHQgLyBEZXNjcmlwdGlvbiBGaWVsZFxuICAgICAgaWYgKCF1dGlscy5pbkFycmF5KHZhbHVlcy50eXBlLCBbJ2hlYWRlcicsICdwYXJhZ3JhcGgnLCAnYnV0dG9uJ10pKSB7XG4gICAgICAgIGFkdkZpZWxkcy5wdXNoKHRleHRBdHRyaWJ1dGUoJ2Rlc2NyaXB0aW9uJywgdmFsdWVzKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRzLm1lc3NhZ2VzLnN1YnR5cGVzW3ZhbHVlcy50eXBlXSkge1xuICAgICAgICBsZXQgb3B0aW9uRGF0YSA9IG9wdHMubWVzc2FnZXMuc3VidHlwZXNbdmFsdWVzLnR5cGVdO1xuICAgICAgICBhZHZGaWVsZHMucHVzaChzZWxlY3RBdHRyaWJ1dGUoJ3N1YnR5cGUnLCB2YWx1ZXMsIG9wdGlvbkRhdGEpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHZhbHVlcy50eXBlID09PSAnYnV0dG9uJykge1xuICAgICAgICBhZHZGaWVsZHMucHVzaChidG5TdHlsZXModmFsdWVzLnN0eWxlLCB2YWx1ZXMudHlwZSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAodmFsdWVzLnR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGFkdkZpZWxkcy5wdXNoKG51bWJlckF0dHJpYnV0ZSgnbWluJywgdmFsdWVzKSk7XG4gICAgICAgIGFkdkZpZWxkcy5wdXNoKG51bWJlckF0dHJpYnV0ZSgnbWF4JywgdmFsdWVzKSk7XG4gICAgICAgIGFkdkZpZWxkcy5wdXNoKG51bWJlckF0dHJpYnV0ZSgnc3RlcCcsIHZhbHVlcykpO1xuICAgICAgfVxuXG4gICAgICAvLyBQbGFjZWhvbGRlclxuICAgICAgYWR2RmllbGRzLnB1c2godGV4dEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCB2YWx1ZXMpKTtcblxuICAgICAgLy8gVGV4dEFyZWEgUm93cyBBdHRyaWJ1dGVcbiAgICAgIGlmICh2YWx1ZXMudHlwZSA9PT0gJ3RleHRhcmVhJykge1xuICAgICAgICBhZHZGaWVsZHMucHVzaChudW1iZXJBdHRyaWJ1dGUoJ3Jvd3MnLCB2YWx1ZXMpKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xhc3NcbiAgICAgIGFkdkZpZWxkcy5wdXNoKHRleHRBdHRyaWJ1dGUoJ2NsYXNzTmFtZScsIHZhbHVlcykpO1xuXG4gICAgICBhZHZGaWVsZHMucHVzaCh0ZXh0QXR0cmlidXRlKCduYW1lJywgdmFsdWVzKSk7XG5cbiAgICAgIGlmICh2YWx1ZUZpZWxkKSB7XG4gICAgICAgIGFkdkZpZWxkcy5wdXNoKHRleHRBdHRyaWJ1dGUoJ3ZhbHVlJywgdmFsdWVzKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWx1ZXMudHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgIGxldCBsYWJlbHMgPSB7XG4gICAgICAgICAgZmlyc3Q6IG9wdHMubWVzc2FnZXMubXVsdGlwbGVGaWxlcyxcbiAgICAgICAgICBzZWNvbmQ6IG9wdHMubWVzc2FnZXMuYWxsb3dNdWx0aXBsZUZpbGVzXG4gICAgICAgIH07XG4gICAgICAgIGFkdkZpZWxkcy5wdXNoKGJvb2xBdHRyaWJ1dGUoJ211bHRpcGxlJywgdmFsdWVzLCBsYWJlbHMpKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJvbGVzRGlzcGxheSA9IHZhbHVlcy5yb2xlICE9PSB1bmRlZmluZWQgPyAnc3R5bGU9XCJkaXNwbGF5OmJsb2NrXCInIDogJyc7XG4gICAgICBsZXQgYXZhaWxhYmxlUm9sZXMgPSBbXG4gICAgICAgIGA8ZGl2IGNsYXNzPVwiYXZhaWxhYmxlLXJvbGVzXCIgJHtyb2xlc0Rpc3BsYXl9PmBcbiAgICAgIF07XG4gICAgICBmb3IgKGtleSBpbiBvcHRzLnJvbGVzKSB7XG4gICAgICAgIGlmIChvcHRzLnJvbGVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBsZXQgY2hlY2tlZCA9IHV0aWxzLmluQXJyYXkoa2V5LCByb2xlcykgPyAnY2hlY2tlZCcgOiAnJztcbiAgICAgICAgICBsZXQgcm9sZUlkID0gYGZsZC0ke2xhc3RJRH0tcm9sZXMtJHtrZXl9YDtcbiAgICAgICAgICBhdmFpbGFibGVSb2xlcy5wdXNoKGA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cInJvbGVzW11cIiB2YWx1ZT1cIiR7a2V5fVwiIGlkPVwiJHtyb2xlSWR9XCIgJHtjaGVja2VkfSBjbGFzcz1cInJvbGVzLWZpZWxkXCIgLz4gPGxhYmVsIGZvcj1cIiR7cm9sZUlkfVwiPiR7b3B0cy5yb2xlc1trZXldfTwvbGFiZWw+PGJyLz5gKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBhdmFpbGFibGVSb2xlcy5wdXNoKCc8L2Rpdj4nKTtcblxuICAgICAgbGV0IGFjY2Vzc0xhYmVscyA9IHtmaXJzdDogb3B0cy5tZXNzYWdlcy5yb2xlcywgc2Vjb25kOiBvcHRzLm1lc3NhZ2VzLmxpbWl0Um9sZSwgY29udGVudDogYXZhaWxhYmxlUm9sZXMuam9pbignJyl9O1xuXG4gICAgICBhZHZGaWVsZHMucHVzaChib29sQXR0cmlidXRlKCdhY2Nlc3MnLCB2YWx1ZXMsIGFjY2Vzc0xhYmVscykpO1xuXG4gICAgICBpZiAodmFsdWVzLnR5cGUgPT09ICdjaGVja2JveC1ncm91cCcgfHwgdmFsdWVzLnR5cGUgPT09ICdyYWRpby1ncm91cCcpIHtcbiAgICAgICAgYWR2RmllbGRzLnB1c2goYm9vbEF0dHJpYnV0ZSgnb3RoZXInLCB2YWx1ZXMsIHtmaXJzdDogb3B0cy5tZXNzYWdlcy5lbmFibGVPdGhlciwgc2Vjb25kOiBvcHRzLm1lc3NhZ2VzLmVuYWJsZU90aGVyTXNnfSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAodmFsdWVzLnR5cGUgPT09ICdzZWxlY3QnKSB7XG4gICAgICAgIGFkdkZpZWxkcy5wdXNoKGJvb2xBdHRyaWJ1dGUoJ211bHRpcGxlJywgdmFsdWVzLCB7Zmlyc3Q6ICcgJywgc2Vjb25kOiBvcHRzLm1lc3NhZ2VzLnNlbGVjdGlvbnNNZXNzYWdlfSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNPcHRpb25GaWVsZCkge1xuICAgICAgICBhZHZGaWVsZHMucHVzaChmaWVsZE9wdGlvbnModmFsdWVzKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh1dGlscy5pbkFycmF5KHZhbHVlcy50eXBlLCBbJ3RleHQnLCAndGV4dGFyZWEnXSkpIHtcbiAgICAgICAgYWR2RmllbGRzLnB1c2gobnVtYmVyQXR0cmlidXRlKCdtYXhsZW5ndGgnLCB2YWx1ZXMpKTtcbiAgICAgIH1cblxuICAgICAgLy8gQXBwZW5kIGN1c3RvbSBhdHRyaWJ1dGVzIGFzIGRlZmluZWQgaW4gdHlwZVVzZXJBdHRycyBvcHRpb25cbiAgICAgIGlmIChvcHRzLnR5cGVVc2VyQXR0cnNbdmFsdWVzLnR5cGVdKSB7XG4gICAgICAgIGFkdkZpZWxkcy5wdXNoKHByb2Nlc3NUeXBlVXNlckF0dHJzKG9wdHMudHlwZVVzZXJBdHRyc1t2YWx1ZXMudHlwZV0sIHZhbHVlcykpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYWR2RmllbGRzLmpvaW4oJycpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgdHlwZVVzZXJBdHRyc1xuICAgICAqIEBwYXJhbSAge09iamVjdH0gdHlwZVVzZXJBdHRyIG9wdGlvblxuICAgICAqIEBwYXJhbSAge09iamVjdH0gdmFsdWVzICAgICAgIGZpZWxkIGF0dHJpYnV0ZXNcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICAgICBtYXJrdXAgZm9yIGN1c3RvbSB1c2VyIGF0dHJpYnV0ZXNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwcm9jZXNzVHlwZVVzZXJBdHRycyh0eXBlVXNlckF0dHIsIHZhbHVlcykge1xuICAgICAgbGV0IGFkdkZpZWxkID0gW107XG5cbiAgICAgIGZvciAobGV0IGF0dHJpYnV0ZSBpbiB0eXBlVXNlckF0dHIpIHtcbiAgICAgICAgaWYgKHR5cGVVc2VyQXR0ci5oYXNPd25Qcm9wZXJ0eShhdHRyaWJ1dGUpKSB7XG4gICAgICAgICAgbGV0IG9yaWcgPSBvcHRzLm1lc3NhZ2VzW2F0dHJpYnV0ZV07XG4gICAgICAgICAgbGV0IG9yaWdWYWx1ZSA9IHR5cGVVc2VyQXR0clthdHRyaWJ1dGVdLnZhbHVlO1xuICAgICAgICAgIHR5cGVVc2VyQXR0clthdHRyaWJ1dGVdLnZhbHVlID0gdmFsdWVzW2F0dHJpYnV0ZV0gfHwgdHlwZVVzZXJBdHRyW2F0dHJpYnV0ZV0udmFsdWUgfHwgJyc7XG5cbiAgICAgICAgICBpZiAodHlwZVVzZXJBdHRyW2F0dHJpYnV0ZV0ubGFiZWwpIHtcbiAgICAgICAgICAgIG9wdHMubWVzc2FnZXNbYXR0cmlidXRlXSA9IHR5cGVVc2VyQXR0clthdHRyaWJ1dGVdLmxhYmVsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh0eXBlVXNlckF0dHJbYXR0cmlidXRlXS5vcHRpb25zKSB7XG4gICAgICAgICAgICBhZHZGaWVsZC5wdXNoKHNlbGVjdFVzZXJBdHRycyhhdHRyaWJ1dGUsIHR5cGVVc2VyQXR0clthdHRyaWJ1dGVdKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFkdkZpZWxkLnB1c2goaW5wdXRVc2VyQXR0cnMoYXR0cmlidXRlLCB0eXBlVXNlckF0dHJbYXR0cmlidXRlXSkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG9wdHMubWVzc2FnZXNbYXR0cmlidXRlXSA9IG9yaWc7XG4gICAgICAgICAgdHlwZVVzZXJBdHRyW2F0dHJpYnV0ZV0udmFsdWUgPSBvcmlnVmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFkdkZpZWxkLmpvaW4oJycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRleHQgaW5wdXQgdmFsdWUgZm9yIGF0dHJpYnV0ZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gYXR0cnMgYWxzbyBrbm93biBhcyB2YWx1ZXNcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgIGlucHV0IG1hcmt1cFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlucHV0VXNlckF0dHJzKG5hbWUsIGF0dHJzKSB7XG4gICAgICBsZXQgdGV4dEF0dHJzID0ge1xuICAgICAgICAgIGlkOiBuYW1lICsgJy0nICsgbGFzdElELFxuICAgICAgICAgIHRpdGxlOiBhdHRycy5kZXNjcmlwdGlvbiB8fCBhdHRycy5sYWJlbCB8fCBuYW1lLnRvVXBwZXJDYXNlKCksXG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICB0eXBlOiBhdHRycy50eXBlIHx8ICd0ZXh0JyxcbiAgICAgICAgICBjbGFzc05hbWU6IFtgZmxkLSR7bmFtZX1gXVxuICAgICAgICB9O1xuICAgICAgbGV0IGxhYmVsID0gYDxsYWJlbCBmb3I9XCIke3RleHRBdHRycy5pZH1cIj4ke29wdHMubWVzc2FnZXNbbmFtZV19PC9sYWJlbD5gO1xuXG4gICAgICBpZiAoIXV0aWxzLmluQXJyYXkodGV4dEF0dHJzLnR5cGUsIFsnY2hlY2tib3gnLCAnY2hlY2tib3gtZ3JvdXAnLCAncmFkaW8tZ3JvdXAnXSkpIHtcbiAgICAgICAgdGV4dEF0dHJzLmNsYXNzTmFtZS5wdXNoKCdmb3JtLWNvbnRyb2wnKTtcbiAgICAgIH1cblxuICAgICAgdGV4dEF0dHJzID0gT2JqZWN0LmFzc2lnbih7fSwgYXR0cnMsIHRleHRBdHRycyk7XG4gICAgICBsZXQgdGV4dElucHV0ID0gYDxpbnB1dCAke3V0aWxzLmF0dHJTdHJpbmcodGV4dEF0dHJzKX0+YDtcbiAgICAgIGxldCBpbnB1dFdyYXAgPSBgPGRpdiBjbGFzcz1cImlucHV0LXdyYXBcIj4ke3RleHRJbnB1dH08L2Rpdj5gO1xuICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCAke25hbWV9LXdyYXBcIj4ke2xhYmVsfSR7aW5wdXRXcmFwfTwvZGl2PmA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VsZWN0IGlucHV0IGZvciBtdWx0aXBsZSBjaG9pY2UgdXNlciBhdHRyaWJ1dGVzXG4gICAgICogQHRvZG8gIHJlcGxhY2Ugd2l0aCBzZWxlY3RBdHRyXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25zXG4gICAgICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgIHNlbGVjdCBtYXJrdXBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzZWxlY3RVc2VyQXR0cnMobmFtZSwgb3B0aW9ucykge1xuICAgICAgbGV0IG9wdGlzID0gT2JqZWN0LmtleXMob3B0aW9ucy5vcHRpb25zKS5tYXAodmFsID0+IHtcbiAgICAgICAgbGV0IGF0dHJzID0ge3ZhbHVlOiB2YWx9O1xuICAgICAgICBpZiAodmFsID09PSBvcHRpb25zLnZhbHVlKSB7XG4gICAgICAgICAgYXR0cnMuc2VsZWN0ZWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgPG9wdGlvbiAke3V0aWxzLmF0dHJTdHJpbmcoYXR0cnMpfT4ke29wdGlvbnMub3B0aW9uc1t2YWxdfTwvb3B0aW9uPmA7XG4gICAgICB9KTtcbiAgICAgIGxldCBzZWxlY3RBdHRycyA9IHtcbiAgICAgICAgaWQ6IG5hbWUgKyAnLScgKyBsYXN0SUQsXG4gICAgICAgIHRpdGxlOiBvcHRpb25zLmRlc2NyaXB0aW9uIHx8IG9wdGlvbnMubGFiZWwgfHwgbmFtZS50b1VwcGVyQ2FzZSgpLFxuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBjbGFzc05hbWU6IGBmbGQtJHtuYW1lfSBmb3JtLWNvbnRyb2xgXG4gICAgICB9O1xuICAgICAgbGV0IGxhYmVsID0gYDxsYWJlbCBmb3I9XCIke3NlbGVjdEF0dHJzLmlkfVwiPiR7b3B0cy5tZXNzYWdlc1tuYW1lXX08L2xhYmVsPmA7XG5cbiAgICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZpbHRlcihwcm9wID0+IHtcbiAgICAgICAgcmV0dXJuICF1dGlscy5pbkFycmF5KHByb3AsIFsndmFsdWUnLCAnb3B0aW9ucycsICdsYWJlbCddKTtcbiAgICAgIH0pLmZvckVhY2goZnVuY3Rpb24oYXR0cikge1xuICAgICAgICBzZWxlY3RBdHRyc1thdHRyXSA9IG9wdGlvbnNbYXR0cl07XG4gICAgICB9KTtcblxuICAgICAgbGV0IHNlbGVjdCA9IGA8c2VsZWN0ICR7dXRpbHMuYXR0clN0cmluZyhzZWxlY3RBdHRycyl9PiR7b3B0aXMuam9pbignJyl9PC9zZWxlY3Q+YDtcbiAgICAgIGxldCBpbnB1dFdyYXAgPSBgPGRpdiBjbGFzcz1cImlucHV0LXdyYXBcIj4ke3NlbGVjdH08L2Rpdj5gO1xuICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCAke25hbWV9LXdyYXBcIj4ke2xhYmVsfSR7aW5wdXRXcmFwfTwvZGl2PmA7XG4gICAgfVxuXG4gICAgbGV0IGJvb2xBdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZXMsIGxhYmVscykge1xuICAgICAgaWYgKG9wdHMudHlwZVVzZXJBdHRyc1t2YWx1ZXMudHlwZV0gJiYgb3B0cy50eXBlVXNlckF0dHJzW3ZhbHVlcy50eXBlXVtuYW1lXSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGxldCBsYWJlbCA9ICh0eHQpID0+IHtcbiAgICAgICAgcmV0dXJuIGA8bGFiZWwgZm9yPVwiJHtuYW1lfS0ke2xhc3RJRH1cIj4ke3R4dH08L2xhYmVsPmA7XG4gICAgICB9O1xuICAgICAgbGV0IGNoZWNrZWQgPSAodmFsdWVzW25hbWVdICE9PSB1bmRlZmluZWQgPyAnY2hlY2tlZCcgOiAnJyk7XG4gICAgICBsZXQgaW5wdXQgPSBgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwiZmxkLSR7bmFtZX1cIiBuYW1lPVwiJHtuYW1lfVwiIHZhbHVlPVwidHJ1ZVwiICR7Y2hlY2tlZH0gaWQ9XCIke25hbWV9LSR7bGFzdElEfVwiLz4gYDtcbiAgICAgIGxldCBsZWZ0ID0gW107XG4gICAgICBsZXQgcmlnaHQgPSBbXG4gICAgICAgIGlucHV0XG4gICAgICBdO1xuXG4gICAgICBpZiAobGFiZWxzLmZpcnN0KSB7XG4gICAgICAgIGxlZnQudW5zaGlmdChsYWJlbChsYWJlbHMuZmlyc3QpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGxhYmVscy5zZWNvbmQpIHtcbiAgICAgICAgcmlnaHQucHVzaChsYWJlbChsYWJlbHMuc2Vjb25kKSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChsYWJlbHMuY29udGVudCkge1xuICAgICAgICByaWdodC5wdXNoKGxhYmVscy5jb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgcmlnaHQudW5zaGlmdCgnPGRpdiBjbGFzcz1cImlucHV0LXdyYXBcIj4nKTtcbiAgICAgIHJpZ2h0LnB1c2goJzwvZGl2PicpO1xuXG4gICAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwICR7bmFtZX0td3JhcFwiPiR7bGVmdC5jb25jYXQocmlnaHQpLmpvaW4oJycpfTwvZGl2PmA7XG4gICAgfTtcblxuICAgIGxldCBidG5TdHlsZXMgPSBmdW5jdGlvbihzdHlsZSwgdHlwZSkge1xuICAgICAgbGV0IHRhZ3MgPSB7XG4gICAgICAgICAgYnV0dG9uOiAnYnRuJ1xuICAgICAgICB9O1xuICAgICAgICBsZXQgc3R5bGVzID0gb3B0cy5tZXNzYWdlcy5zdHlsZXNbdGFnc1t0eXBlXV07XG4gICAgICAgIGxldCBzdHlsZUZpZWxkID0gJyc7XG5cbiAgICAgIGlmIChzdHlsZXMpIHtcbiAgICAgICAgbGV0IHN0eWxlTGFiZWwgPSBgPGxhYmVsPiR7b3B0cy5tZXNzYWdlcy5zdHlsZX08L2xhYmVsPmA7XG4gICAgICAgIHN0eWxlRmllbGQgKz0gYDxpbnB1dCB2YWx1ZT1cIiR7c3R5bGV9XCIgbmFtZT1cInN0eWxlXCIgdHlwZT1cImhpZGRlblwiIGNsYXNzPVwiYnRuLXN0eWxlXCI+YDtcbiAgICAgICAgc3R5bGVGaWVsZCArPSAnPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiIHJvbGU9XCJncm91cFwiPic7XG5cbiAgICAgICAgT2JqZWN0LmtleXMob3B0cy5tZXNzYWdlcy5zdHlsZXNbdGFnc1t0eXBlXV0pLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgIGxldCBhY3RpdmUgPSBzdHlsZSA9PT0gZWxlbWVudCA/ICdhY3RpdmUnIDogJyc7XG4gICAgICAgICAgc3R5bGVGaWVsZCArPSBgPGJ1dHRvbiB2YWx1ZT1cIiR7ZWxlbWVudH1cIiB0eXBlPVwiJHt0eXBlfVwiIGNsYXNzPVwiJHthY3RpdmV9IGJ0bi14cyAke3RhZ3NbdHlwZV19ICR7dGFnc1t0eXBlXX0tJHtlbGVtZW50fVwiPiR7b3B0cy5tZXNzYWdlcy5zdHlsZXNbdGFnc1t0eXBlXV1bZWxlbWVudF19PC9idXR0b24+YDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc3R5bGVGaWVsZCArPSAnPC9kaXY+JztcblxuICAgICAgICBzdHlsZUZpZWxkID0gYDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIHN0eWxlLXdyYXBcIj4ke3N0eWxlTGFiZWx9ICR7c3R5bGVGaWVsZH08L2Rpdj5gO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3R5bGVGaWVsZDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkIGEgbnVtYmVyIGF0dHJpYnV0ZSB0byBhIGZpZWxkLlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gYXR0cmlidXRlXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSB2YWx1ZXNcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IG1hcmt1cCBmb3IgbnVtYmVyIGF0dHJpYnV0ZVxuICAgICAqL1xuICAgIGxldCBudW1iZXJBdHRyaWJ1dGUgPSBmdW5jdGlvbihhdHRyaWJ1dGUsIHZhbHVlcykge1xuICAgICAgaWYgKG9wdHMudHlwZVVzZXJBdHRyc1t2YWx1ZXMudHlwZV0gJiYgb3B0cy50eXBlVXNlckF0dHJzW3ZhbHVlcy50eXBlXVthdHRyaWJ1dGVdKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IGF0dHJWYWwgPSB2YWx1ZXNbYXR0cmlidXRlXTtcbiAgICAgIGxldCBhdHRyTGFiZWwgPSBvcHRzLm1lc3NhZ2VzW2F0dHJpYnV0ZV0gfHwgYXR0cmlidXRlO1xuICAgICAgbGV0IHBsYWNlaG9sZGVyID0gb3B0cy5tZXNzYWdlcy5wbGFjZWhvbGRlcnNbYXR0cmlidXRlXTtcbiAgICAgIGxldCBpbnB1dENvbmZpZyA9IHtcbiAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgIHZhbHVlOiBhdHRyVmFsLFxuICAgICAgICBuYW1lOiBhdHRyaWJ1dGUsXG4gICAgICAgIG1pbjogJzAnLFxuICAgICAgICBwbGFjZWhvbGRlcjogcGxhY2Vob2xkZXIsXG4gICAgICAgIGNsYXNzTmFtZTogYGZsZC0ke2F0dHJpYnV0ZX0gZm9ybS1jb250cm9sYCxcbiAgICAgICAgaWQ6IGAke2F0dHJpYnV0ZX0tJHtsYXN0SUR9YFxuICAgICAgfTtcbiAgICAgIGxldCBudW1iZXJBdHRyaWJ1dGUgPSBgPGlucHV0ICR7dXRpbHMuYXR0clN0cmluZyh1dGlscy50cmltT2JqKGlucHV0Q29uZmlnKSl9PmA7XG4gICAgICBsZXQgaW5wdXRXcmFwID0gYDxkaXYgY2xhc3M9XCJpbnB1dC13cmFwXCI+JHtudW1iZXJBdHRyaWJ1dGV9PC9kaXY+YDtcblxuICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCAke2F0dHJpYnV0ZX0td3JhcFwiPjxsYWJlbCBmb3I9XCIke2lucHV0Q29uZmlnLmlkfVwiPiR7YXR0ckxhYmVsfTwvbGFiZWw+ICR7aW5wdXRXcmFwfTwvZGl2PmA7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHNlbGVjdEF0dHJpYnV0ZVxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gYXR0cmlidXRlICBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gdmFsdWVzICAgICBha2EgYXR0cnNcbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gb3B0aW9uRGF0YSAgc2VsZWN0IGZpZWxkIG9wdGlvbiBkYXRhXG4gICAgICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgIHNlbGVjdCBpbnB1dCBtYWtydXBcbiAgICAgKi9cbiAgICBsZXQgc2VsZWN0QXR0cmlidXRlID0gZnVuY3Rpb24oYXR0cmlidXRlLCB2YWx1ZXMsIG9wdGlvbkRhdGEpIHtcbiAgICAgIGlmIChvcHRzLnR5cGVVc2VyQXR0cnNbdmFsdWVzLnR5cGVdICYmIG9wdHMudHlwZVVzZXJBdHRyc1t2YWx1ZXMudHlwZV1bYXR0cmlidXRlXSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsZXQgc2VsZWN0T3B0aW9ucyA9IG9wdGlvbkRhdGEubWFwKChvcHRpb24sIGkpID0+IHtcbiAgICAgICAgbGV0IG9wdGlvbkF0dHJzID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgbGFiZWw6IGAke29wdHMubWVzc2FnZXMub3B0aW9ufSAke2l9YCxcbiAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICAgIH0sIG9wdGlvbik7XG4gICAgICAgIGlmIChvcHRpb24udmFsdWUgPT09IHZhbHVlc1thdHRyaWJ1dGVdKSB7XG4gICAgICAgICAgb3B0aW9uQXR0cnMuc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgPG9wdGlvbiAke3V0aWxzLmF0dHJTdHJpbmcodXRpbHMudHJpbU9iaihvcHRpb25BdHRycykpfT4ke29wdGlvbkF0dHJzLmxhYmVsfTwvb3B0aW9uPmA7XG4gICAgICB9KTtcbiAgICAgIGxldCBzZWxlY3RBdHRycyA9IHtcbiAgICAgICAgICBpZDogYXR0cmlidXRlICsgJy0nICsgbGFzdElELFxuICAgICAgICAgIG5hbWU6IGF0dHJpYnV0ZSxcbiAgICAgICAgICBjbGFzc05hbWU6IGBmbGQtJHthdHRyaWJ1dGV9IGZvcm0tY29udHJvbGBcbiAgICAgICAgfTtcbiAgICAgIGxldCBsYWJlbCA9IGA8bGFiZWwgZm9yPVwiJHtzZWxlY3RBdHRycy5pZH1cIj4ke29wdHMubWVzc2FnZXNbYXR0cmlidXRlXSB8fCB1dGlscy5jYXBpdGFsaXplKGF0dHJpYnV0ZSl9PC9sYWJlbD5gO1xuICAgICAgbGV0IHNlbGVjdCA9IGA8c2VsZWN0ICR7dXRpbHMuYXR0clN0cmluZyhzZWxlY3RBdHRycyl9PiR7c2VsZWN0T3B0aW9ucy5qb2luKCcnKX08L3NlbGVjdD5gO1xuICAgICAgbGV0IGlucHV0V3JhcCA9IGA8ZGl2IGNsYXNzPVwiaW5wdXQtd3JhcFwiPiR7c2VsZWN0fTwvZGl2PmA7XG5cbiAgICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgJHtzZWxlY3RBdHRycy5uYW1lfS13cmFwXCI+JHtsYWJlbH0ke2lucHV0V3JhcH08L2Rpdj5gO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBzb21lIHRleHQgaW5wdXRzIGZvciBmaWVsZCBhdHRyaWJ1dGVzLCAqKndpbGwgYmUgcmVwbGFjZWQqKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gYXR0cmlidXRlXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSB2YWx1ZXNcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICovXG4gICAgbGV0IHRleHRBdHRyaWJ1dGUgPSBmdW5jdGlvbihhdHRyaWJ1dGUsIHZhbHVlcykge1xuICAgICAgaWYgKG9wdHMudHlwZVVzZXJBdHRyc1t2YWx1ZXMudHlwZV0gJiYgb3B0cy50eXBlVXNlckF0dHJzW3ZhbHVlcy50eXBlXVthdHRyaWJ1dGVdKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IHBsYWNlaG9sZGVyRmllbGRzID0gW1xuICAgICAgICAndGV4dCcsXG4gICAgICAgICd0ZXh0YXJlYScsXG4gICAgICAgICdzZWxlY3QnXG4gICAgICBdO1xuXG4gICAgICBsZXQgbm9OYW1lID0gW1xuICAgICAgICAnaGVhZGVyJ1xuICAgICAgXTtcblxuICAgICAgbGV0IHRleHRBcmVhID0gWydwYXJhZ3JhcGgnXTtcblxuICAgICAgbGV0IGF0dHJWYWwgPSB2YWx1ZXNbYXR0cmlidXRlXSB8fCAnJztcbiAgICAgIGxldCBhdHRyTGFiZWwgPSBvcHRzLm1lc3NhZ2VzW2F0dHJpYnV0ZV07XG4gICAgICBpZiAoYXR0cmlidXRlID09PSAnbGFiZWwnICYmIHV0aWxzLmluQXJyYXkodmFsdWVzLnR5cGUsIHRleHRBcmVhKSkge1xuICAgICAgICBhdHRyTGFiZWwgPSBvcHRzLm1lc3NhZ2VzLmNvbnRlbnQ7XG4gICAgICB9XG5cbiAgICAgIG5vTmFtZSA9IG5vTmFtZS5jb25jYXQob3B0cy5tZXNzYWdlcy5zdWJ0eXBlcy5oZWFkZXIsIHRleHRBcmVhKTtcblxuICAgICAgbGV0IHBsYWNlaG9sZGVycyA9IG9wdHMubWVzc2FnZXMucGxhY2Vob2xkZXJzO1xuICAgICAgbGV0IHBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXJzW2F0dHJpYnV0ZV0gfHwgJyc7XG4gICAgICBsZXQgYXR0cmlidXRlZmllbGQgPSAnJztcbiAgICAgIGxldCBub01ha2VBdHRyID0gW107XG5cbiAgICAgIC8vIEZpZWxkIGhhcyBwbGFjZWhvbGRlciBhdHRyaWJ1dGVcbiAgICAgIGlmIChhdHRyaWJ1dGUgPT09ICdwbGFjZWhvbGRlcicgJiYgIXV0aWxzLmluQXJyYXkodmFsdWVzLnR5cGUsIHBsYWNlaG9sZGVyRmllbGRzKSkge1xuICAgICAgICBub01ha2VBdHRyLnB1c2godHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZpZWxkIGhhcyBuYW1lIGF0dHJpYnV0ZVxuICAgICAgaWYgKGF0dHJpYnV0ZSA9PT0gJ25hbWUnICYmIHV0aWxzLmluQXJyYXkodmFsdWVzLnR5cGUsIG5vTmFtZSkpIHtcbiAgICAgICAgbm9NYWtlQXR0ci5wdXNoKHRydWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW5vTWFrZUF0dHIuc29tZShlbGVtID0+IGVsZW0gPT09IHRydWUpKSB7XG4gICAgICAgIGxldCBpbnB1dENvbmZpZyA9IHtcbiAgICAgICAgICBuYW1lOiBhdHRyaWJ1dGUsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyLFxuICAgICAgICAgIGNsYXNzTmFtZTogYGZsZC0ke2F0dHJpYnV0ZX0gZm9ybS1jb250cm9sYCxcbiAgICAgICAgICBpZDogYCR7YXR0cmlidXRlfS0ke2xhc3RJRH1gXG4gICAgICAgIH07XG4gICAgICAgIGxldCBhdHRyaWJ1dGVMYWJlbCA9IGA8bGFiZWwgZm9yPVwiJHtpbnB1dENvbmZpZy5pZH1cIj4ke2F0dHJMYWJlbH08L2xhYmVsPmA7XG5cbiAgICAgICAgaWYgKGF0dHJpYnV0ZSA9PT0gJ2xhYmVsJyAmJiB1dGlscy5pbkFycmF5KHZhbHVlcy50eXBlLCB0ZXh0QXJlYSkgfHwgKGF0dHJpYnV0ZSA9PT0gJ3ZhbHVlJyAmJiB2YWx1ZXMudHlwZSA9PT0gJ3RleHRhcmVhJykpIHtcbiAgICAgICAgICBhdHRyaWJ1dGVmaWVsZCArPSBgPHRleHRhcmVhICR7dXRpbHMuYXR0clN0cmluZyhpbnB1dENvbmZpZyl9PiR7YXR0clZhbH08L3RleHRhcmVhPmA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5wdXRDb25maWcudmFsdWUgPSBhdHRyVmFsO1xuICAgICAgICAgIGlucHV0Q29uZmlnLnR5cGUgPSAndGV4dCc7XG4gICAgICAgICAgYXR0cmlidXRlZmllbGQgKz0gYDxpbnB1dCAke3V0aWxzLmF0dHJTdHJpbmcoaW5wdXRDb25maWcpfT5gO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGlucHV0V3JhcCA9IGA8ZGl2IGNsYXNzPVwiaW5wdXQtd3JhcFwiPiR7YXR0cmlidXRlZmllbGR9PC9kaXY+YDtcblxuICAgICAgICBhdHRyaWJ1dGVmaWVsZCA9IGA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCAke2F0dHJpYnV0ZX0td3JhcFwiPiR7YXR0cmlidXRlTGFiZWx9ICR7aW5wdXRXcmFwfTwvZGl2PmA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhdHRyaWJ1dGVmaWVsZDtcbiAgICB9O1xuXG4gICAgbGV0IHJlcXVpcmVkRmllbGQgPSBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICAgIGxldCBub1JlcXVpcmUgPSBbXG4gICAgICAgICAgJ2hlYWRlcicsXG4gICAgICAgICAgJ3BhcmFncmFwaCcsXG4gICAgICAgICAgJ2J1dHRvbidcbiAgICAgICAgXTtcbiAgICAgIGxldCBub01ha2UgPSBbXTtcbiAgICAgIGxldCByZXF1aXJlRmllbGQgPSAnJztcblxuICAgICAgaWYgKHV0aWxzLmluQXJyYXkodmFsdWVzLnR5cGUsIG5vUmVxdWlyZSkpIHtcbiAgICAgICAgbm9NYWtlLnB1c2godHJ1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoIW5vTWFrZS5zb21lKGVsZW0gPT4gZWxlbSA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgcmVxdWlyZUZpZWxkID0gYm9vbEF0dHJpYnV0ZSgncmVxdWlyZWQnLCB2YWx1ZXMsIHtmaXJzdDogb3B0cy5tZXNzYWdlcy5yZXF1aXJlZH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVxdWlyZUZpZWxkO1xuICAgIH07XG5cbiAgICAvLyBBcHBlbmQgdGhlIG5ldyBmaWVsZCB0byB0aGUgZWRpdG9yXG4gICAgbGV0IGFwcGVuZE5ld0ZpZWxkID0gZnVuY3Rpb24odmFsdWVzLCBpc05ldyA9IHRydWUpIHtcbiAgICAgIGNvbnN0IG0gPSB1dGlscy5tYXJrdXA7XG4gICAgICBsZXQgdHlwZSA9IHZhbHVlcy50eXBlIHx8ICd0ZXh0JztcbiAgICAgIGxldCBsYWJlbCA9IHZhbHVlcy5sYWJlbCB8fCBvcHRzLm1lc3NhZ2VzW3R5cGVdIHx8IG9wdHMubWVzc2FnZXMubGFiZWw7XG4gICAgICBsZXQgZGVsQnRuID0gbSgnYScsIG9wdHMubWVzc2FnZXMucmVtb3ZlLCB7XG4gICAgICAgICAgaWQ6ICdkZWxfJyArIGxhc3RJRCxcbiAgICAgICAgICBjbGFzc05hbWU6ICdkZWwtYnV0dG9uIGJ0biBkZWxldGUtY29uZmlybScsXG4gICAgICAgICAgdGl0bGU6IG9wdHMubWVzc2FnZXMucmVtb3ZlTWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgIGxldCB0b2dnbGVCdG4gPSBtKCdhJywgbnVsbCwge1xuICAgICAgICBpZDogbGFzdElEICsgJy1lZGl0JyxcbiAgICAgICAgY2xhc3NOYW1lOiAndG9nZ2xlLWZvcm0gYnRuIGljb24tcGVuY2lsJyxcbiAgICAgICAgdGl0bGU6IG9wdHMubWVzc2FnZXMuaGlkZVxuICAgICAgfSk7XG4gICAgICBsZXQgY29weUJ0biA9IG0oJ2EnLCBvcHRzLm1lc3NhZ2VzLmNvcHlCdXR0b24sIHtcbiAgICAgICAgaWQ6IGxhc3RJRCArICctY29weScsXG4gICAgICAgIGNsYXNzTmFtZTogJ2NvcHktYnV0dG9uIGJ0biBpY29uLWNvcHknLFxuICAgICAgICB0aXRsZTogb3B0cy5tZXNzYWdlcy5jb3B5QnV0dG9uVG9vbHRpcFxuICAgICAgfSk7XG5cbiAgICAgIGxldCBsaUNvbnRlbnRzID0gbShcbiAgICAgICAgJ2RpdicsIFt0b2dnbGVCdG4sIGNvcHlCdG4sIGRlbEJ0bl0sIHtjbGFzc05hbWU6ICdmaWVsZC1hY3Rpb25zJ31cbiAgICAgICkub3V0ZXJIVE1MO1xuXG4gICAgICAvLyBGaWVsZCBwcmV2aWV3IExhYmVsXG4gICAgICBsaUNvbnRlbnRzICs9IGA8bGFiZWwgY2xhc3M9XCJmaWVsZC1sYWJlbFwiPiR7bGFiZWx9PC9sYWJlbD5gO1xuXG4gICAgICBpZiAodmFsdWVzLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGxldCBhdHRycyA9IHtcbiAgICAgICAgICBjbGFzc05hbWU6ICd0b29sdGlwLWVsZW1lbnQnLFxuICAgICAgICAgIHRvb2x0aXA6IHZhbHVlcy5kZXNjcmlwdGlvblxuICAgICAgICB9O1xuICAgICAgICBsaUNvbnRlbnRzICs9IGA8c3BhbiAke3V0aWxzLmF0dHJzU3RyaW5nKGF0dHJzKX0+Pzwvc3Bhbj5gO1xuICAgICAgfVxuXG4gICAgICBsZXQgcmVxdWlyZWREaXNwbGF5ID0gdmFsdWVzLnJlcXVpcmVkID8gJ3N0eWxlPVwiZGlzcGxheTppbmxpbmVcIicgOiAnJztcbiAgICAgIGxpQ29udGVudHMgKz0gYDxzcGFuIGNsYXNzPVwicmVxdWlyZWQtYXN0ZXJpc2tcIiAke3JlcXVpcmVkRGlzcGxheX0+ICo8L3NwYW4+YDtcblxuICAgICAgbGlDb250ZW50cyArPSBtKCdkaXYnLCAnJywge2NsYXNzTmFtZTogJ3ByZXYtaG9sZGVyJ30pLm91dGVySFRNTDtcbiAgICAgIGxpQ29udGVudHMgKz0gYDxkaXYgaWQ9XCIke2xhc3RJRH0taG9sZGVyXCIgY2xhc3M9XCJmcm0taG9sZGVyXCI+YDtcbiAgICAgIGxpQ29udGVudHMgKz0gJzxkaXYgY2xhc3M9XCJmb3JtLWVsZW1lbnRzXCI+JztcblxuICAgICAgbGlDb250ZW50cyArPSBhZHZGaWVsZHModmFsdWVzKTtcbiAgICAgIGxpQ29udGVudHMgKz0gbSgnYScsIG9wdHMubWVzc2FnZXMuY2xvc2UsIHtjbGFzc05hbWU6ICdjbG9zZS1maWVsZCd9KS5vdXRlckhUTUw7XG5cbiAgICAgIGxpQ29udGVudHMgKz0gJzwvZGl2Pic7XG4gICAgICBsaUNvbnRlbnRzICs9ICc8L2Rpdj4nO1xuXG4gICAgICBsZXQgZmllbGQgPSBtKCdsaScsIGxpQ29udGVudHMsIHtcbiAgICAgICAgICAnY2xhc3MnOiB0eXBlICsgJy1maWVsZCBmb3JtLWZpZWxkJyxcbiAgICAgICAgICAndHlwZSc6IHR5cGUsXG4gICAgICAgICAgaWQ6IGxhc3RJRFxuICAgICAgICB9KTtcbiAgICAgIGxldCAkbGkgPSAkKGZpZWxkKTtcblxuICAgICAgJGxpLmRhdGEoJ2ZpZWxkRGF0YScsIHthdHRyczogdmFsdWVzfSk7XG5cbiAgICAgIGlmICh0eXBlb2YgX2hlbHBlcnMuc3RvcEluZGV4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAkKCc+IGxpJywgJHNvcnRhYmxlRmllbGRzKS5lcShfaGVscGVycy5zdG9wSW5kZXgpLmJlZm9yZSgkbGkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHNvcnRhYmxlRmllbGRzLmFwcGVuZCgkbGkpO1xuICAgICAgfVxuXG4gICAgICAkKCcuc29ydGFibGUtb3B0aW9ucycsICRsaSlcbiAgICAgIC5zb3J0YWJsZSh7dXBkYXRlOiAoKSA9PiBfaGVscGVycy51cGRhdGVQcmV2aWV3KCRsaSl9KTtcblxuICAgICAgX2hlbHBlcnMudXBkYXRlUHJldmlldygkbGkpO1xuXG4gICAgICBpZiAob3B0cy50eXBlVXNlckV2ZW50c1t0eXBlXSAmJiBvcHRzLnR5cGVVc2VyRXZlbnRzW3R5cGVdLm9uYWRkKSB7XG4gICAgICAgIG9wdHMudHlwZVVzZXJFdmVudHNbdHlwZV0ub25hZGQoZmllbGQpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0cy5lZGl0T25BZGQgJiYgaXNOZXcpIHtcbiAgICAgICAgX2hlbHBlcnMuY2xvc2VBbGxFZGl0KCk7XG4gICAgICAgIF9oZWxwZXJzLnRvZ2dsZUVkaXQobGFzdElELCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIGxhc3RJRCA9IF9oZWxwZXJzLmluY3JlbWVudElkKGxhc3RJRCk7XG4gICAgfTtcblxuICAgIC8vIFNlbGVjdCBmaWVsZCBodG1sLCBzaW5jZSB0aGVyZSBtYXkgYmUgbXVsdGlwbGVcbiAgICBsZXQgc2VsZWN0RmllbGRPcHRpb25zID0gZnVuY3Rpb24obmFtZSwgb3B0aW9uRGF0YSwgbXVsdGlwbGVTZWxlY3QpIHtcbiAgICAgIGxldCBvcHRpb25JbnB1dFR5cGUgPSB7XG4gICAgICAgICAgc2VsZWN0ZWQ6IChtdWx0aXBsZVNlbGVjdCA/ICdjaGVja2JveCcgOiAncmFkaW8nKVxuICAgICAgICB9O1xuICAgICAgbGV0IG9wdGlvbkRhdGFPcmRlciA9IFtcbiAgICAgICAgJ3ZhbHVlJyxcbiAgICAgICAgJ2xhYmVsJyxcbiAgICAgICAgJ3NlbGVjdGVkJ1xuICAgICAgXTtcbiAgICAgIGxldCBvcHRpb25JbnB1dHMgPSBbXTtcbiAgICAgIGxldCBvcHRpb25UZW1wbGF0ZSA9IHtzZWxlY3RlZDogZmFsc2UsIGxhYmVsOiAnJywgdmFsdWU6ICcnfTtcblxuICAgICAgb3B0aW9uRGF0YSA9IE9iamVjdC5hc3NpZ24ob3B0aW9uVGVtcGxhdGUsIG9wdGlvbkRhdGEpO1xuXG4gICAgICBmb3IgKGxldCBpID0gb3B0aW9uRGF0YU9yZGVyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBwcm9wID0gb3B0aW9uRGF0YU9yZGVyW2ldO1xuICAgICAgICBpZiAob3B0aW9uRGF0YS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgIGxldCBhdHRycyA9IHtcbiAgICAgICAgICAgIHR5cGU6IG9wdGlvbklucHV0VHlwZVtwcm9wXSB8fCAndGV4dCcsXG4gICAgICAgICAgICAnY2xhc3MnOiAnb3B0aW9uLScgKyBwcm9wLFxuICAgICAgICAgICAgdmFsdWU6IG9wdGlvbkRhdGFbcHJvcF0sXG4gICAgICAgICAgICBuYW1lOiBuYW1lICsgJy1vcHRpb24nXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmIChvcHRzLm1lc3NhZ2VzLnBsYWNlaG9sZGVyc1twcm9wXSkge1xuICAgICAgICAgICAgYXR0cnMucGxhY2Vob2xkZXIgPSBvcHRzLm1lc3NhZ2VzLnBsYWNlaG9sZGVyc1twcm9wXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAocHJvcCA9PT0gJ3NlbGVjdGVkJyAmJiBvcHRpb25EYXRhLnNlbGVjdGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICBhdHRycy5jaGVja2VkID0gb3B0aW9uRGF0YS5zZWxlY3RlZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBvcHRpb25JbnB1dHMucHVzaCh1dGlscy5tYXJrdXAoJ2lucHV0JywgbnVsbCwgYXR0cnMpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgcmVtb3ZlQXR0cnMgPSB7XG4gICAgICAgIGNsYXNzTmFtZTogJ3JlbW92ZSBidG4nLFxuICAgICAgICB0aXRsZTogb3B0cy5tZXNzYWdlcy5yZW1vdmVNZXNzYWdlXG4gICAgICB9O1xuICAgICAgb3B0aW9uSW5wdXRzLnB1c2godXRpbHMubWFya3VwKCdhJywgb3B0cy5tZXNzYWdlcy5yZW1vdmUsIHJlbW92ZUF0dHJzKSk7XG5cbiAgICAgIGxldCBmaWVsZCA9IHV0aWxzLm1hcmt1cCgnbGknLCBvcHRpb25JbnB1dHMpO1xuXG4gICAgICByZXR1cm4gZmllbGQub3V0ZXJIVE1MO1xuICAgIH07XG5cbiAgICBsZXQgY2xvbmVJdGVtID0gZnVuY3Rpb24gY2xvbmVJdGVtKGN1cnJlbnRJdGVtKSB7XG4gICAgICBsZXQgY3VycmVudElkID0gY3VycmVudEl0ZW0uYXR0cignaWQnKTtcbiAgICAgIGxldCB0eXBlID0gY3VycmVudEl0ZW0uYXR0cigndHlwZScpO1xuICAgICAgbGV0IHRzID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICBsZXQgY2xvbmVOYW1lID0gdHlwZSArICctJyArIHRzO1xuICAgICAgbGV0ICRjbG9uZSA9IGN1cnJlbnRJdGVtLmNsb25lKCk7XG5cbiAgICAgICRjbG9uZS5maW5kKCdbaWRdJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICB0aGlzLmlkID0gdGhpcy5pZC5yZXBsYWNlKGN1cnJlbnRJZCwgbGFzdElEKTtcbiAgICAgIH0pO1xuXG4gICAgICAkY2xvbmUuZmluZCgnW2Zvcl0nKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdmb3InLCB0aGlzLmdldEF0dHJpYnV0ZSgnZm9yJykucmVwbGFjZShjdXJyZW50SWQsIGxhc3RJRCkpO1xuICAgICAgfSk7XG5cbiAgICAgICRjbG9uZS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCdlOm5vdCguZm9ybS1lbGVtZW50cyknKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGxldCBuZXdOYW1lID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICAgICAgICBuZXdOYW1lID0gbmV3TmFtZS5zdWJzdHJpbmcoMCwgKG5ld05hbWUubGFzdEluZGV4T2YoJy0nKSArIDEpKTtcbiAgICAgICAgICBuZXdOYW1lID0gbmV3TmFtZSArIHRzLnRvU3RyaW5nKCk7XG4gICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBuZXdOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgJGNsb25lLmZpbmQoJy5mb3JtLWVsZW1lbnRzJykuZmluZCgnOmlucHV0JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2V0QXR0cmlidXRlKCduYW1lJykgPT09ICduYW1lJykge1xuICAgICAgICAgIGxldCBuZXdWYWwgPSB0aGlzLmdldEF0dHJpYnV0ZSgndmFsdWUnKTtcbiAgICAgICAgICBuZXdWYWwgPSBuZXdWYWwuc3Vic3RyaW5nKDAsIChuZXdWYWwubGFzdEluZGV4T2YoJy0nKSArIDEpKTtcbiAgICAgICAgICBuZXdWYWwgPSBuZXdWYWwgKyB0cy50b1N0cmluZygpO1xuICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCd2YWx1ZScsIG5ld1ZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAkY2xvbmUuYXR0cignaWQnLCBsYXN0SUQpO1xuICAgICAgJGNsb25lLmF0dHIoJ25hbWUnLCBjbG9uZU5hbWUpO1xuICAgICAgJGNsb25lLmFkZENsYXNzKCdjbG9uZWQnKTtcbiAgICAgICQoJy5zb3J0YWJsZS1vcHRpb25zJywgJGNsb25lKS5zb3J0YWJsZSgpO1xuXG4gICAgICBpZiAob3B0cy50eXBlVXNlckV2ZW50c1t0eXBlXSAmJiBvcHRzLnR5cGVVc2VyRXZlbnRzW3R5cGVdLm9uY2xvbmUpIHtcbiAgICAgICAgb3B0cy50eXBlVXNlckV2ZW50c1t0eXBlXS5vbmNsb25lKCRjbG9uZVswXSk7XG4gICAgICB9XG5cbiAgICAgIGxhc3RJRCA9IF9oZWxwZXJzLmluY3JlbWVudElkKGxhc3RJRCk7XG4gICAgICByZXR1cm4gJGNsb25lO1xuICAgIH07XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tIFVUSUxJVElFUyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG5cbiAgICAvLyBkZWxldGUgb3B0aW9uc1xuICAgICRzb3J0YWJsZUZpZWxkcy5vbignY2xpY2sgdG91Y2hzdGFydCcsICcucmVtb3ZlJywgZnVuY3Rpb24oZSkge1xuICAgICAgbGV0ICRmaWVsZCA9ICQodGhpcykucGFyZW50cygnLmZvcm0tZmllbGQ6ZXEoMCknKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGxldCBvcHRpb25zQ291bnQgPSAkKHRoaXMpLnBhcmVudHMoJy5zb3J0YWJsZS1vcHRpb25zOmVxKDApJykuY2hpbGRyZW4oJ2xpJykubGVuZ3RoO1xuICAgICAgaWYgKG9wdGlvbnNDb3VudCA8PSAyKSB7XG4gICAgICAgIG9wdHMubm90aWZ5LmVycm9yKCdFcnJvcjogJyArIG9wdHMubWVzc2FnZXMubWluT3B0aW9uTWVzc2FnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgnbGknKS5zbGlkZVVwKCcyNTAnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgIF9oZWxwZXJzLnVwZGF0ZVByZXZpZXcoJGZpZWxkKTtcbiAgICAgICAgICBfaGVscGVycy5zYXZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gdG91Y2ggZm9jdXNcbiAgICAkc29ydGFibGVGaWVsZHMub24oJ3RvdWNoc3RhcnQnLCAnaW5wdXQnLCBmdW5jdGlvbihlKSB7XG4gICAgICBsZXQgJGlucHV0ID0gJCh0aGlzKTtcbiAgICAgIGlmIChlLmhhbmRsZWQgIT09IHRydWUpIHtcbiAgICAgICAgaWYgKCRpbnB1dC5hdHRyKCd0eXBlJykgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAkaW5wdXQudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICBsZXQgZmllbGRWYWwgPSAkaW5wdXQudmFsKCk7XG4gICAgICAgICAgJGlucHV0LnZhbChmaWVsZFZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHRvZ2dsZSBmaWVsZHNcbiAgICAkc29ydGFibGVGaWVsZHMub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCAnLnRvZ2dsZS1mb3JtLCAuY2xvc2UtZmllbGQnLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKGUuaGFuZGxlZCAhPT0gdHJ1ZSkge1xuICAgICAgICBsZXQgdGFyZ2V0SUQgPSAkKGUudGFyZ2V0KS5wYXJlbnRzKCcuZm9ybS1maWVsZDplcSgwKScpLmF0dHIoJ2lkJyk7XG4gICAgICAgIF9oZWxwZXJzLnRvZ2dsZUVkaXQodGFyZ2V0SUQpO1xuICAgICAgICBlLmhhbmRsZWQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHNvcnRhYmxlRmllbGRzLm9uKCdjaGFuZ2UnLCAnLnByZXYtaG9sZGVyIGlucHV0LCAucHJldi1ob2xkZXIgc2VsZWN0JywgZSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdvdGhlci1vcHRpb24nKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsZXQgZmllbGQgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdsaS5mb3JtLWZpZWxkJylbMF07XG4gICAgICBpZiAodXRpbHMuaW5BcnJheShmaWVsZC50eXBlLCBbJ3NlbGVjdCcsICdjaGVja2JveC1ncm91cCcsICdyYWRpby1ncm91cCddKSkge1xuICAgICAgICBmaWVsZC5xdWVyeVNlbGVjdG9yKCdbY2xhc3M9XCJvcHRpb24tdmFsdWVcIl1bdmFsdWU9XCInICsgZS50YXJnZXQudmFsdWUgKyAnXCJdJykucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzWzBdLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhbHVlLScgKyBmaWVsZC5pZCkudmFsdWUgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgIH1cblxuICAgICAgX2hlbHBlcnMuc2F2ZSgpO1xuICAgIH0pO1xuXG4gICAgLy8gdXBkYXRlIHByZXZpZXcgdG8gbGFiZWxcbiAgICAkc29ydGFibGVGaWVsZHMub24oJ2tleXVwIGNoYW5nZScsICdbbmFtZT1cImxhYmVsXCJdJywgZnVuY3Rpb24oZSkge1xuICAgICAgJCgnLmZpZWxkLWxhYmVsJywgJChlLnRhcmdldCkuY2xvc2VzdCgnbGknKSkudGV4dCgkKGUudGFyZ2V0KS52YWwoKSk7XG4gICAgfSk7XG5cbiAgICAvLyByZW1vdmUgZXJyb3Igc3R5bGluZyB3aGVuIHVzZXJzIHRyaWVzIHRvIGNvcnJlY3QgbWlzdGFrZVxuICAgICRzb3J0YWJsZUZpZWxkcy5kZWxlZ2F0ZSgnaW5wdXQuZXJyb3InLCAna2V5dXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICAkKGUudGFyZ2V0KS5yZW1vdmVDbGFzcygnZXJyb3InKTtcbiAgICB9KTtcblxuICAgIC8vIHVwZGF0ZSBwcmV2aWV3IGZvciBkZXNjcmlwdGlvblxuICAgICRzb3J0YWJsZUZpZWxkcy5vbigna2V5dXAnLCAnaW5wdXRbbmFtZT1cImRlc2NyaXB0aW9uXCJdJywgZnVuY3Rpb24oZSkge1xuICAgICAgbGV0ICRmaWVsZCA9ICQoZS50YXJnZXQpLnBhcmVudHMoJy5mb3JtLWZpZWxkOmVxKDApJyk7XG4gICAgICBsZXQgY2xvc2VzdFRvb2xUaXAgPSAkKCcudG9vbHRpcC1lbGVtZW50JywgJGZpZWxkKTtcbiAgICAgIGxldCB0dFZhbCA9ICQoZS50YXJnZXQpLnZhbCgpO1xuICAgICAgaWYgKHR0VmFsICE9PSAnJykge1xuICAgICAgICBpZiAoIWNsb3Nlc3RUb29sVGlwLmxlbmd0aCkge1xuICAgICAgICAgIGxldCB0dCA9IGA8c3BhbiBjbGFzcz1cInRvb2x0aXAtZWxlbWVudFwiIHRvb2x0aXA9XCIke3R0VmFsfVwiPj88L3NwYW4+YDtcbiAgICAgICAgICAkKCcuZmllbGQtbGFiZWwnLCAkZmllbGQpLmFmdGVyKHR0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjbG9zZXN0VG9vbFRpcC5hdHRyKCd0b29sdGlwJywgdHRWYWwpLmNzcygnZGlzcGxheScsICdpbmxpbmUtYmxvY2snKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGNsb3Nlc3RUb29sVGlwLmxlbmd0aCkge1xuICAgICAgICAgIGNsb3Nlc3RUb29sVGlwLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgICRzb3J0YWJsZUZpZWxkcy5vbignY2hhbmdlJywgJy5mbGQtbXVsdGlwbGUnLCBlID0+IHtcbiAgICAgIGxldCBuZXdUeXBlID0gZS50YXJnZXQuY2hlY2tlZCA/ICdjaGVja2JveCcgOiAncmFkaW8nO1xuXG4gICAgICAkKGUudGFyZ2V0KVxuICAgICAgLnBhcmVudHMoJy5mb3JtLWVsZW1lbnRzOmVxKDApJylcbiAgICAgIC5maW5kKCcuc29ydGFibGUtb3B0aW9ucyBpbnB1dC5vcHRpb24tc2VsZWN0ZWQnKVxuICAgICAgLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGUudGFyZ2V0LnR5cGUgPSBuZXdUeXBlO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBmb3JtYXQgbmFtZSBhdHRyaWJ1dGVcbiAgICAkc29ydGFibGVGaWVsZHMub24oJ2JsdXInLCAnaW5wdXQuZmxkLW5hbWUnLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnRhcmdldC52YWx1ZSA9IF9oZWxwZXJzLnNhZmVuYW1lKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgJChlLnRhcmdldClcbiAgICAgICAgLmFkZENsYXNzKCdmaWVsZC1lcnJvcicpXG4gICAgICAgIC5hdHRyKCdwbGFjZWhvbGRlcicsIG9wdHMubWVzc2FnZXMuY2Fubm90QmVFbXB0eSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGUudGFyZ2V0KS5yZW1vdmVDbGFzcygnZmllbGQtZXJyb3InKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgICRzb3J0YWJsZUZpZWxkcy5vbignYmx1cicsICdpbnB1dC5mbGQtbWF4bGVuZ3RoJywgZSA9PiB7XG4gICAgICBlLnRhcmdldC52YWx1ZSA9IF9oZWxwZXJzLmZvcmNlTnVtYmVyKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9KTtcblxuICAgIC8vIENvcHkgZmllbGRcbiAgICAkc29ydGFibGVGaWVsZHMub24oJ2NsaWNrIHRvdWNoc3RhcnQnLCAnLmljb24tY29weScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGxldCBjdXJyZW50SXRlbSA9ICQoZS50YXJnZXQpLnBhcmVudCgpLnBhcmVudCgnbGknKTtcbiAgICAgIGxldCAkY2xvbmUgPSBjbG9uZUl0ZW0oY3VycmVudEl0ZW0pO1xuICAgICAgJGNsb25lLmluc2VydEFmdGVyKGN1cnJlbnRJdGVtKTtcbiAgICAgIF9oZWxwZXJzLnVwZGF0ZVByZXZpZXcoJGNsb25lKTtcbiAgICAgIF9oZWxwZXJzLnNhdmUoKTtcbiAgICB9KTtcblxuICAgIC8vIERlbGV0ZSBmaWVsZFxuICAgICRzb3J0YWJsZUZpZWxkcy5vbignY2xpY2sgdG91Y2hzdGFydCcsICcuZGVsZXRlLWNvbmZpcm0nLCBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0IGJ1dHRvblBvc2l0aW9uID0gZS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBib2R5UmVjdCA9IGRvY3VtZW50LmJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBjb29yZHMgPSB7XG4gICAgICAgICAgcGFnZVg6IGJ1dHRvblBvc2l0aW9uLmxlZnQgKyAoYnV0dG9uUG9zaXRpb24ud2lkdGggLyAyKSxcbiAgICAgICAgICBwYWdlWTogKGJ1dHRvblBvc2l0aW9uLnRvcCAtIGJvZHlSZWN0LnRvcCkgLSAxMlxuICAgICAgICB9O1xuXG4gICAgICBsZXQgZGVsZXRlSUQgPSAkKGUudGFyZ2V0KS5wYXJlbnRzKCcuZm9ybS1maWVsZDplcSgwKScpLmF0dHIoJ2lkJyk7XG4gICAgICBjb25zdCAkZmllbGQgPSAkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlbGV0ZUlEKSk7XG5cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vZGFsQ2xvc2VkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICRmaWVsZC5yZW1vdmVDbGFzcygnZGVsZXRpbmcnKTtcbiAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBzdXJlIHRoZXkgd2FudCB0byByZW1vdmUgdGhlIGZpZWxkXG4gICAgICBpZiAob3B0cy5maWVsZFJlbW92ZVdhcm4pIHtcbiAgICAgICAgbGV0IHdhcm5IMyA9IHV0aWxzLm1hcmt1cCgnaDMnLCBvcHRzLm1lc3NhZ2VzLndhcm5pbmcpO1xuICAgICAgICBsZXQgd2Fybk1lc3NhZ2UgPSB1dGlscy5tYXJrdXAoJ3AnLCBvcHRzLm1lc3NhZ2VzLmZpZWxkUmVtb3ZlV2FybmluZyk7XG4gICAgICAgIF9oZWxwZXJzLmNvbmZpcm0oW3dhcm5IMywgd2Fybk1lc3NhZ2VdLCAoKSA9PlxuICAgICAgICAgIF9oZWxwZXJzLnJlbW92ZUZpZWxkKGRlbGV0ZUlEKSwgY29vcmRzKTtcbiAgICAgICAgJGZpZWxkLmFkZENsYXNzKCdkZWxldGluZycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2hlbHBlcnMucmVtb3ZlRmllbGQoZGVsZXRlSUQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gVXBkYXRlIGJ1dHRvbiBzdHlsZSBzZWxlY3Rpb25cbiAgICAkc29ydGFibGVGaWVsZHMub24oJ2NsaWNrJywgJy5zdHlsZS13cmFwIGJ1dHRvbicsIGUgPT4ge1xuICAgICAgY29uc3QgJGJ1dHRvbiA9ICQoZS50YXJnZXQpO1xuICAgICAgbGV0IHN0eWxlVmFsID0gJGJ1dHRvbi52YWwoKTtcbiAgICAgIGxldCAkYnRuU3R5bGUgPSAkYnV0dG9uLnBhcmVudCgpLnByZXYoJy5idG4tc3R5bGUnKTtcbiAgICAgICRidG5TdHlsZS52YWwoc3R5bGVWYWwpO1xuICAgICAgJGJ1dHRvbi5zaWJsaW5ncygnLmJ0bicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICRidXR0b24uYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgX2hlbHBlcnMudXBkYXRlUHJldmlldygkYnRuU3R5bGUuY2xvc2VzdCgnLmZvcm0tZmllbGQnKSk7XG4gICAgICBfaGVscGVycy5zYXZlKCk7XG4gICAgfSk7XG5cbiAgICAvLyBBdHRhY2ggYSBjYWxsYmFjayB0byB0b2dnbGUgcmVxdWlyZWQgYXN0ZXJpc2tcbiAgICAkc29ydGFibGVGaWVsZHMub24oJ2NsaWNrJywgJy5mbGQtcmVxdWlyZWQnLCBlID0+IHtcbiAgICAgICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5mb3JtLWZpZWxkJykuZmluZCgnLnJlcXVpcmVkLWFzdGVyaXNrJykudG9nZ2xlKCk7XG4gICAgfSk7XG5cbiAgICAvLyBBdHRhY2ggYSBjYWxsYmFjayB0byB0b2dnbGUgcm9sZXMgdmlzaWJpbGl0eVxuICAgICRzb3J0YWJsZUZpZWxkcy5vbignY2xpY2snLCAnaW5wdXQuZmxkLWFjY2VzcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGxldCByb2xlcyA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5mb3JtLWZpZWxkJykuZmluZCgnLmF2YWlsYWJsZS1yb2xlcycpO1xuICAgICAgbGV0IGVuYWJsZVJvbGVzQ0IgPSAkKGUudGFyZ2V0KTtcbiAgICAgIHJvbGVzLnNsaWRlVG9nZ2xlKDI1MCwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghZW5hYmxlUm9sZXNDQi5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgICAgICQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScsIHJvbGVzKS5yZW1vdmVBdHRyKCdjaGVja2VkJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gQXR0YWNoIGEgY2FsbGJhY2sgdG8gYWRkIG5ldyBvcHRpb25zXG4gICAgJHNvcnRhYmxlRmllbGRzLm9uKCdjbGljaycsICcuYWRkLW9wdCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGxldCAkb3B0aW9uV3JhcCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5maWVsZC1vcHRpb25zJyk7XG4gICAgICBsZXQgJG11bHRpcGxlID0gJCgnW25hbWU9XCJtdWx0aXBsZVwiXScsICRvcHRpb25XcmFwKTtcbiAgICAgIGxldCAkZmlyc3RPcHRpb24gPSAkKCcub3B0aW9uLXNlbGVjdGVkOmVxKDApJywgJG9wdGlvbldyYXApO1xuICAgICAgbGV0IGlzTXVsdGlwbGUgPSBmYWxzZTtcblxuICAgICAgaWYgKCRtdWx0aXBsZS5sZW5ndGgpIHtcbiAgICAgICAgaXNNdWx0aXBsZSA9ICRtdWx0aXBsZS5wcm9wKCdjaGVja2VkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpc011bHRpcGxlID0gKCRmaXJzdE9wdGlvbi5hdHRyKCd0eXBlJykgPT09ICdjaGVja2JveCcpO1xuICAgICAgfVxuXG4gICAgICBsZXQgbmFtZSA9ICRmaXJzdE9wdGlvbi5hdHRyKCduYW1lJyk7XG5cbiAgICAgICQoJy5zb3J0YWJsZS1vcHRpb25zJywgJG9wdGlvbldyYXApLmFwcGVuZChzZWxlY3RGaWVsZE9wdGlvbnMobmFtZSwgZmFsc2UsIGlzTXVsdGlwbGUpKTtcbiAgICB9KTtcblxuICAgICRzb3J0YWJsZUZpZWxkcy5vbignbW91c2VvdmVyIG1vdXNlb3V0JywgJy5yZW1vdmUsIC5kZWwtYnV0dG9uJywgZSA9PlxuICAgICAgJChlLnRhcmdldCkuY2xvc2VzdCgnLmZvcm0tZmllbGQnKS50b2dnbGVDbGFzcygnZGVsZXRlJykpO1xuXG4gICAgaWYgKG9wdHMuc2hvd0FjdGlvbkJ1dHRvbnMpIHtcbiAgICAgIC8vIFZpZXcgWE1MXG4gICAgICBsZXQgeG1sQnV0dG9uID0gJChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmcm1iSUQgKyAnLXZpZXctZGF0YScpKTtcbiAgICAgIHhtbEJ1dHRvbi5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgX2hlbHBlcnMuc2hvd0RhdGEoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGVhciBhbGwgZmllbGRzIGluIGZvcm0gZWRpdG9yXG4gICAgICBsZXQgY2xlYXJCdXR0b24gPSAkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZybWJJRCArICctY2xlYXItYWxsJykpO1xuICAgICAgY2xlYXJCdXR0b24uY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgICBsZXQgZmllbGRzID0gJCgnbGkuZm9ybS1maWVsZCcpO1xuICAgICAgICBsZXQgYnV0dG9uUG9zaXRpb24gPSBlLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbGV0IGJvZHlSZWN0ID0gZG9jdW1lbnQuYm9keS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbGV0IGNvb3JkcyA9IHtcbiAgICAgICAgICBwYWdlWDogYnV0dG9uUG9zaXRpb24ubGVmdCArIChidXR0b25Qb3NpdGlvbi53aWR0aCAvIDIpLFxuICAgICAgICAgIHBhZ2VZOiAoYnV0dG9uUG9zaXRpb24udG9wIC0gYm9keVJlY3QudG9wKSAtIDEyXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGZpZWxkcy5sZW5ndGgpIHtcbiAgICAgICAgICBfaGVscGVycy5jb25maXJtKG9wdHMubWVzc2FnZXMuY2xlYXJBbGxNZXNzYWdlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIF9oZWxwZXJzLnJlbW92ZUFsbGZpZWxkcygpO1xuICAgICAgICAgICAgb3B0cy5ub3RpZnkuc3VjY2VzcyhvcHRzLm1lc3NhZ2VzLmFsbEZpZWxkc1JlbW92ZWQpO1xuICAgICAgICAgICAgX2hlbHBlcnMuc2F2ZSgpO1xuICAgICAgICAgIH0sIGNvb3Jkcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX2hlbHBlcnMuZGlhbG9nKCdUaGVyZSBhcmUgbm8gZmllbGRzIHRvIGNsZWFyJywgY29vcmRzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFNhdmUgSWRlYSBUZW1wbGF0ZVxuICAgICAgJChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmcm1iSUQgKyAnLXNhdmUnKSkuY2xpY2soZSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgX2hlbHBlcnMuc2F2ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2hlbHBlcnMuZ2V0RGF0YSgpO1xuICAgIGxvYWRGaWVsZHMoKTtcblxuICAgICRzb3J0YWJsZUZpZWxkcy5jc3MoJ21pbi1oZWlnaHQnLCAkY2JVTC5oZWlnaHQoKSk7XG5cbiAgICAvLyBJZiBvcHRpb24gc2V0LCBjb250cm9scyB3aWxsIHJlbWFpbiBpbiB2aWV3IGluIGVkaXRvclxuICAgIGlmIChvcHRzLnN0aWNreUNvbnRyb2xzKSB7XG4gICAgICBfaGVscGVycy5zdGlja3lDb250cm9scygkc29ydGFibGVGaWVsZHMpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZm9ybUJ1aWxkZXIuZXZlbnRzLmxvYWRlZCk7XG5cbiAgICAvLyBNYWtlIGFjdGlvbnMgYWNjZXNzaWJsZVxuICAgIGZvcm1CdWlsZGVyLmFjdGlvbnMgPSB7XG4gICAgICBjbGVhckZpZWxkczogX2hlbHBlcnMucmVtb3ZlQWxsZmllbGRzLFxuICAgICAgc2hvd0RhdGE6IF9oZWxwZXJzLnNob3dEYXRhLFxuICAgICAgc2F2ZTogX2hlbHBlcnMuc2F2ZSxcbiAgICAgIGFkZEZpZWxkOiAoZmllbGQsIGluZGV4KSA9PiB7XG4gICAgICAgIF9oZWxwZXJzLnN0b3BJbmRleCA9IGZvcm1CdWlsZGVyLnN0YWdlLmNoaWxkcmVuLmxlbmd0aCA/IGluZGV4IDogdW5kZWZpbmVkO1xuICAgICAgICBwcmVwRmllbGRWYXJzKGZpZWxkKTtcbiAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChmb3JtQnVpbGRlci5ldmVudHMuZmllbGRBZGRlZCk7XG4gICAgICB9LFxuICAgICAgcmVtb3ZlRmllbGQ6IF9oZWxwZXJzLnJlbW92ZUZpZWxkLFxuICAgICAgZ2V0RGF0YTogKHR5cGUgPSAnanMnKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0YWdlID0gZm9ybUJ1aWxkZXIuc3RhZ2U7XG4gICAgICAgIGNvbnN0IGggPSBfaGVscGVycztcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICBqczogKCkgPT4gaC5wcmVwRGF0YShzdGFnZSksXG4gICAgICAgICAgeG1sOiAoKSA9PiBoLnhtbFNhdmUoc3RhZ2UpLFxuICAgICAgICAgIGpzb246ICgpID0+IHdpbmRvdy5KU09OLnN0cmluZ2lmeShoLnByZXBEYXRhKHN0YWdlKSwgbnVsbCwgJ1xcdCcpXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGRhdGFbdHlwZV0oKTtcbiAgICAgIH0sXG4gICAgICBzZXREYXRhOiBmb3JtRGF0YSA9PiB7XG4gICAgICAgIF9oZWxwZXJzLnJlbW92ZUFsbGZpZWxkcygpO1xuICAgICAgICBfaGVscGVycy5nZXREYXRhKGZvcm1EYXRhKTtcbiAgICAgICAgbG9hZEZpZWxkcygpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZm9ybUJ1aWxkZXI7XG4gIH07XG5cbiAgJC5mbi5mb3JtQnVpbGRlciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgbGV0IGVsZW1zID0gdGhpcztcbiAgICByZXR1cm4gZWxlbXMuZWFjaCgoaSkgPT4ge1xuICAgICAgbGV0IGZvcm1CdWlsZGVyID0gbmV3IEZvcm1CdWlsZGVyKG9wdGlvbnMsIGVsZW1zW2ldKTtcbiAgICAgICQoZWxlbXNbaV0pLmRhdGEoJ2Zvcm1CdWlsZGVyJywgZm9ybUJ1aWxkZXIpO1xuXG4gICAgICByZXR1cm4gZm9ybUJ1aWxkZXI7XG4gICAgfSk7XG4gIH07XG59KShqUXVlcnkpO1xuIiwiLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb25zIHNwZWNpZmljIHRvIGZvcm1CdWlsZGVyLlxuICogQ2FsbGVkIGZvcm0gZm9ybUJ1aWxkZXJcbiAqIEBwYXJhbSAge09iamVjdH0gICBvcHRzXG4gKiBAcGFyYW0gIHtJbnN0YW5jZX0gZm9ybUJ1aWxkZXJcbiAqIEByZXR1cm4ge09iamVjdH0gaGVscGVyIGZ1bmN0aW9uc1xuICovXG5mdW5jdGlvbiBoZWxwZXJzKG9wdHMsIGZvcm1CdWlsZGVyKSB7XG4gIGxldCBfaGVscGVycyA9IHtcbiAgICBkb0NhbmNlbDogZmFsc2VcbiAgfTtcblxuICBjb25zdCB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMuanMnKTtcbiAgZm9ybUJ1aWxkZXIuZXZlbnRzID0gcmVxdWlyZSgnLi9ldmVudHMuanMnKTtcblxuICAvKipcbiAgICogQ29udmVydCBjb252ZXJ0cyBtZXNzeSBgY2wjc3NOYW1lc2AgaW50byB2YWxpZCBgY2xhc3MtbmFtZXNgXG4gICAqXG4gICAqIEBwYXJhbSAge1N0cmluZ30gc3RyXG4gICAqIEByZXR1cm4ge1N0cmluZ30gaHlwaGVuYXRlZCBzdHJpbmdcbiAgICovXG4gIF9oZWxwZXJzLm1ha2VDbGFzc05hbWUgPSAoc3RyKSA9PiB7XG4gICAgc3RyID0gc3RyLnJlcGxhY2UoL1teXFx3XFxzXFwtXS9naSwgJycpO1xuICAgIHJldHVybiB1dGlscy5oeXBoZW5DYXNlKHN0cik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZCBhIG1vYmlsZSBjbGFzc1xuICAgKiBAdG9kbyBmaW5kIGNzcyBvbmx5IHNvbHV0aW9uXG4gICAqIEByZXR1cm4ge1N0cmluZ30gTW9iaWxlIGNsYXNzIGFkZGVkIHRvIGZvcm1CdWlsZGVyXG4gICAqL1xuICBfaGVscGVycy5tb2JpbGVDbGFzcyA9IGZ1bmN0aW9uKCkge1xuICAgIGxldCBtb2JpbGVDbGFzcyA9ICcnO1xuICAgIChmdW5jdGlvbihhKSB7XG4gICAgICBpZiAoLyhhbmRyb2lkfGJiXFxkK3xtZWVnbykuK21vYmlsZXxhdmFudGdvfGJhZGFcXC98YmxhY2tiZXJyeXxibGF6ZXJ8Y29tcGFsfGVsYWluZXxmZW5uZWN8aGlwdG9wfGllbW9iaWxlfGlwKGhvbmV8b2QpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLnRlc3QoYSkgfHwgLzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2kudGVzdChhLnN1YnN0cigwLCA0KSkpIHtcbiAgICAgICAgbW9iaWxlQ2xhc3MgPSAnIGZiLW1vYmlsZSc7XG4gICAgICB9XG4gICAgfSkobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYSk7XG4gICAgcmV0dXJuIG1vYmlsZUNsYXNzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmb3Igd2hlbiBhIGRyYWcgYmVnaW5zXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gZXZlbnRcbiAgICogQHBhcmFtICB7T2JqZWN0fSB1aVxuICAgKi9cbiAgX2hlbHBlcnMuc3RhcnRNb3ZpbmcgPSBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICB1aS5pdGVtLnNob3coKS5hZGRDbGFzcygnbW92aW5nJyk7XG4gICAgX2hlbHBlcnMuc3RhcnRJbmRleCA9ICQoJ2xpJywgdGhpcykuaW5kZXgodWkuaXRlbSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZvciB3aGVuIGEgZHJhZyBlbmRzXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gZXZlbnRcbiAgICogQHBhcmFtICB7T2JqZWN0fSB1aVxuICAgKi9cbiAgX2hlbHBlcnMuc3RvcE1vdmluZyA9IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuICAgIHVpLml0ZW0ucmVtb3ZlQ2xhc3MoJ21vdmluZycpO1xuICAgIGlmIChfaGVscGVycy5kb0NhbmNlbCkge1xuICAgICAgJCh1aS5zZW5kZXIpLnNvcnRhYmxlKCdjYW5jZWwnKTtcbiAgICAgICQodGhpcykuc29ydGFibGUoJ2NhbmNlbCcpO1xuICAgIH1cbiAgICBfaGVscGVycy5zYXZlKCk7XG4gICAgX2hlbHBlcnMuZG9DYW5jZWwgPSBmYWxzZTtcbiAgfTtcblxuICAvKipcbiAgICogalF1ZXJ5IFVJIHNvcnRhYmxlIGJlZm9yZVN0b3AgY2FsbGJhY2sgdXNlZCBmb3IgYm90aCBsaXN0cy5cbiAgICogTG9naWMgZm9yIGNhbmNlbGluZyB0aGUgc29ydCBvciBkcm9wLlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IGV2ZW50XG4gICAqIEBwYXJhbSAge09iamVjdH0gdWlcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIF9oZWxwZXJzLmJlZm9yZVN0b3AgPSBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9ybUJ1aWxkZXIuZm9ybUlEKTtcbiAgICBsZXQgbGFzdEluZGV4ID0gZm9ybS5jaGlsZHJlbi5sZW5ndGggLSAxO1xuICAgIGxldCBjYW5jZWxBcnJheSA9IFtdO1xuICAgIF9oZWxwZXJzLnN0b3BJbmRleCA9IHVpLnBsYWNlaG9sZGVyLmluZGV4KCkgLSAxO1xuXG4gICAgaWYgKCFvcHRzLnNvcnRhYmxlQ29udHJvbHMgJiYgdWkuaXRlbS5wYXJlbnQoKS5oYXNDbGFzcygnZnJtYi1jb250cm9sJykpIHtcbiAgICAgIGNhbmNlbEFycmF5LnB1c2godHJ1ZSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMucHJlcGVuZCkge1xuICAgICAgY2FuY2VsQXJyYXkucHVzaChfaGVscGVycy5zdG9wSW5kZXggPT09IDApO1xuICAgIH1cblxuICAgIGlmIChvcHRzLmFwcGVuZCkge1xuICAgICAgY2FuY2VsQXJyYXkucHVzaCgoX2hlbHBlcnMuc3RvcEluZGV4ICsgMSkgPT09IGxhc3RJbmRleCk7XG4gICAgfVxuXG4gICAgX2hlbHBlcnMuZG9DYW5jZWwgPSBjYW5jZWxBcnJheS5zb21lKGVsZW0gPT4gZWxlbSA9PT0gdHJ1ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1ha2Ugc3RyaW5ncyBzYWZlIHRvIGJlIHVzZWQgYXMgY2xhc3Nlc1xuICAgKlxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IHN0ciBzdHJpbmcgdG8gYmUgY29udmVydGVkXG4gICAqIEByZXR1cm4ge1N0cmluZ30gICAgIGNvbnZlcnRlciBzdHJpbmdcbiAgICovXG4gIF9oZWxwZXJzLnNhZmVuYW1lID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXHMvZywgJy0nKS5yZXBsYWNlKC9bXmEtekEtWjAtOVxcLV0vZywgJycpLnRvTG93ZXJDYXNlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0cmlwcyBub24tbnVtYmVycyBmcm9tIGEgbnVtYmVyIG9ubHkgaW5wdXRcbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfSBzdHIgc3RyaW5nIHdpdGggcG9zc2libGUgbnVtYmVyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gICAgIHN0cmluZyB3aXRob3V0IG51bWJlcnNcbiAgICovXG4gIF9oZWxwZXJzLmZvcmNlTnVtYmVyID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bXjAtOV0vZywgJycpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBoaWRlIGFuZCBzaG93IG1vdXNlIHRyYWNraW5nIHRvb2x0aXBzLCBvbmx5IHVzZWQgZm9yIGRpc2FibGVkXG4gICAqIGZpZWxkcyBpbiB0aGUgZWRpdG9yLlxuICAgKlxuICAgKiBAdG9kbyAgIHJlbW92ZSBvciByZWZhY3RvciB0byBtYWtlIGJldHRlciB1c2VcbiAgICogQHBhcmFtICB7T2JqZWN0fSB0dCBqUXVlcnkgb3B0aW9uIHdpdGggbmV4dGVkIHRvb2x0aXBcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIF9oZWxwZXJzLmluaXRUb29sdGlwID0gZnVuY3Rpb24odHQpIHtcbiAgICBjb25zdCB0b29sdGlwID0gdHQuZmluZCgnLnRvb2x0aXAnKTtcbiAgICB0dC5tb3VzZWVudGVyKGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRvb2x0aXAub3V0ZXJXaWR0aCgpID4gMjAwKSB7XG4gICAgICAgIHRvb2x0aXAuYWRkQ2xhc3MoJ21heC13aWR0aCcpO1xuICAgICAgfVxuICAgICAgdG9vbHRpcC5jc3MoJ2xlZnQnLCB0dC53aWR0aCgpICsgMTQpO1xuICAgICAgdG9vbHRpcC5zdG9wKHRydWUsIHRydWUpLmZhZGVJbignZmFzdCcpO1xuICAgIH0pLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7XG4gICAgICB0dC5maW5kKCcudG9vbHRpcCcpLnN0b3AodHJ1ZSwgdHJ1ZSkuZmFkZU91dCgnZmFzdCcpO1xuICAgIH0pO1xuICAgIHRvb2x0aXAuaGlkZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBdHRlbXB0cyB0byBnZXQgZWxlbWVudCB0eXBlIGFuZCBzdWJ0eXBlXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gJGZpZWxkXG4gICAqIEByZXR1cm4ge09iamVjdH0ge3R5cGU6ICdmaWVsZFR5cGUnLCBzdWJ0eXBlOiAnZmllbGRTdWJUeXBlJ31cbiAgICovXG4gIF9oZWxwZXJzLmdldFR5cGVzID0gZnVuY3Rpb24oJGZpZWxkKSB7XG4gICAgbGV0IHR5cGVzID0ge1xuICAgICAgICB0eXBlOiAkZmllbGQuYXR0cigndHlwZScpXG4gICAgICB9O1xuICAgIGxldCBzdWJ0eXBlID0gJCgnLmZsZC1zdWJ0eXBlJywgJGZpZWxkKS52YWwoKTtcblxuICAgIGlmIChzdWJ0eXBlICE9PSB0eXBlcy50eXBlKSB7XG4gICAgICB0eXBlcy5zdWJ0eXBlID0gc3VidHlwZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldCBvcHRpb24gZGF0YSBmb3IgYSBmaWVsZFxuICAgKiBAcGFyYW0gIHtPYmplY3R9IGZpZWxkIGpRdWVyeSBmaWVsZCBvYmplY3RcbiAgICogQHJldHVybiB7QXJyYXl9ICAgICAgICBBcnJheSBvZiBvcHRpb24gdmFsdWVzXG4gICAqL1xuICBfaGVscGVycy5maWVsZE9wdGlvbkRhdGEgPSBmdW5jdGlvbihmaWVsZCkge1xuICAgIGxldCBvcHRpb25zID0gW107XG5cbiAgICAkKCcuc29ydGFibGUtb3B0aW9ucyBsaScsIGZpZWxkKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgbGV0ICRvcHRpb24gPSAkKHRoaXMpO1xuICAgICAgY29uc3Qgc2VsZWN0ZWQgPSAkKCcub3B0aW9uLXNlbGVjdGVkJywgJG9wdGlvbikuaXMoJzpjaGVja2VkJyk7XG4gICAgICBsZXQgYXR0cnMgPSB7XG4gICAgICAgICAgbGFiZWw6ICQoJy5vcHRpb24tbGFiZWwnLCAkb3B0aW9uKS52YWwoKSxcbiAgICAgICAgICB2YWx1ZTogJCgnLm9wdGlvbi12YWx1ZScsICRvcHRpb24pLnZhbCgpXG4gICAgICAgIH07XG5cbiAgICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgICBhdHRycy5zZWxlY3RlZCA9IHNlbGVjdGVkO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zLnB1c2goYXR0cnMpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFhNTCBzYXZlXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gZm9ybSBzb3J0YWJsZUZpZWxkcyBub2RlXG4gICAqIEByZXR1cm4ge1N0cmluZ30geG1sIGluIHN0cmluZ1xuICAgKi9cbiAgX2hlbHBlcnMueG1sU2F2ZSA9IGZ1bmN0aW9uKGZvcm0pIHtcbiAgICBjb25zdCBtID0gdXRpbHMubWFya3VwO1xuICAgIGxldCBmb3JtRGF0YSA9IF9oZWxwZXJzLnByZXBEYXRhKGZvcm0pO1xuICAgIGxldCB4bWwgPSBbJzxmb3JtLXRlbXBsYXRlPlxcblxcdDxmaWVsZHM+J107XG5cbiAgICB1dGlscy5mb3JFYWNoKGZvcm1EYXRhLCBmdW5jdGlvbihmaWVsZEluZGV4LCBmaWVsZCkge1xuICAgICAgbGV0IGZpZWxkQ29udGVudCA9IG51bGw7XG5cbiAgICAgIC8vIEhhbmRsZSBvcHRpb25zXG4gICAgICBpZiAoZmllbGQudHlwZS5tYXRjaCgvKHNlbGVjdHxjaGVja2JveC1ncm91cHxyYWRpby1ncm91cCkvKSkge1xuICAgICAgICBsZXQgb3B0aW9uRGF0YSA9IGZpZWxkLnZhbHVlcztcbiAgICAgICAgbGV0IG9wdGlvbnMgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdGlvbkRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsZXQgb3B0aW9uID0gbSgnb3B0aW9uJywgb3B0aW9uRGF0YVtpXS5sYWJlbCwgb3B0aW9uRGF0YVtpXSkub3V0ZXJIVE1MO1xuICAgICAgICAgIG9wdGlvbnMucHVzaCgnXFxuXFx0XFx0XFx0JyArIG9wdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5wdXNoKCdcXG5cXHRcXHQnKTtcblxuICAgICAgICBmaWVsZENvbnRlbnQgPSBvcHRpb25zLmpvaW4oJycpO1xuICAgICAgICBkZWxldGUgZmllbGQudmFsdWVzO1xuICAgICAgfVxuXG4gICAgICBsZXQgeG1sRmllbGQgPSBtKCdmaWVsZCcsIGZpZWxkQ29udGVudCwgZmllbGQpO1xuICAgICAgeG1sLnB1c2goJ1xcblxcdFxcdCcgKyB4bWxGaWVsZC5vdXRlckhUTUwpO1xuICAgIH0pO1xuXG4gICAgeG1sLnB1c2goJ1xcblxcdDwvZmllbGRzPlxcbjwvZm9ybS10ZW1wbGF0ZT4nKTtcblxuICAgIHJldHVybiB4bWwuam9pbignJyk7XG4gIH07XG5cbiAgX2hlbHBlcnMucHJlcERhdGEgPSBmdW5jdGlvbihmb3JtKSB7XG4gICAgbGV0IGZvcm1EYXRhID0gW107XG5cbiAgICBpZiAoZm9ybS5jaGlsZE5vZGVzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgLy8gYnVpbGQgZGF0YSBvYmplY3RcbiAgICAgIHV0aWxzLmZvckVhY2goZm9ybS5jaGlsZE5vZGVzLCBmdW5jdGlvbihpbmRleCwgZmllbGQpIHtcbiAgICAgICAgbGV0ICRmaWVsZCA9ICQoZmllbGQpO1xuXG4gICAgICAgIGlmICghKCRmaWVsZC5oYXNDbGFzcygnZGlzYWJsZWQnKSkpIHtcbiAgICAgICAgICBsZXQgZmllbGREYXRhID0gX2hlbHBlcnMuZ2V0VHlwZXMoJGZpZWxkKTtcbiAgICAgICAgICBsZXQgcm9sZVZhbHMgPSAkKCcucm9sZXMtZmllbGQ6Y2hlY2tlZCcsIGZpZWxkKS5tYXAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgfSkuZ2V0KCk7XG5cbiAgICAgICAgICAkKCdbY2xhc3MqPVwiZmxkLVwiXScsIGZpZWxkKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3QgYXR0ciA9IHRoaXM7XG4gICAgICAgICAgICBsZXQgbmFtZSA9IHV0aWxzLmNhbWVsQ2FzZShhdHRyLm5hbWUpO1xuICAgICAgICAgICAgZmllbGREYXRhW25hbWVdID0gYXR0ci50eXBlID09PSAnY2hlY2tib3gnID8gYXR0ci5jaGVja2VkIDogYXR0ci52YWx1ZTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChyb2xlVmFscy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZpZWxkRGF0YS5yb2xlID0gcm9sZVZhbHMuam9pbignLCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZpZWxkRGF0YS5jbGFzc05hbWUgPSBmaWVsZERhdGEuY2xhc3NOYW1lIHx8IGZpZWxkRGF0YS5jbGFzcztcblxuICAgICAgICAgIGxldCBtYXRjaCA9IC8oPzpefFxccylidG4tKC4qPykoPzpcXHN8JCkvZy5leGVjKGZpZWxkRGF0YS5jbGFzc05hbWUpO1xuICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgZmllbGREYXRhLnN0eWxlID0gbWF0Y2hbMV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZmllbGREYXRhID0gdXRpbHMudHJpbU9iaihmaWVsZERhdGEpO1xuICAgICAgICAgIGZpZWxkRGF0YSA9IHV0aWxzLmVzY2FwZUF0dHJzKGZpZWxkRGF0YSk7XG5cbiAgICAgICAgICBsZXQgbXVsdGlwbGVGaWVsZCA9IGZpZWxkRGF0YVxuICAgICAgICAgIC50eXBlLm1hdGNoKC8oc2VsZWN0fGNoZWNrYm94LWdyb3VwfHJhZGlvLWdyb3VwKS8pO1xuXG4gICAgICAgICAgaWYgKG11bHRpcGxlRmllbGQpIHtcbiAgICAgICAgICAgIGZpZWxkRGF0YS52YWx1ZXMgPSBfaGVscGVycy5maWVsZE9wdGlvbkRhdGEoJGZpZWxkKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3JtRGF0YS5wdXNoKGZpZWxkRGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBmb3JtRGF0YTtcbiAgfTtcblxuICBfaGVscGVycy5qc29uU2F2ZSA9IGZvcm0gPT5cbiAgICB3aW5kb3cuSlNPTi5zdHJpbmdpZnkoX2hlbHBlcnMucHJlcERhdGEoZm9ybSksIG51bGwsICdcXHQnKTtcblxuICBfaGVscGVycy5nZXREYXRhID0gZm9ybURhdGEgPT4ge1xuICAgIGxldCBkYXRhID0gZm9ybURhdGEgfHwgb3B0cy5mb3JtRGF0YTtcblxuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGxldCBzZXREYXRhID0ge1xuICAgICAgeG1sOiBmb3JtRGF0YSA9PiB1dGlscy5wYXJzZVhNTChmb3JtRGF0YSksXG4gICAgICBqc29uOiBmb3JtRGF0YSA9PiB3aW5kb3cuSlNPTi5wYXJzZShmb3JtRGF0YSlcbiAgICB9O1xuXG4gICAgZm9ybUJ1aWxkZXIuZm9ybURhdGEgPSBzZXREYXRhW29wdHMuZGF0YVR5cGVdKGRhdGEpIHx8IFtdO1xuXG4gICAgcmV0dXJuIGZvcm1CdWlsZGVyLmZvcm1EYXRhO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTYXZlcyBhbmQgcmV0dXJucyBmb3JtRGF0YVxuICAgKiBAcmV0dXJuIHtYTUx8SlNPTn0gZm9ybURhdGFcbiAgICovXG4gIF9oZWxwZXJzLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9ybUJ1aWxkZXIuZm9ybUlEKTtcblxuICAgIGxldCBkb1NhdmUgPSB7XG4gICAgICB4bWw6IF9oZWxwZXJzLnhtbFNhdmUsXG4gICAgICBqc29uOiBfaGVscGVycy5qc29uU2F2ZVxuICAgIH07XG5cbiAgICAvLyBzYXZlIGFjdGlvbiBmb3IgY3VycmVudCBgZGF0YVR5cGVgXG4gICAgZm9ybUJ1aWxkZXIuZm9ybURhdGEgPSBkb1NhdmVbb3B0cy5kYXRhVHlwZV0oZm9ybSk7XG5cbiAgICAvLyB0cmlnZ2VyIGZvcm1TYXZlZCBldmVudFxuICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZm9ybUJ1aWxkZXIuZXZlbnRzLmZvcm1TYXZlZCk7XG4gICAgcmV0dXJuIGZvcm1CdWlsZGVyLmZvcm1EYXRhO1xuICB9O1xuXG4gIC8qKlxuICAgKiBpbmNyZW1lbnRzIHRoZSBmaWVsZCBpZHMgd2l0aCBzdXBwb3J0IGZvciBtdWx0aXBsZSBlZGl0b3JzXG4gICAqIEBwYXJhbSAge1N0cmluZ30gaWQgZmllbGQgSURcbiAgICogQHJldHVybiB7U3RyaW5nfSAgICBpbmNyZW1lbnRlZCBmaWVsZCBJRFxuICAgKi9cbiAgX2hlbHBlcnMuaW5jcmVtZW50SWQgPSBmdW5jdGlvbihpZCkge1xuICAgIGxldCBzcGxpdCA9IGlkLmxhc3RJbmRleE9mKCctJyk7XG4gICAgbGV0IG5ld0ZpZWxkTnVtYmVyID0gcGFyc2VJbnQoaWQuc3Vic3RyaW5nKHNwbGl0ICsgMSkpICsgMTtcbiAgICBsZXQgYmFzZVN0cmluZyA9IGlkLnN1YnN0cmluZygwLCBzcGxpdCk7XG5cbiAgICByZXR1cm4gYCR7YmFzZVN0cmluZ30tJHtuZXdGaWVsZE51bWJlcn1gO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb2xsZWN0IGZpZWxkIGF0dHJpYnV0ZSB2YWx1ZXMgYW5kIGNhbGwgZmllbGRQcmV2aWV3IHRvIGdlbmVyYXRlIHByZXZpZXdcbiAgICogQHBhcmFtICB7T2JqZWN0fSBmaWVsZCBET00gZWxlbWVudFxuICAgKi9cbiAgX2hlbHBlcnMudXBkYXRlUHJldmlldyA9IGZ1bmN0aW9uKGZpZWxkKSB7XG4gICAgY29uc3QgZmllbGRDbGFzcyA9IGZpZWxkLmF0dHIoJ2NsYXNzJyk7XG4gICAgaWYgKGZpZWxkQ2xhc3MuaW5kZXhPZigndWktc29ydGFibGUtaGFuZGxlJykgIT09IC0xKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGZpZWxkVHlwZSA9ICQoZmllbGQpLmF0dHIoJ3R5cGUnKTtcbiAgICBsZXQgJHByZXZIb2xkZXIgPSAkKCcucHJldi1ob2xkZXInLCBmaWVsZCk7XG4gICAgbGV0IHByZXZpZXdEYXRhID0ge1xuICAgICAgdHlwZTogZmllbGRUeXBlXG4gICAgfTtcbiAgICBsZXQgcHJldmlldztcblxuICAgICQoJ1tjbGFzcyo9XCJmbGQtXCJdJywgZmllbGQpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICBsZXQgbmFtZSA9IHV0aWxzLmNhbWVsQ2FzZSh0aGlzLm5hbWUpO1xuICAgICAgcHJldmlld0RhdGFbbmFtZV0gPSB0aGlzLnR5cGUgPT09ICdjaGVja2JveCcgPyB0aGlzLmNoZWNrZWQgOiB0aGlzLnZhbHVlO1xuICAgIH0pO1xuXG4gICAgbGV0IHN0eWxlID0gJCgnLmJ0bi1zdHlsZScsIGZpZWxkKS52YWwoKTtcbiAgICBpZiAoc3R5bGUpIHtcbiAgICAgIHByZXZpZXdEYXRhLnN0eWxlID0gc3R5bGU7XG4gICAgfVxuXG4gICAgaWYgKGZpZWxkVHlwZS5tYXRjaCgvKHNlbGVjdHxjaGVja2JveC1ncm91cHxyYWRpby1ncm91cCkvKSkge1xuICAgICAgcHJldmlld0RhdGEudmFsdWVzID0gW107XG4gICAgICBwcmV2aWV3RGF0YS5tdWx0aXBsZSA9ICQoJ1tuYW1lPVwibXVsdGlwbGVcIl0nLCBmaWVsZCkuaXMoJzpjaGVja2VkJyk7XG5cbiAgICAgICQoJy5zb3J0YWJsZS1vcHRpb25zIGxpJywgZmllbGQpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCBvcHRpb24gPSB7fTtcbiAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gJCgnLm9wdGlvbi1zZWxlY3RlZCcsIHRoaXMpLmlzKCc6Y2hlY2tlZCcpO1xuICAgICAgICBvcHRpb24udmFsdWUgPSAkKCcub3B0aW9uLXZhbHVlJywgdGhpcykudmFsKCk7XG4gICAgICAgIG9wdGlvbi5sYWJlbCA9ICQoJy5vcHRpb24tbGFiZWwnLCB0aGlzKS52YWwoKTtcbiAgICAgICAgcHJldmlld0RhdGEudmFsdWVzLnB1c2gob3B0aW9uKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHByZXZpZXdEYXRhID0gdXRpbHMudHJpbU9iaihwcmV2aWV3RGF0YSk7XG5cbiAgICBwcmV2aWV3RGF0YS5jbGFzc05hbWUgPSBfaGVscGVycy5jbGFzc05hbWVzKGZpZWxkLCBwcmV2aWV3RGF0YSk7XG4gICAgJCgnLmZsZC1jbGFzc05hbWUnLCBmaWVsZCkudmFsKHByZXZpZXdEYXRhLmNsYXNzTmFtZSk7XG5cbiAgICBmaWVsZC5kYXRhKCdmaWVsZERhdGEnLCBwcmV2aWV3RGF0YSk7XG4gICAgcHJldmlldyA9IHV0aWxzLmZpZWxkUmVuZGVyKHByZXZpZXdEYXRhLCBvcHRzLCB0cnVlKTtcblxuICAgICRwcmV2SG9sZGVyLmh0bWwocHJldmlldyk7XG5cbiAgICAkKCdpbnB1dFt0b2dnbGVdJywgJHByZXZIb2xkZXIpLmtjVG9nZ2xlKCk7XG4gIH07XG5cbiAgX2hlbHBlcnMuZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jLCB3YWl0ID0gMjUwLCBpbW1lZGlhdGUgPSBmYWxzZSkge1xuICAgIGxldCB0aW1lb3V0O1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGxldCBjb250ZXh0ID0gdGhpcztcbiAgICAgIGxldCBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgbGV0IGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICBpZiAoIWltbWVkaWF0ZSkge1xuICAgICAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBsZXQgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgIGlmIChjYWxsTm93KSB7XG4gICAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogRGlzcGxheSBhIGN1c3RvbSB0b29sdGlwIGZvciBkaXNhYmxlZCBmaWVsZHMuXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gZmllbGRcbiAgICovXG4gIF9oZWxwZXJzLmRpc2FibGVkVFQgPSB7XG4gICAgY2xhc3NOYW1lOiAnZnJtYi10dCcsXG4gICAgYWRkOiBmdW5jdGlvbihmaWVsZCkge1xuICAgICAgbGV0IHRpdGxlID0gb3B0cy5tZXNzYWdlcy5maWVsZE5vbkVkaXRhYmxlO1xuXG4gICAgICBpZiAodGl0bGUpIHtcbiAgICAgICAgbGV0IHR0ID0gdXRpbHMubWFya3VwKCdwJywgdGl0bGUsIHtjbGFzc05hbWU6IF9oZWxwZXJzLmRpc2FibGVkVFQuY2xhc3NOYW1lfSk7XG4gICAgICAgIGZpZWxkLmFwcGVuZCh0dCk7XG4gICAgICB9XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uKGZpZWxkKSB7XG4gICAgICAkKCcuZnJtYi10dCcsIGZpZWxkKS5yZW1vdmUoKTtcbiAgICB9XG4gIH07XG5cbiAgX2hlbHBlcnMuY2xhc3NOYW1lcyA9IGZ1bmN0aW9uKGZpZWxkLCBwcmV2aWV3RGF0YSkge1xuICAgIGxldCBpO1xuICAgIGxldCB0eXBlID0gcHJldmlld0RhdGEudHlwZTtcbiAgICBsZXQgc3R5bGUgPSBwcmV2aWV3RGF0YS5zdHlsZTtcbiAgICBsZXQgY2xhc3NOYW1lID0gZmllbGRbMF0ucXVlcnlTZWxlY3RvcignLmZsZC1jbGFzc05hbWUnKS52YWx1ZTtcbiAgICBsZXQgY2xhc3NlcyA9IGNsYXNzTmFtZS5zcGxpdCgnICcpO1xuICAgIGxldCB0eXBlcyA9IHtcbiAgICAgIGJ1dHRvbjogJ2J0bicsXG4gICAgICBzdWJtaXQ6ICdidG4nXG4gICAgfTtcblxuICAgIGxldCBwcmltYXJ5VHlwZSA9IHR5cGVzW3R5cGVdO1xuXG4gICAgaWYgKHByaW1hcnlUeXBlKSB7XG4gICAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsZXQgcmUgPSBuZXcgUmVnRXhwKGAoPzpefFxccykke3ByaW1hcnlUeXBlfS0oLio/KSg/Olxcc3wkKStgLCAnZycpO1xuICAgICAgICAgIGxldCBtYXRjaCA9IGNsYXNzZXNbaV0ubWF0Y2gocmUpO1xuICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgY2xhc3Nlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNsYXNzZXMucHVzaChwcmltYXJ5VHlwZSArICctJyArIHN0eWxlKTtcbiAgICAgIH1cbiAgICAgIGNsYXNzZXMucHVzaChwcmltYXJ5VHlwZSk7XG4gICAgfVxuXG4gICAgLy8gcmV2ZXJzZSB0aGUgYXJyYXkgdG8gcHV0IGN1c3RvbSBjbGFzc2VzIGF0IGVuZCxcbiAgICAvLyByZW1vdmUgYW55IGR1cGxpY2F0ZXMsIGNvbnZlcnQgdG8gc3RyaW5nLCByZW1vdmUgd2hpdGVzcGFjZVxuICAgIHJldHVybiB1dGlscy51bmlxdWUoY2xhc3Nlcykuam9pbignICcpLnRyaW0oKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xvc2VzIGFuZCBvcGVuIGRpYWxvZ1xuICAgKlxuICAgKiBAcGFyYW0gIHtPYmplY3R9IG92ZXJsYXkgRXhpc3Rpbmcgb3ZlcmxheSBpZiB0aGVyZSBpcyBvbmVcbiAgICogQHBhcmFtICB7T2JqZWN0fSBkaWFsb2cgIEV4aXN0aW5nIGRpYWxvZ1xuICAgKi9cbiAgX2hlbHBlcnMuY2xvc2VDb25maXJtID0gZnVuY3Rpb24ob3ZlcmxheSwgZGlhbG9nKSB7XG4gICAgaWYgKCFvdmVybGF5KSB7XG4gICAgICBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZm9ybS1idWlsZGVyLW92ZXJsYXknKVswXTtcbiAgICB9XG4gICAgaWYgKCFkaWFsb2cpIHtcbiAgICAgIGRpYWxvZyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Zvcm0tYnVpbGRlci1kaWFsb2cnKVswXTtcbiAgICB9XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgZGlhbG9nLnJlbW92ZSgpO1xuICAgIG92ZXJsYXkucmVtb3ZlKCk7XG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChmb3JtQnVpbGRlci5ldmVudHMubW9kYWxDbG9zZWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsYXlvdXQgZGF0YSBiYXNlZCBvbiBjb250cm9sUG9zaXRpb24gb3B0aW9uXG4gICAqIEBwYXJhbSAge1N0cmluZ30gY29udHJvbFBvc2l0aW9uICdsZWZ0JyBvciAncmlnaHQnXG4gICAqIEByZXR1cm4ge09iamVjdH0gbGF5b3V0IG9iamVjdFxuICAgKi9cbiAgX2hlbHBlcnMuZWRpdG9yTGF5b3V0ID0gZnVuY3Rpb24oY29udHJvbFBvc2l0aW9uKSB7XG4gICAgbGV0IGxheW91dE1hcCA9IHtcbiAgICAgIGxlZnQ6IHtcbiAgICAgICAgc3RhZ2U6ICdwdWxsLXJpZ2h0JyxcbiAgICAgICAgY29udHJvbHM6ICdwdWxsLWxlZnQnXG4gICAgICB9LFxuICAgICAgcmlnaHQ6IHtcbiAgICAgICAgc3RhZ2U6ICdwdWxsLWxlZnQnLFxuICAgICAgICBjb250cm9sczogJ3B1bGwtcmlnaHQnXG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXlvdXRNYXBbY29udHJvbFBvc2l0aW9uXSA/IGxheW91dE1hcFtjb250cm9sUG9zaXRpb25dIDogJyc7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFkZHMgb3ZlcmxheSB0byB0aGUgcGFnZS4gVXNlZCBmb3IgbW9kYWxzLlxuICAgKiBAcmV0dXJuIHtPYmplY3R9IERPTSBPYmplY3RcbiAgICovXG4gIF9oZWxwZXJzLnNob3dPdmVybGF5ID0gZnVuY3Rpb24oKSB7XG4gICAgbGV0IG92ZXJsYXkgPSB1dGlscy5tYXJrdXAoJ2RpdicsIG51bGwsIHtcbiAgICAgIGNsYXNzTmFtZTogJ2Zvcm0tYnVpbGRlci1vdmVybGF5J1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG5cbiAgICBvdmVybGF5Lm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgIF9oZWxwZXJzLmNsb3NlQ29uZmlybShvdmVybGF5KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIG92ZXJsYXk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEN1c3RvbSBjb25maXJtYXRpb24gZGlhbG9nXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gIG1lc3NhZ2UgICBDb250ZW50IHRvIGJlIGRpc3BsYXllZCBpbiB0aGUgZGlhbG9nXG4gICAqIEBwYXJhbSAge0Z1bmN9ICB5ZXNBY3Rpb24gY2FsbGJhY2sgdG8gZmlyZSBpZiB0aGV5IGNvbmZpcm1cbiAgICogQHBhcmFtICB7Qm9vbGVhbn0gY29vcmRzICAgIGxvY2F0aW9uIHRvIHB1dCB0aGUgZGlhbG9nXG4gICAqIEBwYXJhbSAge1N0cmluZ30gIGNsYXNzTmFtZSBDdXN0b20gY2xhc3MgdG8gYmUgYWRkZWQgdG8gdGhlIGRpYWxvZ1xuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgUmVmZXJlbmNlIHRvIHRoZSBtb2RhbFxuICAgKi9cbiAgX2hlbHBlcnMuY29uZmlybSA9IChtZXNzYWdlLCB5ZXNBY3Rpb24sIGNvb3JkcyA9IGZhbHNlLCBjbGFzc05hbWUgPSAnJykgPT4ge1xuICAgIGNvbnN0IG0gPSB1dGlscy5tYXJrdXA7XG4gICAgbGV0IG92ZXJsYXkgPSBfaGVscGVycy5zaG93T3ZlcmxheSgpO1xuICAgIGxldCB5ZXMgPSBtKCdidXR0b24nLCBvcHRzLm1lc3NhZ2VzLnllcywge1xuICAgICAgY2xhc3NOYW1lOiAneWVzIGJ0biBidG4tc3VjY2VzcyBidG4tc20nXG4gICAgfSk7XG4gICAgbGV0IG5vID0gbSgnYnV0dG9uJywgb3B0cy5tZXNzYWdlcy5ubywge1xuICAgICAgY2xhc3NOYW1lOiAnbm8gYnRuIGJ0bi1kYW5nZXIgYnRuLXNtJ1xuICAgIH0pO1xuXG4gICAgbm8ub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgX2hlbHBlcnMuY2xvc2VDb25maXJtKG92ZXJsYXkpO1xuICAgIH07XG5cbiAgICB5ZXMub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgeWVzQWN0aW9uKCk7XG4gICAgICBfaGVscGVycy5jbG9zZUNvbmZpcm0ob3ZlcmxheSk7XG4gICAgfTtcblxuICAgIGxldCBidG5XcmFwID0gbSgnZGl2JywgW25vLCB5ZXNdLCB7Y2xhc3NOYW1lOiAnYnV0dG9uLXdyYXAnfSk7XG5cbiAgICBjbGFzc05hbWUgPSAnZm9ybS1idWlsZGVyLWRpYWxvZyAnICsgY2xhc3NOYW1lO1xuXG4gICAgbGV0IG1pbmlNb2RhbCA9IG0oJ2RpdicsIFttZXNzYWdlLCBidG5XcmFwXSwge2NsYXNzTmFtZTogY2xhc3NOYW1lfSk7XG4gICAgaWYgKCFjb29yZHMpIHtcbiAgICAgIGNvb3JkcyA9IHtcbiAgICAgICAgcGFnZVg6IE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCwgd2luZG93LmlubmVyV2lkdGggfHwgMCkgLyAyLFxuICAgICAgICBwYWdlWTogTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0IHx8IDApIC8gMlxuICAgICAgfTtcbiAgICAgIG1pbmlNb2RhbC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1pbmlNb2RhbC5jbGFzc0xpc3QuYWRkKCdwb3NpdGlvbmVkJyk7XG4gICAgfVxuXG4gICAgbWluaU1vZGFsLnN0eWxlLmxlZnQgPSBjb29yZHMucGFnZVggKyAncHgnO1xuICAgIG1pbmlNb2RhbC5zdHlsZS50b3AgPSBjb29yZHMucGFnZVkgKyAncHgnO1xuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtaW5pTW9kYWwpO1xuXG4gICAgeWVzLmZvY3VzKCk7XG4gICAgcmV0dXJuIG1pbmlNb2RhbDtcbiAgfTtcblxuICAvKipcbiAgICogUG9wdXAgZGlhbG9nIHRoZSBkb2VzIG5vdCByZXF1aXJlIGNvbmZpcm1hdGlvbi5cbiAgICogQHBhcmFtICB7U3RyaW5nfERPTXxBcnJheX0gIGNvbnRlbnRcbiAgICogQHBhcmFtICB7Qm9vbGVhbn0gY29vcmRzICAgIGZhbHNlIGlmIG5vIGNvb3JkcyBhcmUgcHJvdmlkZWQuIFdpdGhvdXQgY29vcmRpbmF0ZXNcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBwb3B1cCB3aWxsIGFwcGVhciBjZW50ZXIgc2NyZWVuLlxuICAgKiBAcGFyYW0gIHtTdHJpbmd9ICBjbGFzc05hbWUgY2xhc3NuYW1lIHRvIGJlIGFkZGVkIHRvIHRoZSBkaWFsb2dcbiAgICogQHJldHVybiB7T2JqZWN0fSAgICAgICAgICAgIGRvbVxuICAgKi9cbiAgX2hlbHBlcnMuZGlhbG9nID0gZnVuY3Rpb24oY29udGVudCwgY29vcmRzID0gZmFsc2UsIGNsYXNzTmFtZSA9ICcnKSB7XG4gICAgX2hlbHBlcnMuc2hvd092ZXJsYXkoKTtcblxuICAgIGNsYXNzTmFtZSA9ICdmb3JtLWJ1aWxkZXItZGlhbG9nICcgKyBjbGFzc05hbWU7XG5cbiAgICBsZXQgbWluaU1vZGFsID0gdXRpbHMubWFya3VwKCdkaXYnLCBjb250ZW50LCB7Y2xhc3NOYW1lOiBjbGFzc05hbWV9KTtcbiAgICBpZiAoIWNvb3Jkcykge1xuICAgICAgY29vcmRzID0ge1xuICAgICAgICBwYWdlWDogTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCB8fCAwKSAvIDIsXG4gICAgICAgIHBhZ2VZOiBNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgMCkgLyAyXG4gICAgICB9O1xuICAgICAgbWluaU1vZGFsLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcbiAgICB9IGVsc2Uge1xuICAgICAgbWluaU1vZGFsLmNsYXNzTGlzdC5hZGQoJ3Bvc2l0aW9uZWQnKTtcbiAgICB9XG5cbiAgICBtaW5pTW9kYWwuc3R5bGUubGVmdCA9IGNvb3Jkcy5wYWdlWCArICdweCc7XG4gICAgbWluaU1vZGFsLnN0eWxlLnRvcCA9IGNvb3Jkcy5wYWdlWSArICdweCc7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1pbmlNb2RhbCk7XG5cbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGZvcm1CdWlsZGVyLmV2ZW50cy5tb2RhbE9wZW5lZCk7XG5cbiAgICBpZiAoY2xhc3NOYW1lLmluZGV4T2YoJ2RhdGEtZGlhbG9nJykgIT09IC0xKSB7XG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGZvcm1CdWlsZGVyLmV2ZW50cy52aWV3RGF0YSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1pbmlNb2RhbDtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgZmllbGRzIGZyb20gdGhlIGZvcm1cbiAgICovXG4gIF9oZWxwZXJzLnJlbW92ZUFsbGZpZWxkcyA9IGZ1bmN0aW9uKCkge1xuICAgIGxldCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9ybUJ1aWxkZXIuZm9ybUlEKTtcbiAgICBsZXQgZmllbGRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdsaS5mb3JtLWZpZWxkJyk7XG4gICAgbGV0ICRmaWVsZHMgPSAkKGZpZWxkcyk7XG4gICAgbGV0IG1hcmtFbXB0eUFycmF5ID0gW107XG5cbiAgICBpZiAoIWZpZWxkcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAob3B0cy5wcmVwZW5kKSB7XG4gICAgICBtYXJrRW1wdHlBcnJheS5wdXNoKHRydWUpO1xuICAgIH1cblxuICAgIGlmIChvcHRzLmFwcGVuZCkge1xuICAgICAgbWFya0VtcHR5QXJyYXkucHVzaCh0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAoIW1hcmtFbXB0eUFycmF5LnNvbWUoZWxlbSA9PiBlbGVtID09PSB0cnVlKSkge1xuICAgICAgZm9ybS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2VtcHR5Jyk7XG4gICAgICBmb3JtLnBhcmVudEVsZW1lbnQuZGF0YXNldC5jb250ZW50ID0gb3B0cy5tZXNzYWdlcy5nZXRTdGFydGVkO1xuICAgIH1cblxuICAgIGZvcm0uY2xhc3NMaXN0LmFkZCgncmVtb3ZpbmcnKTtcblxuICAgIGxldCBvdXRlckhlaWdodCA9IDA7XG4gICAgJGZpZWxkcy5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgIG91dGVySGVpZ2h0ICs9ICQoJGZpZWxkc1tpXSkub3V0ZXJIZWlnaHQoKSArIDM7XG4gICAgfSk7XG5cbiAgICBmaWVsZHNbMF0uc3R5bGUubWFyZ2luVG9wID0gKC1vdXRlckhlaWdodCkgKyAncHgnO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICRmaWVsZHMucmVtb3ZlKCk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmb3JtQnVpbGRlci5mb3JtSUQpLmNsYXNzTGlzdC5yZW1vdmUoJ3JlbW92aW5nJyk7XG4gICAgICBfaGVscGVycy5zYXZlKCk7XG4gICAgfSwgNDAwKTtcbiAgfTtcblxuICAvKipcbiAgICogSWYgdXNlciByZS1vcmRlcnMgdGhlIGVsZW1lbnRzIHRoZWlyIG9yZGVyIHNob3VsZCBiZSBzYXZlZC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9ICRjYlVMIG91ciBsaXN0IG9mIGVsZW1lbnRzXG4gICAqL1xuICBfaGVscGVycy5zZXRGaWVsZE9yZGVyID0gZnVuY3Rpb24oJGNiVUwpIHtcbiAgICBpZiAoIW9wdHMuc29ydGFibGVDb250cm9scykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBsZXQgZmllbGRPcmRlciA9IHt9O1xuICAgICRjYlVMLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgICAgZmllbGRPcmRlcltpbmRleF0gPSAkKGVsZW1lbnQpLmRhdGEoJ2F0dHJzJykudHlwZTtcbiAgICB9KTtcbiAgICBpZiAod2luZG93LnNlc3Npb25TdG9yYWdlKSB7XG4gICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnZmllbGRPcmRlcicsIHdpbmRvdy5KU09OLnN0cmluZ2lmeShmaWVsZE9yZGVyKSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZW9yZGVyIHRoZSBjb250cm9scyBpZiB0aGUgdXNlciBoYXMgcHJldmlvdXNseSBvcmRlcmVkIHRoZW0uXG4gICAqXG4gICAqIEBwYXJhbSAge0FycmF5fSBmcm1iRmllbGRzXG4gICAqIEByZXR1cm4ge0FycmF5fSBvcmRlcmVkIGZpZWxkc1xuICAgKi9cbiAgX2hlbHBlcnMub3JkZXJGaWVsZHMgPSBmdW5jdGlvbihmcm1iRmllbGRzKSB7XG4gICAgbGV0IGZpZWxkT3JkZXIgPSBmYWxzZTtcbiAgICBsZXQgbmV3T3JkZXJGaWVsZHMgPSBbXTtcblxuICAgIGlmICh3aW5kb3cuc2Vzc2lvblN0b3JhZ2UpIHtcbiAgICAgIGlmIChvcHRzLnNvcnRhYmxlQ29udHJvbHMpIHtcbiAgICAgICAgZmllbGRPcmRlciA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdmaWVsZE9yZGVyJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnZmllbGRPcmRlcicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZmllbGRPcmRlcikge1xuICAgICAgbGV0IGNvbnRyb2xPcmRlciA9IG9wdHMuY29udHJvbE9yZGVyLmNvbmNhdChmcm1iRmllbGRzLm1hcChmaWVsZCA9PlxuICAgICAgICBmaWVsZC5hdHRycy50eXBlKSk7XG4gICAgICBmaWVsZE9yZGVyID0gdXRpbHMudW5pcXVlKGNvbnRyb2xPcmRlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpZWxkT3JkZXIgPSB3aW5kb3cuSlNPTi5wYXJzZShmaWVsZE9yZGVyKTtcbiAgICAgIGZpZWxkT3JkZXIgPSBPYmplY3Qua2V5cyhmaWVsZE9yZGVyKS5tYXAoZnVuY3Rpb24oaSkge1xuICAgICAgICByZXR1cm4gZmllbGRPcmRlcltpXTtcbiAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgZmllbGRPcmRlci5mb3JFYWNoKChmaWVsZFR5cGUpID0+IHtcbiAgICAgIGxldCBmaWVsZCA9IGZybWJGaWVsZHMuZmlsdGVyKGZ1bmN0aW9uKGZpZWxkKSB7XG4gICAgICAgIHJldHVybiBmaWVsZC5hdHRycy50eXBlID09PSBmaWVsZFR5cGU7XG4gICAgICB9KVswXTtcbiAgICAgIG5ld09yZGVyRmllbGRzLnB1c2goZmllbGQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5ld09yZGVyRmllbGRzLmZpbHRlcihCb29sZWFuKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xvc2UgZmllbGRzIGJlaW5nIGVkaXRpbmdcbiAgICogQHBhcmFtICB7T2JqZWN0fSBzdGFnZVxuICAgKi9cbiAgX2hlbHBlcnMuY2xvc2VBbGxFZGl0ID0gKCkgPT4ge1xuICAgIGNvbnN0IGZpZWxkcyA9ICQoJz4gbGkuZWRpdGluZycsIGZvcm1CdWlsZGVyLnN0YWdlKTtcbiAgICBjb25zdCB0b2dnbGVCdG5zID0gJCgnLnRvZ2dsZS1mb3JtJywgZm9ybUJ1aWxkZXIuc3RhZ2UpO1xuICAgIGNvbnN0IGVkaXRQYW5lbHMgPSAkKCcuZnJtLWhvbGRlcicsIGZpZWxkcyk7XG5cbiAgICB0b2dnbGVCdG5zLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgZmllbGRzLnJlbW92ZUNsYXNzKCdlZGl0aW5nJyk7XG4gICAgJCgnLnByZXYtaG9sZGVyJywgZmllbGRzKS5zaG93KCk7XG4gICAgZWRpdFBhbmVscy5oaWRlKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRvZ2dsZXMgdGhlIGVkaXQgbW9kZSBmb3IgdGhlIGdpdmVuIGZpZWxkXG4gICAqIEBwYXJhbSAge1N0cmluZ30gZmllbGRJZFxuICAgKiBAcGFyYW0gIHtCb29sZWFufSBhbmltYXRlXG4gICAqL1xuICBfaGVscGVycy50b2dnbGVFZGl0ID0gZnVuY3Rpb24oZmllbGRJZCwgYW5pbWF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBmaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZpZWxkSWQpO1xuICAgIGNvbnN0IHRvZ2dsZUJ0biA9ICQoJy50b2dnbGUtZm9ybScsIGZpZWxkKTtcbiAgICBjb25zdCBlZGl0UGFuZWwgPSAkKCcuZnJtLWhvbGRlcicsIGZpZWxkKTtcbiAgICBmaWVsZC5jbGFzc0xpc3QudG9nZ2xlKCdlZGl0aW5nJyk7XG4gICAgdG9nZ2xlQnRuLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XG4gICAgaWYgKGFuaW1hdGUpIHtcbiAgICAgICQoJy5wcmV2LWhvbGRlcicsIGZpZWxkKS5zbGlkZVRvZ2dsZSgyNTApO1xuICAgICAgZWRpdFBhbmVsLnNsaWRlVG9nZ2xlKDI1MCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJy5wcmV2LWhvbGRlcicsIGZpZWxkKS50b2dnbGUoKTtcbiAgICAgIGVkaXRQYW5lbC50b2dnbGUoKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnRyb2xzIGZvbGxvdyBzY3JvbGwgdG8gdGhlIGJvdHRvbSBvZiB0aGUgZWRpdG9yXG4gICAqL1xuICBfaGVscGVycy5zdGlja3lDb250cm9scyA9ICgpID0+IHtcbiAgICBjb25zdCAkY2JXcmFwID0gJChmb3JtQnVpbGRlci5jb250cm9scykucGFyZW50KCk7XG4gICAgY29uc3QgJHN0YWdlV3JhcCA9ICQoZm9ybUJ1aWxkZXIuc3RhZ2UpLnBhcmVudCgpO1xuICAgIGNvbnN0IGNiV2lkdGggPSAkY2JXcmFwLndpZHRoKCk7XG4gICAgY29uc3QgY2JQb3NpdGlvbiA9IGZvcm1CdWlsZGVyLmNvbnRyb2xzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbihldnQpIHtcbiAgICAgIGxldCBzY3JvbGxUb3AgPSAkKGV2dC50YXJnZXQpLnNjcm9sbFRvcCgpO1xuXG4gICAgICBpZiAoc2Nyb2xsVG9wID4gJHN0YWdlV3JhcC5vZmZzZXQoKS50b3ApIHtcbiAgICAgICAgbGV0IGNiU3R5bGUgPSB7XG4gICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgICAgICAgd2lkdGg6IGNiV2lkdGgsXG4gICAgICAgICAgdG9wOiAnNXB4JyxcbiAgICAgICAgICBib3R0b206ICdhdXRvJyxcbiAgICAgICAgICByaWdodDogJ2F1dG8nLFxuICAgICAgICAgIGxlZnQ6IGNiUG9zaXRpb24ubGVmdFxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBjYk9mZnNldCA9ICRjYldyYXAub2Zmc2V0KCk7XG4gICAgICAgIGxldCBzdGFnZU9mZnNldCA9ICRzdGFnZVdyYXAub2Zmc2V0KCk7XG4gICAgICAgIGxldCBjYkJvdHRvbSA9IGNiT2Zmc2V0LnRvcCArICRjYldyYXAuaGVpZ2h0KCk7XG4gICAgICAgIGxldCBzdGFnZUJvdHRvbSA9IHN0YWdlT2Zmc2V0LnRvcCArICRzdGFnZVdyYXAuaGVpZ2h0KCk7XG5cbiAgICAgICAgaWYgKGNiQm90dG9tID4gc3RhZ2VCb3R0b20gJiYgKGNiT2Zmc2V0LnRvcCAhPT0gc3RhZ2VPZmZzZXQudG9wKSkge1xuICAgICAgICAgICRjYldyYXAuY3NzKHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgdG9wOiAnYXV0bycsXG4gICAgICAgICAgICBib3R0b206IDAsXG4gICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgIGxlZnQ6ICdhdXRvJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNiQm90dG9tIDwgc3RhZ2VCb3R0b20gfHwgKGNiQm90dG9tID09PSBzdGFnZUJvdHRvbSAmJiBjYk9mZnNldC50b3AgPiBzY3JvbGxUb3ApKSB7XG4gICAgICAgICAgJGNiV3JhcC5jc3MoY2JTdHlsZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcm1CdWlsZGVyLmNvbnRyb2xzLnBhcmVudEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBPcGVuIGEgZGlhbG9nIHdpdGggdGhlIGZvcm0ncyBkYXRhXG4gICAqL1xuICBfaGVscGVycy5zaG93RGF0YSA9ICgpID0+IHtcbiAgICBjb25zdCBtID0gdXRpbHMubWFya3VwO1xuICAgIGNvbnN0IGRhdGEgPSB1dGlscy5lc2NhcGVIdG1sKGZvcm1CdWlsZGVyLmZvcm1EYXRhKTtcbiAgICBjb25zdCBjb2RlID0gbSgnY29kZScsIGRhdGEsIHtjbGFzc05hbWU6IGBmb3JtRGF0YS0ke29wdHMuZGF0YVR5cGV9YH0pO1xuXG4gICAgX2hlbHBlcnMuZGlhbG9nKG0oJ3ByZScsIGNvZGUpLCBudWxsLCAnZGF0YS1kaWFsb2cnKTtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGEgZmllbGQgZnJvbSB0aGUgc3RhZ2VcbiAgICogQHBhcmFtICB7U3RyaW5nfSAgZmllbGRJRCBJRCBvZiB0aGUgZmllbGQgdG8gYmUgcmVtb3ZlZFxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBmaWVsZFJlbW92ZWQgcmV0dXJucyB0cnVlIGlmIGZpZWxkIGlzIHJlbW92ZWRcbiAgICovXG4gIF9oZWxwZXJzLnJlbW92ZUZpZWxkID0gKGZpZWxkSUQpID0+IHtcbiAgICBsZXQgZmllbGRSZW1vdmVkID0gZmFsc2U7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvcm1CdWlsZGVyLmZvcm1JRCk7XG4gICAgY29uc3QgZmllbGRzID0gZm9ybS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdmb3JtLWZpZWxkJyk7XG5cbiAgICBpZiAoIWZpZWxkcy5sZW5ndGgpIHtcbiAgICAgIGNvbnNvbGUud2FybignTm8gZmllbGRzIHRvIHJlbW92ZScpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghZmllbGRJRCkge1xuICAgICAgbGV0IGF2YWlsYWJsZUlkcyA9IFtdLnNsaWNlLmNhbGwoZmllbGRzKS5tYXAoKGZpZWxkKSA9PiB7XG4gICAgICAgIHJldHVybiBmaWVsZC5pZDtcbiAgICAgIH0pO1xuICAgICAgY29uc29sZS53YXJuKCdmaWVsZElEIHJlcXVpcmVkIHRvIHVzZSBgcmVtb3ZlRmllbGRgIGFjdGlvbi4nKTtcbiAgICAgIGNvbnNvbGUud2FybignQXZhaWxhYmxlIElEczogJyArIGF2YWlsYWJsZUlkcy5qb2luKCcsICcpKTtcbiAgICB9XG5cbiAgICBjb25zdCBmaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZpZWxkSUQpO1xuICAgIGNvbnN0ICRmaWVsZCA9ICQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGRJRCkpO1xuICAgIGlmICghZmllbGQpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmllbGQgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgJGZpZWxkLnNsaWRlVXAoMjUwLCBmdW5jdGlvbigpIHtcbiAgICAgICRmaWVsZC5yZW1vdmVDbGFzcygnZGVsZXRpbmcnKTtcbiAgICAgICRmaWVsZC5yZW1vdmUoKTtcbiAgICAgIGZpZWxkUmVtb3ZlZCA9IHRydWU7XG4gICAgICBfaGVscGVycy5zYXZlKCk7XG4gICAgICBpZiAoIWZvcm0uY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgbGV0IHN0YWdlV3JhcCA9IGZvcm0ucGFyZW50RWxlbWVudDtcbiAgICAgICAgc3RhZ2VXcmFwLmNsYXNzTGlzdC5hZGQoJ2VtcHR5Jyk7XG4gICAgICAgIHN0YWdlV3JhcC5kYXRhc2V0LmNvbnRlbnQgPSBvcHRzLm1lc3NhZ2VzLmdldFN0YXJ0ZWQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGZvcm1CdWlsZGVyLmV2ZW50cy5maWVsZFJlbW92ZWQpO1xuICAgIHJldHVybiBmaWVsZFJlbW92ZWQ7XG4gIH07XG5cbiAgcmV0dXJuIF9oZWxwZXJzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhlbHBlcnM7XG4iLCJjb25zdCBrY1RvZ2dsZSA9ICgpID0+IHtcbiAgY29uc3QgVG9nZ2xlID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xuICAgIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgICAgdGhlbWU6ICdmcmVzaCcsXG4gICAgICBtZXNzYWdlczoge1xuICAgICAgICBvZmY6ICdPZmYnLFxuICAgICAgICBvbjogJ09uJ1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsZXQgb3B0cyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcbiAgICBsZXQgJGtjVG9nZ2xlID0gJCgnPGRpdiBjbGFzcz1cImtjLXRvZ2dsZVwiLz4nKVxuICAgICAgICAuaW5zZXJ0QWZ0ZXIoZWxlbWVudClcbiAgICAgICAgLmFwcGVuZChlbGVtZW50KTtcblxuICAgICRrY1RvZ2dsZS50b2dnbGVDbGFzcygnb24nLCBlbGVtZW50LmlzKCc6Y2hlY2tlZCcpKTtcblxuICAgIGxldCBrY3RPbiA9IGA8ZGl2IGNsYXNzPVwia2N0LW9uXCI+JHtvcHRzLm1lc3NhZ2VzLm9ufTwvZGl2PmA7XG4gICAgbGV0IGtjdE9mZiA9IGA8ZGl2IGNsYXNzPVwia2N0LW9mZlwiPiR7b3B0cy5tZXNzYWdlcy5vZmZ9PC9kaXY+YDtcbiAgICBsZXQga2N0SGFuZGxlID0gJzxkaXYgY2xhc3M9XCJrY3QtaGFuZGxlXCI+PC9kaXY+JztcbiAgICBsZXQga2N0SW5uZXIgPSBgPGRpdiBjbGFzcz1cImtjdC1pbm5lclwiPiR7a2N0T259JHtrY3RIYW5kbGV9JHtrY3RPZmZ9PC9kaXY+YDtcblxuICAgICRrY1RvZ2dsZS5hcHBlbmQoa2N0SW5uZXIpO1xuXG4gICAgJGtjVG9nZ2xlLmNsaWNrKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgZWxlbWVudC5hdHRyKCdjaGVja2VkJywgIWVsZW1lbnQuYXR0cignY2hlY2tlZCcpKTtcbiAgICAgICRrY1RvZ2dsZS50b2dnbGVDbGFzcygnb24nKTtcbiAgICB9KTtcbiAgfTtcblxuICBqUXVlcnkuZm4ua2NUb2dnbGUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgY29uc3QgdG9nZ2xlID0gdGhpcztcbiAgICByZXR1cm4gdG9nZ2xlLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgbGV0IGVsZW1lbnQgPSAkKHRvZ2dsZVtpXSk7XG4gICAgICBpZiAoZWxlbWVudC5kYXRhKCdrY1RvZ2dsZScpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGxldCBrY1RvZ2dsZSA9IG5ldyBUb2dnbGUoZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICBlbGVtZW50LmRhdGEoJ2tjVG9nZ2xlJywga2NUb2dnbGUpO1xuICAgIH0pO1xuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBrY1RvZ2dsZSgpO1xuIiwiLyoqXG4gKiBQb2x5ZmlsbHMgZm9yIG9sZGVyIGJyb3dzZXJzIGFuZCBhZGRlZCBmdW5jdGlvbmFsaXR5XG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5mdW5jdGlvbiBwb2x5ZmlsbHMoKSB7XG4gIC8vIEVsZW1lbnQucmVtb3ZlKCkgcG9seWZpbGxcbiAgaWYgKCEoJ3JlbW92ZScgaW4gRWxlbWVudC5wcm90b3R5cGUpKSB7XG4gICAgRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5wYXJlbnROb2RlKSB7XG4gICAgICAgIHRoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gRXZlbnQgcG9seWZpbGxcbiAgaWYgKHR5cGVvZiBFdmVudCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHdpbmRvdy5FdmVudCA9IGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICBsZXQgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICAgICAgZXZlbnQuaW5pdEV2ZW50KGV2dCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBldmVudDtcbiAgICAgIH07XG4gICAgfSkoKTtcbiAgfVxuXG4gIC8vIE9iamVjdC5hc3NpZ24gcG9seWZpbGxcbiAgaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9ICdmdW5jdGlvbicpIHtcbiAgICBPYmplY3QuYXNzaWduID0gZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAndXNlIHN0cmljdCc7XG4gICAgICBpZiAodGFyZ2V0ID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gICAgICB9XG5cbiAgICAgIHRhcmdldCA9IE9iamVjdCh0YXJnZXQpO1xuICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgbGV0IHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICAgIGlmIChzb3VyY2UgIT0gbnVsbCkge1xuICAgICAgICAgIGZvciAobGV0IGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwb2x5ZmlsbHMoKTtcbiIsIi8qKlxuICogQ3Jvc3MgZmlsZSB1dGlsaXRpZXMgZm9yIHdvcmtpbmcgd2l0aCBhcnJheXMsXG4gKiBzb3J0aW5nIGFuZCBvdGhlciBmdW4gc3R1ZmZcbiAqIEByZXR1cm4ge09iamVjdH0gZmJVdGlsc1xuICovXG4vLyBmdW5jdGlvbiB1dGlscygpIHtcbiAgY29uc3QgZmJVdGlscyA9IHt9O1xuXG4gIC8vIGNsZWFuZXIgc3ludGF4IGZvciB0ZXN0aW5nIGluZGV4T2YgZWxlbWVudFxuICBmYlV0aWxzLmluQXJyYXkgPSBmdW5jdGlvbihuZWVkbGUsIGhheXN0YWNrKSB7XG4gICAgcmV0dXJuIGhheXN0YWNrLmluZGV4T2YobmVlZGxlKSAhPT0gLTE7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBudWxsIG9yIHVuZGVmaW5lZCB2YWx1ZXNcbiAgICogQHBhcmFtICB7T2JqZWN0fSBhdHRycyB7YXR0ck5hbWU6IGF0dHJWYWx1ZX1cbiAgICogQHJldHVybiB7T2JqZWN0fSAgICAgICBPYmplY3QgdHJpbW1lZCBvZiBudWxsIG9yIHVuZGVmaW5lZCB2YWx1ZXNcbiAgICovXG4gIGZiVXRpbHMudHJpbU9iaiA9IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgbGV0IHhtbFJlbW92ZSA9IFtcbiAgICAgIG51bGwsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICAnJyxcbiAgICAgIGZhbHNlLFxuICAgICAgJ2ZhbHNlJ1xuICAgIF07XG4gICAgZm9yIChsZXQgYXR0ciBpbiBhdHRycykge1xuICAgICAgaWYgKGZiVXRpbHMuaW5BcnJheShhdHRyc1thdHRyXSwgeG1sUmVtb3ZlKSkge1xuICAgICAgICBkZWxldGUgYXR0cnNbYXR0cl07XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXR0cnNbYXR0cl0pKSB7XG4gICAgICAgIGlmICghYXR0cnNbYXR0cl0ubGVuZ3RoKSB7XG4gICAgICAgICAgZGVsZXRlIGF0dHJzW2F0dHJdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGF0dHJzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUZXN0IGlmIGF0dHJpYnV0ZSBpcyBhIHZhbGlkIEhUTUwgYXR0cmlidXRlXG4gICAqIEBwYXJhbSAge1N0cmluZ30gYXR0clxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgZmJVdGlscy52YWxpZEF0dHIgPSBmdW5jdGlvbihhdHRyKSB7XG4gICAgbGV0IGludmFsaWQgPSBbXG4gICAgICAndmFsdWVzJyxcbiAgICAgICdlbmFibGVPdGhlcicsXG4gICAgICAnb3RoZXInLFxuICAgICAgJ2xhYmVsJyxcbiAgICAgIC8vICdzdHlsZScsXG4gICAgICAnc3VidHlwZSdcbiAgICBdO1xuICAgIHJldHVybiAhZmJVdGlscy5pbkFycmF5KGF0dHIsIGludmFsaWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGFuIGF0dHJzIG9iamVjdCBpbnRvIGEgc3RyaW5nXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gYXR0cnMgb2JqZWN0IG9mIGF0dHJpYnV0ZXMgZm9yIG1hcmt1cFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBmYlV0aWxzLmF0dHJTdHJpbmcgPSBmdW5jdGlvbihhdHRycykge1xuICAgIGxldCBhdHRyaWJ1dGVzID0gW107XG5cbiAgICBmb3IgKGxldCBhdHRyIGluIGF0dHJzKSB7XG4gICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoYXR0cikgJiYgZmJVdGlscy52YWxpZEF0dHIoYXR0cikpIHtcbiAgICAgICAgYXR0ciA9IGZiVXRpbHMuc2FmZUF0dHIoYXR0ciwgYXR0cnNbYXR0cl0pO1xuICAgICAgICBhdHRyaWJ1dGVzLnB1c2goYXR0ci5uYW1lICsgYXR0ci52YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhdHRyaWJ1dGVzLmpvaW4oJyAnKTtcbiAgfTtcblxuICAvKipcbiAgICogQ29udmVydCBhdHRyaWJ1dGVzIHRvIG1hcmt1cCBzYWZlIHN0cmluZ3NcbiAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lICBhdHRyaWJ1dGUgbmFtZVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IHZhbHVlIGF0dHJpYnV0ZSB2YWx1ZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgIHthdHRyTmFtZTogYXR0clZhbHVlfVxuICAgKi9cbiAgZmJVdGlscy5zYWZlQXR0ciA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgbmFtZSA9IGZiVXRpbHMuc2FmZUF0dHJOYW1lKG5hbWUpO1xuICAgIGxldCB2YWxTdHJpbmc7XG5cbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICB2YWxTdHJpbmcgPSBmYlV0aWxzLmVzY2FwZUF0dHIodmFsdWUuam9pbignICcpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0eXBlb2YodmFsdWUpID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsU3RyaW5nID0gZmJVdGlscy5lc2NhcGVBdHRyKHZhbHVlLnJlcGxhY2UoJywnLCAnICcpLnRyaW0oKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFsdWUgPSB2YWx1ZSA/IGA9XCIke3ZhbFN0cmluZ31cImAgOiAnJztcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZSxcbiAgICAgIHZhbHVlXG4gICAgfTtcbiAgfTtcblxuICBmYlV0aWxzLnNhZmVBdHRyTmFtZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBsZXQgc2FmZUF0dHIgPSB7XG4gICAgICBjbGFzc05hbWU6ICdjbGFzcydcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNhZmVBdHRyW25hbWVdIHx8IGZiVXRpbHMuaHlwaGVuQ2FzZShuYW1lKTtcbiAgfTtcblxuICAvKipcbiAgICogQ29udmVydCBzdHJpbmdzIGludG8gbG93ZXJjYXNlLWh5cGhlblxuICAgKlxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IHN0clxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICBmYlV0aWxzLmh5cGhlbkNhc2UgPSAoc3RyKSA9PiB7XG4gICAgc3RyID0gc3RyLnJlcGxhY2UoL1teXFx3XFxzXFwtXS9naSwgJycpO1xuICAgIHN0ciA9IHN0ci5yZXBsYWNlKC8oW0EtWl0pL2csIGZ1bmN0aW9uKCQxKSB7XG4gICAgICByZXR1cm4gJy0nICsgJDEudG9Mb3dlckNhc2UoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzdHIucmVwbGFjZSgvXFxzL2csICctJykucmVwbGFjZSgvXi0rL2csICcnKTtcbiAgfTtcblxuICAvKipcbiAgICogY29udmVydCBhIGh5cGhlbmF0ZWQgc3RyaW5nIHRvIGNhbWVsQ2FzZVxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IHN0clxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICBmYlV0aWxzLmNhbWVsQ2FzZSA9IChzdHIpID0+IHtcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoLy0oW2Etel0pL2csIGZ1bmN0aW9uKG0sIHcpIHtcbiAgICAgIHJldHVybiB3LnRvVXBwZXJDYXNlKCk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIG1hcmt1cCB3cmFwcGVyIHdoZXJlIG5lZWRlZFxuICAgKlxuICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgICAgICB0YWdcbiAgICogQHBhcmFtICB7U3RyaW5nfEFycmF5fE9iamVjdH0gY29udGVudCB3ZSB3cmFwIHRoaXNcbiAgICogQHBhcmFtICB7T2JqZWN0fSAgICAgICAgICAgICAgYXR0cnNcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgZmJVdGlscy5tYXJrdXAgPSBmdW5jdGlvbih0YWcsIGNvbnRlbnQgPSAnJywgYXR0cnMgPSB7fSkge1xuICAgIGxldCBjb250ZW50VHlwZSxcbiAgICAgIGZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpLFxuICAgICAgZ2V0Q29udGVudFR5cGUgPSBmdW5jdGlvbihjb250ZW50KSB7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGNvbnRlbnQpID8gJ2FycmF5JyA6IHR5cGVvZiBjb250ZW50O1xuICAgICAgfSxcbiAgICAgIGFwcGVuZENvbnRlbnQgPSB7XG4gICAgICAgIHN0cmluZzogZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgIGZpZWxkLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIG9iamVjdDogZnVuY3Rpb24oY29udGVudCkge1xuICAgICAgICAgIHJldHVybiBmaWVsZC5hcHBlbmRDaGlsZChjb250ZW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgYXJyYXk6IGZ1bmN0aW9uKGNvbnRlbnQpIHtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRlbnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlID0gZ2V0Q29udGVudFR5cGUoY29udGVudFtpXSk7XG4gICAgICAgICAgICBhcHBlbmRDb250ZW50W2NvbnRlbnRUeXBlXShjb250ZW50W2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICBmb3IgKGxldCBhdHRyIGluIGF0dHJzKSB7XG4gICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoYXR0cikpIHtcbiAgICAgICAgbGV0IG5hbWUgPSBmYlV0aWxzLnNhZmVBdHRyTmFtZShhdHRyKTtcbiAgICAgICAgZmllbGQuc2V0QXR0cmlidXRlKG5hbWUsIGF0dHJzW2F0dHJdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb250ZW50VHlwZSA9IGdldENvbnRlbnRUeXBlKGNvbnRlbnQpO1xuXG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIGFwcGVuZENvbnRlbnRbY29udGVudFR5cGVdLmNhbGwodGhpcywgY29udGVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpZWxkO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGh0bWwgZWxlbWVudCBhdHRyaWJ1dGVzIHRvIGtleS92YWx1ZSBvYmplY3RcbiAgICogQHBhcmFtICB7T2JqZWN0fSBET00gZWxlbWVudFxuICAgKiBAcmV0dXJuIHtPYmplY3R9IGV4OiB7YXR0ck5hbWU6IGF0dHJWYWx1ZX1cbiAgICovXG4gIGZiVXRpbHMucGFyc2VBdHRycyA9IGZ1bmN0aW9uKGVsZW0pIHtcbiAgICBsZXQgYXR0cnMgPSBlbGVtLmF0dHJpYnV0ZXM7XG4gICAgbGV0IGRhdGEgPSB7fTtcbiAgICBmYlV0aWxzLmZvckVhY2goYXR0cnMsIGF0dHIgPT4ge1xuICAgICAgbGV0IGF0dHJWYWwgPSBhdHRyc1thdHRyXS52YWx1ZTtcbiAgICAgIGlmIChhdHRyVmFsLm1hdGNoKC9mYWxzZXx0cnVlL2cpKSB7XG4gICAgICAgIGF0dHJWYWwgPSAoYXR0clZhbCA9PT0gJ3RydWUnKTtcbiAgICAgIH0gZWxzZSBpZiAoYXR0clZhbC5tYXRjaCgvdW5kZWZpbmVkL2cpKSB7XG4gICAgICAgIGF0dHJWYWwgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChhdHRyVmFsKSB7XG4gICAgICAgIGRhdGFbYXR0cnNbYXR0cl0ubmFtZV0gPSBhdHRyVmFsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgZmllbGQgb3B0aW9ucyB0byBvcHRpb25EYXRhXG4gICAqIEBwYXJhbSAge09iamVjdH0gRE9NIGVsZW1lbnRcbiAgICogQHJldHVybiB7QXJyYXl9ICAgICAgb3B0aW9uRGF0YSBhcnJheVxuICAgKi9cbiAgZmJVdGlscy5wYXJzZU9wdGlvbnMgPSBmdW5jdGlvbihmaWVsZCkge1xuICAgIGxldCBvcHRpb25zID0gZmllbGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ29wdGlvbicpLFxuICAgICAgb3B0aW9uRGF0YSA9IHt9LFxuICAgICAgZGF0YSA9IFtdO1xuXG4gICAgaWYgKG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgb3B0aW9uRGF0YSA9IGZiVXRpbHMucGFyc2VBdHRycyhvcHRpb25zW2ldKTtcbiAgICAgICAgb3B0aW9uRGF0YS5sYWJlbCA9IG9wdGlvbnNbaV0udGV4dENvbnRlbnQ7XG4gICAgICAgIGRhdGEucHVzaChvcHRpb25EYXRhKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICAvKipcbiAgICogUGFyc2UgWE1MIGZvcm1EYXRhXG4gICAqIEBwYXJhbSAge1N0cmluZ30geG1sU3RyaW5nXG4gICAqIEByZXR1cm4ge0FycmF5fSAgICAgICAgICAgIGZvcm1EYXRhIGFycmF5XG4gICAqL1xuICBmYlV0aWxzLnBhcnNlWE1MID0gZnVuY3Rpb24oeG1sU3RyaW5nKSB7XG4gICAgY29uc3QgcGFyc2VyID0gbmV3IHdpbmRvdy5ET01QYXJzZXIoKTtcbiAgICBsZXQgeG1sID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyh4bWxTdHJpbmcsICd0ZXh0L3htbCcpLFxuICAgICAgZm9ybURhdGEgPSBbXTtcblxuICAgIGlmICh4bWwpIHtcbiAgICAgIGxldCBmaWVsZHMgPSB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2ZpZWxkJyk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgZmllbGREYXRhID0gZmJVdGlscy5wYXJzZUF0dHJzKGZpZWxkc1tpXSk7XG5cbiAgICAgICAgaWYgKGZpZWxkc1tpXS5jaGlsZHJlbiAmJiBmaWVsZHNbaV0uY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgZmllbGREYXRhLnZhbHVlcyA9IGZiVXRpbHMucGFyc2VPcHRpb25zKGZpZWxkc1tpXSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JtRGF0YS5wdXNoKGZpZWxkRGF0YSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvcm1EYXRhO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFc2NhcGUgbWFya3VwIHNvIGl0IGNhbiBiZSBkaXNwbGF5ZWQgcmF0aGVyIHRoYW4gcmVuZGVyZWRcbiAgICogQHBhcmFtICB7U3RyaW5nfSBodG1sIG1hcmt1cFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgZXNjYXBlZCBodG1sXG4gICAqL1xuICBmYlV0aWxzLmVzY2FwZUh0bWwgPSBmdW5jdGlvbihodG1sKSB7XG4gICAgbGV0IGVzY2FwZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIGVzY2FwZUVsZW1lbnQudGV4dENvbnRlbnQgPSBodG1sO1xuICAgIHJldHVybiBlc2NhcGVFbGVtZW50LmlubmVySFRNTDtcbiAgfTtcblxuICAvLyBFc2NhcGUgYW4gYXR0cmlidXRlXG4gIGZiVXRpbHMuZXNjYXBlQXR0ciA9IGZ1bmN0aW9uKHN0cikge1xuICAgIGxldCBtYXRjaCA9IHtcbiAgICAgICdcIic6ICcmcXVvdDsnLFxuICAgICAgJyYnOiAnJmFtcDsnLFxuICAgICAgJzwnOiAnJmx0OycsXG4gICAgICAnPic6ICcmZ3Q7J1xuICAgIH07XG5cbiAgICBjb25zdCByZXBsYWNlVGFnID0gdGFnID0+IG1hdGNoW3RhZ10gfHwgdGFnO1xuXG4gICAgcmV0dXJuICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJykgPyBzdHIucmVwbGFjZSgvW1wiJjw+XS9nLCByZXBsYWNlVGFnKSA6IHN0cjtcbiAgfTtcblxuICAvLyBFc2NhcGUgYXR0cmlidXRlc1xuICBmYlV0aWxzLmVzY2FwZUF0dHJzID0gZnVuY3Rpb24oYXR0cnMpIHtcbiAgICBmb3IgKGxldCBhdHRyIGluIGF0dHJzKSB7XG4gICAgICBpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoYXR0cikpIHtcbiAgICAgICAgYXR0cnNbYXR0cl0gPSBmYlV0aWxzLmVzY2FwZUF0dHIoYXR0cnNbYXR0cl0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhdHRycztcbiAgfTtcblxuICAvLyBmb3JFYWNoIHRoYXQgY2FuIGJlIHVzZWQgb24gbm9kZUxpc3RcbiAgZmJVdGlscy5mb3JFYWNoID0gZnVuY3Rpb24oYXJyYXksIGNhbGxiYWNrLCBzY29wZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNhbGxiYWNrLmNhbGwoc2NvcGUsIGksIGFycmF5W2ldKTsgLy8gcGFzc2VzIGJhY2sgc3R1ZmYgd2UgbmVlZFxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGR1cGxpY2F0ZXMgZnJvbSBhbiBhcnJheSBvZiBlbGVtZW50c1xuICAgKiBAcGFyYW0gIHtBcnJheX0gYXJyQXJnIGFycmF5IHdpdGggcG9zc2libGUgZHVwbGljYXRlc1xuICAgKiBAcmV0dXJuIHtBcnJheX0gICAgICAgIGFycmF5IHdpdGggb25seSB1bmlxdWUgdmFsdWVzXG4gICAqL1xuICBmYlV0aWxzLnVuaXF1ZSA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgcmV0dXJuIGFycmF5LmZpbHRlcigoZWxlbSwgcG9zLCBhcnIpID0+IHtcbiAgICAgIHJldHVybiBhcnIuaW5kZXhPZihlbGVtKSA9PT0gcG9zO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBwcmV2aWV3IG1hcmt1cFxuICAgKiBAcGFyYW0gIHtPYmplY3R9ICBmaWVsZERhdGFcbiAgICogQHBhcmFtICB7T2JqZWN0fSAgb3B0c1xuICAgKiBAcGFyYW0gIHtCb29sZWFufSBwcmV2aWV3XG4gICAqIEByZXR1cm4ge1N0cmluZ30gIHByZXZpZXcgbWFya3VwIGZvciBmaWVsZFxuICAgKi9cbiAgZmJVdGlscy5maWVsZFJlbmRlciA9IGZ1bmN0aW9uKGZpZWxkRGF0YSwgb3B0cywgcHJldmlldyA9IGZhbHNlKSB7XG4gICAgICBsZXQgZmllbGRNYXJrdXAgPSAnJztcbiAgICAgIGxldCBmaWVsZExhYmVsID0gJyc7XG4gICAgICBsZXQgb3B0aW9uc01hcmt1cCA9ICcnO1xuICAgICAgbGV0IGZpZWxkTGFiZWxUZXh0ID0gZmllbGREYXRhLmxhYmVsIHx8ICcnO1xuICAgICAgbGV0IGZpZWxkRGVzYyA9IGZpZWxkRGF0YS5kZXNjcmlwdGlvbiB8fCAnJztcbiAgICAgIGxldCBmaWVsZFJlcXVpcmVkID0gJyc7XG4gICAgICBsZXQgZmllbGRPcHRpb25zID0gZmllbGREYXRhLnZhbHVlcztcblxuICAgICAgZmllbGREYXRhLm5hbWUgPSBwcmV2aWV3ID8gZmllbGREYXRhLm5hbWUgKyAnLXByZXZpZXcnIDogZmllbGREYXRhLm5hbWU7XG4gICAgICBmaWVsZERhdGEuaWQgPSBmaWVsZERhdGEubmFtZTtcbiAgICAgIGlmIChmaWVsZERhdGEubXVsdGlwbGUpIHtcbiAgICAgICAgZmllbGREYXRhLm5hbWUgPSBmaWVsZERhdGEubmFtZSArICdbXSc7XG4gICAgICB9XG5cbiAgICAgIGZpZWxkRGF0YS50eXBlID0gZmllbGREYXRhLnN1YnR5cGUgfHwgZmllbGREYXRhLnR5cGU7XG5cbiAgICAgIGlmIChmaWVsZERhdGEucmVxdWlyZWQpIHtcbiAgICAgICAgZmllbGREYXRhLnJlcXVpcmVkID0gbnVsbDtcbiAgICAgICAgZmllbGREYXRhWydhcmlhLXJlcXVpcmVkJ10gPSAndHJ1ZSc7XG4gICAgICAgIGZpZWxkUmVxdWlyZWQgPSAnPHNwYW4gY2xhc3M9XCJyZXF1aXJlZFwiPio8L3NwYW4+JztcbiAgICAgIH1cblxuICAgICAgaWYgKGZpZWxkRGF0YS50eXBlICE9PSAnaGlkZGVuJykge1xuICAgICAgICBpZiAoZmllbGREZXNjKSB7XG4gICAgICAgICAgZmllbGREZXNjID0gYDxzcGFuIGNsYXNzPVwidG9vbHRpcC1lbGVtZW50XCIgdG9vbHRpcD1cIiR7ZmllbGREZXNjfVwiPj88L3NwYW4+YDtcbiAgICAgICAgfVxuICAgICAgICBmaWVsZExhYmVsID0gYDxsYWJlbCBmb3I9XCIke2ZpZWxkRGF0YS5pZH1cIiBjbGFzcz1cImZiLSR7ZmllbGREYXRhLnR5cGV9LWxhYmVsXCI+JHtmaWVsZExhYmVsVGV4dH0gJHtmaWVsZFJlcXVpcmVkfSAke2ZpZWxkRGVzY308L2xhYmVsPmA7XG4gICAgICB9XG5cbiAgICAgIGxldCBmaWVsZExhYmVsVmFsID0gZmllbGREYXRhLmxhYmVsO1xuXG4gICAgICBkZWxldGUgZmllbGREYXRhLmxhYmVsO1xuICAgICAgZGVsZXRlIGZpZWxkRGF0YS5kZXNjcmlwdGlvbjtcblxuICAgICAgbGV0IGZpZWxkRGF0YVN0cmluZyA9IGZiVXRpbHMuYXR0clN0cmluZyhmaWVsZERhdGEpO1xuXG4gICAgICBzd2l0Y2ggKGZpZWxkRGF0YS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICAgICAgY2FzZSAncmljaC10ZXh0JzpcbiAgICAgICAgICBkZWxldGUgZmllbGREYXRhLnR5cGU7XG4gICAgICAgICAgbGV0IGZpZWxkVmFsID0gZmllbGREYXRhLnZhbHVlIHx8ICcnO1xuICAgICAgICAgIGZpZWxkTWFya3VwID0gYCR7ZmllbGRMYWJlbH08dGV4dGFyZWEgJHtmaWVsZERhdGFTdHJpbmd9PiR7ZmllbGRWYWx9PC90ZXh0YXJlYT5gO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgICAgIGxldCBvcHRpb25BdHRyc1N0cmluZztcbiAgICAgICAgICBmaWVsZERhdGEudHlwZSA9IGZpZWxkRGF0YS50eXBlLnJlcGxhY2UoJy1ncm91cCcsICcnKTtcblxuICAgICAgICAgIGlmIChmaWVsZE9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChmaWVsZERhdGEucGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgb3B0aW9uc01hcmt1cCArPSBgPG9wdGlvbiBkaXNhYmxlZCBzZWxlY3RlZD4ke2ZpZWxkRGF0YS5wbGFjZWhvbGRlcn08L29wdGlvbj5gO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpZWxkT3B0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBpZiAoIWZpZWxkT3B0aW9uc1tpXS5zZWxlY3RlZCB8fCBmaWVsZERhdGEucGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgZmllbGRPcHRpb25zW2ldLnNlbGVjdGVkO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICghZmllbGRPcHRpb25zW2ldLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgZmllbGRPcHRpb25zW2ldLmxhYmVsID0gJyc7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgb3B0aW9uQXR0cnNTdHJpbmcgPSBmYlV0aWxzLmF0dHJTdHJpbmcoZmllbGRPcHRpb25zW2ldKTtcbiAgICAgICAgICAgICAgb3B0aW9uc01hcmt1cCArPSBgPG9wdGlvbiAke29wdGlvbkF0dHJzU3RyaW5nfT4ke2ZpZWxkT3B0aW9uc1tpXS5sYWJlbH08L29wdGlvbj5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZpZWxkTWFya3VwID0gYCR7ZmllbGRMYWJlbH08c2VsZWN0ICR7ZmllbGREYXRhU3RyaW5nfT4ke29wdGlvbnNNYXJrdXB9PC9zZWxlY3Q+YDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnY2hlY2tib3gtZ3JvdXAnOlxuICAgICAgICBjYXNlICdyYWRpby1ncm91cCc6XG4gICAgICAgICAgbGV0IG9wdGlvbkF0dHJzO1xuICAgICAgICAgIGZpZWxkRGF0YS50eXBlID0gZmllbGREYXRhLnR5cGUucmVwbGFjZSgnLWdyb3VwJywgJycpO1xuXG4gICAgICAgICAgaWYgKGZpZWxkRGF0YS50eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICBmaWVsZERhdGEubmFtZSA9IGZpZWxkRGF0YS5uYW1lICsgJ1tdJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZmllbGRPcHRpb25zKSB7XG4gICAgICAgICAgICBsZXQgb3B0aW9uQXR0cnNTdHJpbmc7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmllbGRPcHRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIG9wdGlvbkF0dHJzID0gT2JqZWN0LmFzc2lnbih7dmFsdWU6ICcnLCBsYWJlbDogJyd9LCBmaWVsZERhdGEsIGZpZWxkT3B0aW9uc1tpXSk7XG5cbiAgICAgICAgICAgICAgaWYgKG9wdGlvbkF0dHJzLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbkF0dHJzLnNlbGVjdGVkO1xuICAgICAgICAgICAgICAgIG9wdGlvbkF0dHJzLmNoZWNrZWQgPSBudWxsO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgb3B0aW9uQXR0cnMuaWQgPSBmaWVsZERhdGEuaWQgKyAnLScgKyBpO1xuICAgICAgICAgICAgICBvcHRpb25BdHRyc1N0cmluZyA9IGZiVXRpbHMuYXR0clN0cmluZyhvcHRpb25BdHRycyk7XG4gICAgICAgICAgICAgIG9wdGlvbnNNYXJrdXAgKz0gYDxpbnB1dCAke29wdGlvbkF0dHJzU3RyaW5nfSAvPiA8bGFiZWwgZm9yPVwiJHtvcHRpb25BdHRycy5pZH1cIj4ke29wdGlvbkF0dHJzLmxhYmVsfTwvbGFiZWw+PGJyPmA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmaWVsZERhdGEub3RoZXIpIHtcbiAgICAgICAgICAgICAgbGV0IG90aGVyT3B0aW9uQXR0cnMgPSB7XG4gICAgICAgICAgICAgICAgaWQ6IGZpZWxkRGF0YS5pZCArICctJyArICdvdGhlcicsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBmaWVsZERhdGEuY2xhc3NOYW1lICsgJyBvdGhlci1vcHRpb24nLFxuICAgICAgICAgICAgICAgIG9uY2xpY2s6IGBmYlV0aWxzLm90aGVyT3B0aW9uQ0IoJyR7ZmllbGREYXRhLmlkfS1vdGhlcicpYFxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIG9wdGlvbkF0dHJzU3RyaW5nID0gZmJVdGlscy5hdHRyU3RyaW5nKE9iamVjdC5hc3NpZ24oe30sIGZpZWxkRGF0YSwgb3RoZXJPcHRpb25BdHRycykpO1xuXG4gICAgICAgICAgICAgIG9wdGlvbnNNYXJrdXAgKz0gYDxpbnB1dCAke29wdGlvbkF0dHJzU3RyaW5nfSAvPiA8bGFiZWwgZm9yPVwiJHtvdGhlck9wdGlvbkF0dHJzLmlkfVwiPiR7b3B0cy5tZXNzYWdlcy5vdGhlcn08L2xhYmVsPiA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiJHtmaWVsZERhdGEubmFtZX1cIiBpZD1cIiR7b3RoZXJPcHRpb25BdHRycy5pZH0tdmFsdWVcIiBzdHlsZT1cImRpc3BsYXk6bm9uZTtcIiAvPmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGZpZWxkTWFya3VwID0gYCR7ZmllbGRMYWJlbH08ZGl2IGNsYXNzPVwiJHtmaWVsZERhdGEudHlwZX0tZ3JvdXBcIj4ke29wdGlvbnNNYXJrdXB9PC9kaXY+YDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgIGNhc2UgJ3Bhc3N3b3JkJzpcbiAgICAgICAgY2FzZSAnZW1haWwnOlxuICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICBjYXNlICdmaWxlJzpcbiAgICAgICAgY2FzZSAnaGlkZGVuJzpcbiAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgIGNhc2UgJ3RlbCc6XG4gICAgICAgIGNhc2UgJ2F1dG9jb21wbGV0ZSc6XG4gICAgICAgICAgZmllbGRNYXJrdXAgPSBgJHtmaWVsZExhYmVsfSA8aW5wdXQgJHtmaWVsZERhdGFTdHJpbmd9PmA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2NvbG9yJzpcbiAgICAgICAgICBmaWVsZE1hcmt1cCA9IGAke2ZpZWxkTGFiZWx9IDxpbnB1dCAke2ZpZWxkRGF0YVN0cmluZ30+ICR7b3B0cy5tZXNzYWdlcy5zZWxlY3RDb2xvcn1gO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdidXR0b24nOlxuICAgICAgICBjYXNlICdzdWJtaXQnOlxuICAgICAgICAgIGZpZWxkTWFya3VwID0gYDxidXR0b24gJHtmaWVsZERhdGFTdHJpbmd9PiR7ZmllbGRMYWJlbFZhbH08L2J1dHRvbj5gO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdjaGVja2JveCc6XG4gICAgICAgICAgZmllbGRNYXJrdXAgPSBgPGlucHV0ICR7ZmllbGREYXRhU3RyaW5nfT4gJHtmaWVsZExhYmVsfWA7XG5cbiAgICAgICAgICBpZiAoZmllbGREYXRhLnRvZ2dsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgJChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaWVsZERhdGEuaWQpKS5rY1RvZ2dsZSgpO1xuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgZmllbGRNYXJrdXAgPSBgPCR7ZmllbGREYXRhLnR5cGV9ICR7ZmllbGREYXRhU3RyaW5nfT4ke2ZpZWxkTGFiZWxWYWx9PC8ke2ZpZWxkRGF0YS50eXBlfT5gO1xuICAgICAgfVxuXG4gICAgICBpZiAoZmllbGREYXRhLnR5cGUgIT09ICdoaWRkZW4nKSB7XG4gICAgICAgIGxldCBjbGFzc05hbWUgPSBmaWVsZERhdGEuaWQgPyBgZmItJHtmaWVsZERhdGEudHlwZX0gZm9ybS1ncm91cCBmaWVsZC0ke2ZpZWxkRGF0YS5pZH1gIDogJyc7XG4gICAgICAgIGZpZWxkTWFya3VwID0gZmJVdGlscy5tYXJrdXAoJ2RpdicsIGZpZWxkTWFya3VwLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmaWVsZE1hcmt1cCA9IGZiVXRpbHMubWFya3VwKCdpbnB1dCcsIG51bGwsIGZpZWxkRGF0YSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmaWVsZE1hcmt1cDtcbiAgICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmb3Igb3RoZXIgb3B0aW9uLlxuICAgKiBUb2dnbGVzIHRoZSBoaWRkZW4gdGV4dCBhcmVhIGZvciBcIm90aGVyXCIgb3B0aW9uLlxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IG90aGVySWQgaWQgb2YgdGhlIFwib3RoZXJcIiBvcHRpb24gaW5wdXRcbiAgICovXG4gIGZiVXRpbHMub3RoZXJPcHRpb25DQiA9IChvdGhlcklkKSA9PiB7XG4gICAgY29uc3Qgb3RoZXJJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG90aGVySWQpO1xuICAgIGNvbnN0IG90aGVySW5wdXRWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke290aGVySWR9LXZhbHVlYCk7XG5cbiAgICBpZiAob3RoZXJJbnB1dC5jaGVja2VkKSB7XG4gICAgICBvdGhlcklucHV0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICBvdGhlcklucHV0VmFsdWUuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdGhlcklucHV0LnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICAgIG90aGVySW5wdXRWYWx1ZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQ2FwaXRhbGl6ZXMgYSBzdHJpbmdcbiAgICogQHBhcmFtICB7U3RyaW5nfSBzdHIgdW5jYXBpdGFsaXplZCBzdHJpbmdcbiAgICogQHJldHVybiB7U3RyaW5nfSBzdHIgY2FwaXRhbGl6ZWQgc3RyaW5nXG4gICAqL1xuICBmYlV0aWxzLmNhcGl0YWxpemUgPSAoc3RyKSA9PiB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9cXGJcXHcvZywgZnVuY3Rpb24obSkge1xuICAgICAgICByZXR1cm4gbS50b1VwcGVyQ2FzZSgpO1xuICAgICAgfSk7XG4gIH07XG4vLyAgIHJldHVybiBmYlV0aWxzO1xuLy8gfVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZiVXRpbHM7XG4iXX0=
